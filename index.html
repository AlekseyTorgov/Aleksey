<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АГстрой - Строительная компания</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <style>
        :root {
            --primary: #4fc3f7;
            --secondary: #29b6f6;
            --accent: #e91e63;
            --light: #1a1a1a;
            --dark: #e0e0e0;
            --success: #66bb6a;
            --promo: #ffb74d;
            --header-bg: rgba(35, 35, 35, 0.9);
            --card-bg: #222222;
            --border: #3a3a3a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            position: relative;
        }
        
        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://iimg.su/i/zFDqsM') no-repeat center center;
            background-size: cover;
            opacity: 0.15;
            z-index: -1;
        }
        
        /* Обновленные стили для шапки */
      header {
    background: white;
    color: black;
    padding: 8.5rem 0 0;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    min-height: 0;
    height: 12.50rem;
}
        
         .header-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 2rem;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .slogan {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #000;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .slogan {
                font-size: 1.5rem;
            }
        }
        
        nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-top: 25px;
        }
        
        nav a {
            color: #000;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        nav a:hover {
            background: rgba(79, 195, 247, 0.2);
            transform: translateY(-2px);
            border-color: var(--secondary);
            color: #000;
        }
        
        .admin-link {
            color: #333;
            position: absolute;
            top: 12px;
            right: 15px;
            transition: all 0.4s ease;
            z-index: 101;
            font-size: 1.2rem;
            text-decoration: none;
        }
        
        .admin-link:hover {
            color: var(--secondary);
            opacity: 1;
            transform: rotate(30deg);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            position: relative;
            z-index: 2;
        }
        
        section {
            margin-bottom: 4rem;
            padding: 3rem 0;
            border-radius: 15px;
            background: var(--card-bg);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            border: 1px solid var(--border);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 1rem;
        }
        
        .section-header h2 {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .section-header p {
            max-width: 800px;
            margin: 0 auto;
            color: #aaa;
            font-size: 1.1rem;
        }
        
        .to-top-btn {
            display: block;
            margin: 3rem auto 0;
            padding: 0.8rem 2rem;
            background: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            max-width: 200px;
        }
        
        .to-top-btn:hover {
            background: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(79, 195, 247, 0.3);
        }
        
        .hero {
            text-align: center;
            padding: 4rem 1rem;
            border-radius: 15px;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            position: relative;
            margin-bottom: 2rem;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://iimg.su/i/zFDqsM') no-repeat center center;
            background-size: cover;
            border: 1px solid var(--border);
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }
        
        .hero-btn {
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            text-decoration: none;
        }
        
        .hero-btn-primary {
            background: var(--accent);
            color: white;
            border: 2px solid var(--accent);
        }
        
        .hero-btn-primary:hover {
            background: #c41d58;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(229, 46, 113, 0.3);
        }
        
        .hero-btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }
        
        .hero-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2);
        }
        
        .hero-btn-tour {
            background: var(--promo);
            color: white;
            border: 2px solid var(--promo);
        }
        
        .hero-btn-tour:hover {
            background: #e68a00;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 159, 0, 0.3);
        }
        
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 99;
            transition: all 0.3s ease;
        }
        
        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .floating-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.5);
        }
        
        .floating-btn.tour {
            background: var(--promo);
            color: white;
        }
        
        .floating-btn.build {
            background: var(--accent);
            color: white;
        }
        
        .floating-btn.buy {
            background: var(--secondary);
            color: white;
        }
        
        .floating-btn .tooltip {
            position: absolute;
            right: 70px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .floating-btn:hover .tooltip {
            opacity: 1;
        }
        
        .advantages {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 1.5rem;
        }
        
        .advantage-item {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            padding: 1.5rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: var(--card-bg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid var(--border);
        }
        
        .advantage-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border-color: var(--secondary);
        }
        
        .advantage-icon {
            background: var(--primary);
            color: var(--light);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .advantage-text {
            flex: 1;
        }
        
        .advantage-text h3 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .gallery-item {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            height: 250px;
            cursor: pointer;
            border: 1px solid var(--border);
        }
        
        .gallery-item:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            border-color: var(--secondary);
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }
        
        .gallery-item:hover img {
            transform: scale(1.1);
        }
        
        .gallery-item .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white;
            padding: 1.5rem 1rem 1rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .gallery-item:hover .overlay {
            opacity: 1;
        }
        
        .video-item {
            grid-column: span 2;
            height: 300px;
        }
        
        .video-item iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 12px;
        }
        
        .video-label {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .work-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .work-step {
            background: var(--light);
            border-radius: 10px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: 1px solid var(--border);
        }
        
        .work-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
            border-color: var(--secondary);
        }
        
        .step-icon {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 1rem;
            background: rgba(79, 195, 247, 0.1);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .work-step:hover .step-icon {
            background: var(--secondary);
            color: white;
            transform: scale(1.1);
        }
        
        .step-number {
            position: absolute;
            top: -20px;
            left: 20px;
            background: var(--secondary);
            color: var(--light);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .work-step h3 {
            color: var(--primary);
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .work-content {
            margin-top: 0.5rem;
            color: #aaa;
        }
        
        .reviews-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .review-item {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            border: 1px solid var(--border);
        }
        
        .review-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 1rem;
        }
        
        .review-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--secondary);
            color: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .review-avatar-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }
        
        .review-author {
            font-weight: bold;
            color: var(--primary);
        }
        
        .review-date {
            color: #777;
            font-size: 0.9rem;
        }
        
        .review-rating {
            color: gold;
            margin: 0.5rem 0;
        }
        
        .review-content {
            line-height: 1.6;
            color: #aaa;
        }
        
        .review-status {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #333;
            color: #999;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        .review-status.approved {
            background: #2e7d32;
            color: #66bb6a;
        }
        
        .review-photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .review-photo-item {
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .review-photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .review-form {
            max-width: 600px;
            margin: 3rem auto 0;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }
        
        .review-form h3 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }
        
        .rating-input {
            display: flex;
            gap: 5px;
            margin-bottom: 1rem;
        }
        
        .rating-input i {
            cursor: pointer;
            font-size: 1.5rem;
            color: #555;
            transition: color 0.2s;
        }
        
        .rating-input i.active {
            color: gold;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: var(--light);
        }
        
        .btn-primary:hover {
            background: var(--primary);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-danger {
            background: #c62828;
            color: white;
        }
        
        .btn-danger:hover {
            background: #b71c1c;
        }
        
        footer {
            background: #1a1a1a;
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 2rem;
            border-top: 1px solid var(--border);
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .footer-section {
            margin-bottom: 1.5rem;
        }
        
        .footer-section h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .contact-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 18px;
            background: rgba(255,255,255,0.1);
        }
        
        .contact-text {
            flex: 1;
            color: #aaa;
        }
        
        .contact-text a {
            color: var(--primary);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .contact-text a:hover {
            color: var(--secondary);
            text-decoration: underline;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 1rem;
        }
        
        .social-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.2);
        }
        
        .vk-icon:hover { background: #4a76a8; }
        .youtube-icon:hover { background: #ff0000; }
        .zen-icon:hover { background: #3d9ae8; }
        .rutube-icon:hover { background: #3f6e99; }
        .whatsapp-icon:hover { background: #25d366; }
        .telegram-icon:hover { background: #0088cc; }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #777;
        }
        
        .admin-panel {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
            border: 1px solid var(--border);
        }
        
        .admin-panel.active {
            display: block;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }
        
        .admin-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        
        .admin-section h4 {
            margin-bottom: 1.5rem;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .admin-editor {
            background: #1a1a1a;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }
        
        .editor-row {
            display: flex;
            gap: 15px;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .editor-group {
            flex: 1;
            min-width: 300px;
        }
        
        .editor-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .editor-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        textarea.editor-control {
            min-height: 150px;
        }
        
        .image-preview {
            width: 100%;
            max-height: 200px;
            object-fit: contain;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-top: 1rem;
            display: none;
        }
        
        .gallery-manager {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 1rem;
        }
        
        .gallery-preview {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            height: 150px;
            background: #1a1a1a;
            border: 1px dashed #555;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .gallery-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .gallery-preview .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .upload-area {
            border: 2px dashed #555;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: var(--secondary);
            background: rgba(79, 195, 247, 0.05);
        }
        
        .upload-area i {
            font-size: 3rem;
            color: #555;
            margin-bottom: 1rem;
        }
        
        .login-form {
            max-width: 400px;
            margin: 5rem auto;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }
        
        .login-form h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .promotion-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .promotion-card {
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid var(--border);
        }
        
        .promotion-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: var(--secondary);
        }
        
        .promotion-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .promotion-image {
            height: 200px;
            overflow: hidden;
        }
        
        .promotion-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .promotion-card:hover .promotion-image img {
            transform: scale(1.1);
        }
        
        .promotion-content {
            padding: 1.5rem;
        }
        
        .promotion-title {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--promo);
        }
        
        .promotion-desc {
            color: #aaa;
            margin-bottom: 1.5rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid var(--border);
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--accent);
        }
        
        .modal-title {
            margin-bottom: 1.5rem;
            color: var(--primary);
            text-align: center;
        }
        
        .houses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }
        
        .house-card {
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--card-bg);
        }
        
        .house-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: var(--secondary);
        }
        
        .house-image {
            height: 180px;
            overflow: hidden;
        }
        
        .house-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .house-card:hover .house-image img {
            transform: scale(1.1);
        }
        
        .house-info {
            padding: 1rem;
        }
        
        .house-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .house-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #777;
        }
        
        .house-price {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.2rem;
        }
        
        .select-house-btn {
            width: 100%;
            text-align: center;
            padding: 0.75rem;
            background: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .select-house-btn:hover {
            background: var(--primary);
        }
        
        .form-section {
            margin-bottom: 1.5rem;
        }
        
        .form-section h4 {
            margin-bottom: 1rem;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 1rem;
        }
        
        .submit-btn:hover {
            background: #c41d58;
        }
        
        .success-message {
            background: #2e7d32;
            color: #a5d6a7;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            text-align: center;
            display: none;
        }
        
        #about .content {
            padding: 0 40px;
            font-size: 1.15rem;
            line-height: 1.8;
            color: #aaa;
        }
        
        #about ul {
            margin: 25px 0;
            padding-left: 20px;
            list-style: none;
        }
        
        #about ul li {
            margin-bottom: 20px;
            padding-left: 40px;
            position: relative;
            font-size: 1.1rem;
        }
        
        #about ul li i {
            position: absolute;
            left: 0;
            top: 3px;
            width: 28px;
            height: 28px;
            background: var(--secondary);
            color: var(--light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        #about .guarantee-box {
            background: rgba(79, 195, 247, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 20px 25px;
            border-radius: 0 8px 8px 0;
            margin: 30px 0;
            font-size: 1.15rem;
            color: #ddd;
        }
        
        .photo-upload-container {
            margin: 1.5rem 0;
            text-align: center;
        }
        
        .photo-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--secondary);
            margin: 0 auto 15px;
            display: none;
        }
        
        .upload-btn {
            display: inline-block;
            padding: 10px 20px;
            background: var(--secondary);
            color: var(--light);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            position: relative;
        }
        
        .upload-btn input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .upload-btn:hover {
            background: var(--primary);
        }
        
        .upload-btn i {
            margin-right: 8px;
        }
        
        .upload-progress {
            width: 100%;
            height: 5px;
            background: #333;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .progress-bar {
            height: 100%;
            width: 0%;
            background: var(--accent);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .logo-left .logo-container {
            justify-content: flex-start;
        }
        
        .logo-right .logo-container {
            justify-content: flex-end;
        }
        
        .slogan-top .slogan {
            order: -1;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }
        
        .slogan-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .slogan-left .slogan {
            margin-top: 0;
        }
        
        .slogan-right {
            display: flex;
            flex-direction: row-reverse;
            align-items: center;
            gap: 20px;
        }
        
        .slogan-right .slogan {
            margin-top: 0;
        }
        
        .header-banner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
        }
        
        .header-with-banner {
            background: rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }
        
        .loader {
            border: 4px solid rgba(255,255,255,0.1);
            border-top: 4px solid var(--secondary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Новые стили для управления домами */
        .houses-manager {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .house-manager-item {
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            background: var(--card-bg);
            position: relative;
        }
        
        .house-manager-image {
            height: 150px;
            overflow: hidden;
        }
        
        .house-manager-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .house-manager-info {
            padding: 15px;
        }
        
        .house-manager-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary);
        }
        
        .remove-house-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
        }
        
        /* Стили для управления фото в отзывах */
        .photo-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .photo-preview-item {
            position: relative;
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .photo-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-preview-item .remove-photo-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            cursor: pointer;
        }
        
        /* Стили для кнопок управления */
        .admin-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .edit-btn {
            background: var(--secondary);
            color: white;
        }
        
        .delete-btn {
            background: var(--accent);
            color: white;
        }
        
        .item-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            z-index: 10;
        }
        
        .action-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
        }
        
        .edit-action {
            background: var(--secondary);
        }
        
        .delete-action {
            background: var(--accent);
        }
        
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                gap: 0.5rem;
                align-items: center;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                gap: 1rem;
            }
            
            .hero-btn {
                width: 100%;
                justify-content: center;
            }
            
            .video-item {
                grid-column: span 1;
                height: 250px;
            }
            
            .editor-row {
                flex-direction: column;
            }
            
            .editor-group {
                min-width: 100%;
            }
            
            .work-steps {
                grid-template-columns: 1fr;
            }
            
            .advantages {
                grid-template-columns: 1fr;
            }
            
            .reviews-container {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
                gap: 1rem;
            }
            
            .houses-grid {
                grid-template-columns: 1fr;
            }
            
            .promotion-cards {
                grid-template-columns: 1fr;
            }
            
            .floating-buttons {
                bottom: 15px;
                right: 15px;
            }
            
            .floating-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="bg-overlay" id="bgOverlay"></div>
    
    <header id="siteHeader">
        <a href="#" class="admin-link" id="adminToggle" title="Админ-панель">
            <i class="fas fa-cog"></i>
        </a>
        
        <div class="header-container">
            <div class="logo-container" id="logoContainer">
                <div class="slogan" id="headerSlogan">Качественные решения для вашего комфорта</div>
            </div>
            
            <nav>
                <a href="#">Главная</a>
                <a href="#about">О нас</a>
                <a href="#promotions">Акции</a>
                <a href="#how-we-work">Как мы работаем</a>
                <a href="#portfolio">Наши работы</a>
                <a href="#reviews">Отзывы</a>
            </nav>
        </div>
    </header>

    <div class="floating-buttons" id="floatingButtons">
        <div class="floating-btn tour" id="floatingTourBtn">
            <i class="fas fa-map-marked-alt"></i>
            <span class="tooltip">Записаться на экскурсию</span>
        </div>
        <div class="floating-btn build" id="floatingBuildBtn">
            <i class="fas fa-hammer"></i>
            <span class="tooltip">Построить дом</span>
        </div>
        <div class="floating-btn buy" id="floatingBuyBtn">
            <i class="fas fa-home"></i>
            <span class="tooltip">Купить готовый дом</span>
        </div>
    </div>

    <div class="container">
        <section class="hero" id="mainHero">
            <div class="hero-content">
                <h1>АГстрой</h1>
                <div class="hero-buttons">
                    <a class="hero-btn hero-btn-primary" id="buyHouseBtn">
                        <i class="fas fa-home"></i> Купить готовый дом
                    </a>
                    <a class="hero-btn hero-btn-secondary" id="buildHouseBtn">
                        <i class="fas fa-hammer"></i> Построить дом
                    </a>
                    <a class="hero-btn hero-btn-tour" id="tourBtn">
                        <i class="fas fa-map-marked-alt"></i> Записаться на экскурсию
                    </a>
                </div>
            </div>
        </section>

        <section id="about">
            <div class="section-header">
                <h2><i class="fas fa-info-circle"></i> О нас</h2>
                <p>Строительная компания "АГстрой" - это команда профессионалов с многолетним опытом работы в сфере строительства и ремонта.</p>
            </div>
            
            <div class="content">
                <p>Мы специализируемся на строительстве частных домов, коттеджей, бань и других сооружений под ключ. Наша компания работает на рынке более 10 лет, за это время мы реализовали сотни успешных проектов различной сложности.</p>
                
                <p>Наши принципы работы:</p>
                <ul>
                    <li><i class="fas fa-check"></i> Использование только качественных материалов</li>
                    <li><i class="fas fa-ruler-combined"></i> Соблюдение всех строительных норм и стандартов</li>
                    <li><i class="fas fa-hand-holding-usd"></i> Честная фиксированная цена без скрытых платежей</li>
                    <li><i class="fas fa-calendar-check"></i> Строгое соблюдение сроков выполнения работ</li>
                    <li><i class="fas fa-user-friends"></i> Индивидуальный подход к каждому клиенту</li>
                </ul>
                
                <div class="guarantee-box">
                    <p><i class="fas fa-shield-alt" style="color: var(--secondary); font-size: 1.5rem; vertical-align: middle; margin-right: 10px;"></i> 
                    Гарантируем высокое качество работ, соблюдение сроков, полное сопровождение на всех этапах строительства. Используем высококачественные материалы и применяем успешные современные технологии.</p>
                </div>
                
                <p>Мы гордимся тем, что большинство наших клиентов обращаются к нам по рекомендациям, что говорит о высоком качестве нашей работы и доверии клиентов.</p>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="advantages">
            <div class="section-header">
                <h2><i class="fas fa-star"></i> Наши преимущества</h2>
                <p>Почему клиенты выбирают именно нас для строительства своего дома</p>
            </div>
            
            <div class="advantages" id="advantagesContainer">
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Качественные дома под ключ</h3>
                        <p>Строительство домов с гарантией качества и соблюдением всех сроков</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-drafting-compass"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Проект индивидуально</h3>
                        <p>Разрабатываем проекты с учетом всех пожеланий заказчика</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Надежность решений</h3>
                        <p>Используем только проверенные конструктивные решения</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Квалифицированные кадры</h3>
                        <p>Все наши специалисты имеют профильное образование и опыт работы</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-handshake"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Честная фиксированная цена</h3>
                        <p>Никаких скрытых платежей и дополнительных расходов</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Человеческое отношение</h3>
                        <p>Индивидуальный подход к каждому клиенту</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Помогаем сэкономить</h3>
                        <p>Подберем оптимальные решения для вашего бюджета</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-house-user"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Семейная ипотека</h3>
                        <p>Поможем оформить льготную ипотеку на строительство</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Технический контроль на каждом этапе строительства</h3>
                        <p>Осуществляем строгий контроль качества на всех этапах строительных работ</p>
                    </div>
                </div>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="how-we-work">
            <div class="section-header">
                <h2><i class="fas fa-cogs"></i> Как мы работаем</h2>
                <p>Наш прозрачный и понятный процесс строительства от заявки до сдачи объекта</p>
            </div>
            
            <div class="work-steps" id="workSteps">
                <div class="work-step">
                    <div class="step-number">1</div>
                    <div class="step-icon"><i class="fas fa-phone"></i></div>
                    <h3>Заявка/звонок</h3>
                    <div class="work-content">
                        <p>Вы делаете звонок, мы вас консультируем.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">2</div>
                    <div class="step-icon"><i class="fas fa-handshake"></i></div>
                    <h3>Встреча</h3>
                    <div class="work-content">
                        <p>Встречаемся на объекте для осмотра и обсуждения деталей.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">3</div>
                    <div class="step-icon"><i class="fas fa-drafting-compass"></i></div>
                    <h3>Готовим проект</h3>
                    <div class="work-content">
                        <p>Предлагаем на выбор готовые проекты или разрабатываем индивидуальный эскизный проект с учетом ваших пожеланий.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">4</div>
                    <div class="step-icon"><i class="fas fa-file-invoice-dollar"></i></div>
                    <h3>Смета</h3>
                    <div class="work-content">
                        <p>Подготавливаем и согласовываем смету.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">5</div>
                    <div class="step-icon"><i class="fas fa-file-contract"></i></div>
                    <h3>Договор</h3>
                    <div class="work-content">
                        <p>Заключаем договор с прописанными сроками, стоимостью и обязательствами.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">6</div>
                    <div class="step-icon"><i class="fas fa-hard-hat"></i></div>
                    <h3>Выполнение работ</h3>
                    <div class="work-content">
                        <p>Строим в срок согласно СНИПам и ГОСТам.</p>
                    </div>
                </div>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="portfolio">
            <div class="section-header">
                <h2><i class="fas fa-photo-video"></i> Наши работы</h2>
                <p>Реализованные проекты, которыми мы гордимся</p>
            </div>
            
            <div class="gallery" id="galleryContainer">
                <!-- Галерея будет загружена динамически -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="promotions">
            <div class="section-header">
                <h2><i class="fas fa-percentage"></i> Акции и специальные предложения</h2>
                <p>Выгодные условия для наших клиентов</p>
            </div>
            
            <div class="promotion-cards" id="promotionsContainer">
                <!-- Акции будут загружены динамически -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="reviews">
            <div class="section-header">
                <h2><i class="fas fa-comments"></i> Отзывы клиентов</h2>
                <p>Что говорят наши клиенты о сотрудничестве с нами</p>
            </div>
            
            <div class="reviews-container" id="reviewsContainer">
                <!-- Отзывы будут загружены динамически -->
            </div>
            
            <div class="review-form">
                <h3>Оставить отзыв</h3>
                <form id="reviewForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="reviewName">Ваше имя</label>
                            <input type="text" id="reviewName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="reviewEmail">Email</label>
                            <input type="email" id="reviewEmail" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Оценка</label>
                        <div class="rating-input" id="ratingInput">
                            <i class="far fa-star" data-value="1"></i>
                            <i class="far fa-star" data-value="2"></i>
                            <i class="far fa-star" data-value="3"></i>
                            <i class="far fa-star" data-value="4"></i>
                            <i class="far fa-star" data-value="5"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="reviewText">Ваш отзыв</label>
                        <textarea id="reviewText" class="form-control" rows="5" required></textarea>
                    </div>
                    
                    <div class="photo-upload-container">
                        <img id="photoPreview" class="photo-preview" alt="Предпросмотр фото">
                        <div class="upload-btn">
                            <i class="fas fa-camera"></i> Загрузить фото
                            <input type="file" id="photoUpload" accept="image/*" style="display: none;">
                        </div>
                        <div class="upload-progress" id="uploadProgress">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block">Отправить отзыв</button>
                </form>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>
        
        <div class="admin-panel" id="adminPanel">
            <div class="admin-header">
                <h3>Административная панель</h3>
                <button class="btn btn-primary" id="logoutBtn">Выйти</button>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-header"></i> Управление шапкой сайта</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="headerSlogan">Слоган</label>
                            <input type="text" id="headerSloganInput" class="editor-control" value="Качественные решения для вашего комфорта">
                        </div>
                    </div>
                    
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="logoPosition">Позиция логотипа</label>
                            <select id="logoPosition" class="editor-control">
                                <option value="center">По центру</option>
                                <option value="left">Слева</option>
                                <option value="right">Справа</option>
                            </select>
                        </div>
                        <div class="editor-group">
                            <label for="sloganPosition">Позиция слогана</label>
                            <select id="sloganPosition" class="editor-control">
                                <option value="bottom">Под логотипом</option>
                                <option value="top">Над логотипом</option>
                                <option value="left">Слева от логотипа</option>
                                <option value="right">Справа от логотипа</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="headerBg">Фон шапки</label>
                            <input type="file" id="headerBg" class="editor-control">
                            <div class="upload-btn" id="bgUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить фон
                            </div>
                            <img src="" alt="Фон" class="image-preview" id="headerBgPreview">
                        </div>
                        <div class="editor-group">
                            <label for="bgOpacity">Прозрачность фона</label>
                            <input type="range" id="bgOpacity" class="editor-control" min="0" max="1" step="0.05" value="0.15">
                            <div id="opacityValue">15%</div>
                        </div>
                    </div>
                    
                    <div class="editor-group">
                        <label>Баннер для шапки</label>
                        <input type="file" id="bannerUpload" class="editor-control">
                        <div class="upload-btn" id="bannerUploadBtn" style="margin-top: 10px;">
                            <i class="fas fa-upload"></i> Загрузить баннер
                        </div>
                        <img id="bannerPreview" class="image-preview" alt="Предпросмотр баннера">
                    </div>
                    
                    <button class="btn btn-primary" id="saveHeaderBtn">Сохранить изменения</button>
                </div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-star"></i> Управление преимуществами</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="advantageIcon">Иконка</label>
                            <input type="text" id="advantageIcon" class="editor-control" placeholder="fas fa-icon-name">
                        </div>
                        <div class="editor-group">
                            <label for="advantageTitle">Заголовок</label>
                            <input type="text" id="advantageTitle" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="advantageText">Текст</label>
                        <textarea id="advantageText" class="editor-control"></textarea>
                    </div>
                    <button class="btn btn-primary" id="addAdvantageBtn">Добавить преимущество</button>
                </div>
                
                <div class="current-items" id="advantagesManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-cogs"></i> Управление шагами работы</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="stepNumber">Номер шага</label>
                            <input type="number" id="stepNumber" class="editor-control" min="1">
                        </div>
                        <div class="editor-group">
                            <label for="stepTitle">Заголовок</label>
                            <input type="text" id="stepTitle" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="stepIcon">Иконка</label>
                            <input type="text" id="stepIcon" class="editor-control" placeholder="fas fa-icon-name">
                        </div>
                        <div class="editor-group">
                            <label for="stepContent">Описание</label>
                            <textarea id="stepContent" class="editor-control"></textarea>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="addStepBtn">Добавить шаг</button>
                </div>
                
                <div class="current-items" id="stepsManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-photo-video"></i> Управление галереей</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="galleryType">Тип</label>
                            <select id="galleryType" class="editor-control">
                                <option value="image">Изображение</option>
                                <option value="video">Видео</option>
                            </select>
                        </div>
                        <div class="editor-group">
                            <label for="gallerySource">Источник</label>
                            <input type="file" id="gallerySource" class="editor-control">
                            <div class="upload-btn" id="galleryUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить изображение
                            </div>
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="galleryTitle">Заголовок</label>
                            <input type="text" id="galleryTitle" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="galleryDesc">Описание</label>
                            <input type="text" id="galleryDesc" class="editor-control">
                        </div>
                    </div>
                    <img id="galleryPreview" class="image-preview" alt="Предпросмотр изображения">
                    <button class="btn btn-primary" id="addGalleryItemBtn">Добавить в галерею</button>
                </div>
                
                <div class="gallery-manager" id="galleryManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-home"></i> Управление готовыми домами</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="houseName">Название дома</label>
                            <input type="text" id="houseName" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="houseStage">Стадия строительства</label>
                            <input type="text" id="houseStage" class="editor-control" placeholder="Готов, Отделка и т.д.">
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="housePrice">Цена</label>
                            <input type="text" id="housePrice" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="houseArea">Площадь (кв.м.)</label>
                            <input type="number" id="houseArea" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="houseDescription">Описание</label>
                        <textarea id="houseDescription" class="editor-control"></textarea>
                    </div>
                    <div class="editor-group">
                        <label for="houseImage">Изображение</label>
                        <input type="file" id="houseImage" class="editor-control">
                        <div class="upload-btn" id="houseUploadBtn" style="margin-top: 10px;">
                            <i class="fas fa-upload"></i> Загрузить изображение
                        </div>
                    </div>
                    <img id="housePreview" class="image-preview" alt="Предпросмотр изображения" style="display:none;">
                    <button class="btn btn-primary" id="addHouseBtn">Добавить дом</button>
                </div>
                
                <div class="houses-manager" id="housesManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-percentage"></i> Управление акциями</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="promoBadge">Бейдж</label>
                            <input type="text" id="promoBadge" class="editor-control" placeholder="Скидка 20%">
                        </div>
                        <div class="editor-group">
                            <label for="promoImage">Изображение</label>
                            <input type="file" id="promoImage" class="editor-control">
                            <div class="upload-btn" id="promoUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить изображение
                            </div>
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="promoTitle">Заголовок</label>
                            <input type="text" id="promoTitle" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="promoDesc">Описание</label>
                            <textarea id="promoDesc" class="editor-control"></textarea>
                        </div>
                    </div>
                    <img id="promoPreview" class="image-preview" alt="Предпросмотр изображения">
                    <button class="btn btn-primary" id="addPromoBtn">Добавить акцию</button>
                </div>
                
                <div class="promotion-cards" id="promotionsManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fab fa-vk"></i> Интеграция с VK</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="vkGroupId">ID группы VK</label>
                        <input type="text" id="vkGroupId" class="editor-control" value="147735588">
                    </div>
                    <div class="editor-group">
                        <label for="vkToken">Access Token</label>
                        <textarea id="vkToken" class="editor-control" rows="4">vk1.a.IwkgUcjTjAyieE9j1BvOmTISVAa0O1zL5qpgDkP4U2_pZ2M8H-besZ3ViANyMvw1MrJgDfVCySbBpK59FotPksqIu5mkJwru9_hw6eqikiX35f9uyu0UXrw-FSapGbEoni2DSlGWDLk-QkMEeeohhlOe7Khc0rKy2EydG0Ffbbtvx48iyEfVLBXmZWrwlJITvXBsU6Vw-7_ZZvlzYkq3mQ</textarea>
                    </div>
                    <div class="editor-group">
                        <label for="vkCount">Количество постов</label>
                        <input type="number" id="vkCount" class="editor-control" min="1" max="20" value="5">
                    </div>
                    <button class="btn btn-primary" id="saveVkBtn">Сохранить настройки</button>
                    <button class="btn btn-secondary" id="loadVkBtn">Загрузить посты</button>
                </div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fab fa-telegram"></i> Настройка Telegram</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="telegramBotToken">Токен бота Telegram</label>
                        <input type="text" id="telegramBotToken" class="editor-control" value="7895837790:AAGcCjxt1m1PX1QxCLNcqwoY0Q9PC_vMXWk">
                    </div>
                    <div class="editor-group">
                        <label for="telegramChatId">ID чата</label>
                        <input type="text" id="telegramChatId" class="editor-control" value="1240604782">
                        <button class="btn btn-secondary" id="detectChatIdBtn" style="margin-top: 10px;">Определить автоматически</button>
                        <p id="chatIdResult" style="margin-top: 10px;"></p>
                    </div>
                    <button class="btn btn-primary" id="saveTelegramBtn">Сохранить настройки</button>
                    <button class="btn btn-secondary" id="testTelegramBtn">Тест отправки</button>
                </div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-envelope"></i> Настройка EmailJS</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="emailjsServiceId">Service ID</label>
                        <input type="text" id="emailjsServiceId" class="editor-control" value="gmail_service">
                    </div>
                    <div class="editor-group">
                        <label for="emailjsTemplateId">Template ID</label>
                        <input type="text" id="emailjsTemplateId" class="editor-control" value="template_l4bhp9h">
                    </div>
                    <div class="editor-group">
                        <label for="emailjsUserId">User ID</label>
                        <input type="text" id="emailjsUserId" class="editor-control" value="0Y5XcvC3vwg6QPzZm">
                    </div>
                    <button class="btn btn-primary" id="saveEmailjsBtn">Сохранить настройки</button>
                </div>
            </div>
        </div>
        
        <div class="login-form" id="loginForm" style="display: none;">
            <h2>Вход в админ-панель</h2>
            <div class="form-group">
                <label for="username">Логин</label>
                <input type="text" id="username" class="form-control" placeholder="Введите логин">
            </div>
            <div class="form-group">
                <label for="password">Пароль</label>
                <input type="password" id="password" class="form-control" placeholder="Введите пароль">
            </div>
            <button class="btn btn-primary" id="loginBtn" style="width: 100%;">Войти</button>
            <p id="loginMessage" style="color: #ff6e6e; margin-top: 1rem; text-align: center;"></p>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Контакты</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">📱</div>
                        <div class="contact-text">
                            <strong>Телефон:</strong><br>
                            <a href="tel:+79588770191">8 (958) 877-01-91</a><br>
                            <a href="tel:+79090507530">7 (909) 050-75-30</a><br>
                            <a href="tel:+73412235235">7 (3412) 235-235</a><br>
                            <a href="tel:+79199114436">7 (919) 911-44-36</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">✉️</div>
                        <div class="contact-text">
                            <strong>Email:</strong><br>
                            <a href="mailto:ooo-acme@mail.ru">ooo-acme@mail.ru</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">🏢</div>
                        <div class="contact-text">
                            <strong>Адрес:</strong><br>
                            427022, д.Пирогово, ул. Азина, 43в
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">⏰</div>
                        <div class="contact-text">
                            <strong>Часы работы:</strong><br>
                            Пн-Пт: 9:00 - 18:00<br>
                            Сб-Вс: выходной
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Социальные сети</h3>
                <p>Следите за нашими новостями и проектами в социальных сетях:</p>
                <div class="social-icons">
                    <a href="https://vk.com/agstroy" target="_blank" class="social-icon vk-icon">
                        <i class="fab fa-vk"></i>
                    </a>
                    <a href="http://www.youtube.com/c/СтроительнаякомпанияАГстройрф" target="_blank" class="social-icon youtube-icon">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://zen.yandex.ru/agstroy" target="_blank" class="social-icon zen-icon">
                        <i class="fab fa-yandex"></i>
                    </a>
                    <a href="https://rutube.ru/channel/18967331/" target="_blank" class="social-icon rutube-icon">
                        <i class="fas fa-play-circle"></i>
                    </a>
                    <a href="https://wa.me/79588770191" target="_blank" class="social-icon whatsapp-icon">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://t.me/+79090507530" target="_blank" class="social-icon telegram-icon">
                        <i class="fab fa-telegram"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Быстрые ссылки</h3>
                <div class="footer-links">
                    <a href="#">Главная</a>
                    <a href="#about">О нас</a>
                    <a href="#promotions">Акции</a>
                    <a href="#how-we-work">Как мы работаем</a>
                    <a href="#portfolio">Наши работы</a>
                    <a href="#reviews">Отзывы</a>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2023 Строительная компания "АГстрой". Все права защищены.</p>
        </div>
    </footer>
    
    <div class="modal" id="buyHouseModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Выберите готовый дом</h3>
            
            <div class="houses-grid" id="housesGrid">
                <!-- Дома будут загружены динамически -->
            </div>
            
            <div id="selectedHouseForm" style="display: none;">
                <div class="form-section">
                    <h4>Заявка на покупку дома</h4>
                    <form id="buyHouseForm">
                        <div class="form-group">
                            <label for="buyerName">Ваше имя</label>
                            <input type="text" id="buyerName" class="form-control" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="buyerPhone">Телефон</label>
                                <input type="tel" id="buyerPhone" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="buyerEmail">Email</label>
                                <input type="email" id="buyerEmail" class="form-control" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="buyerMessage">Дополнительная информация</label>
                            <textarea id="buyerMessage" class="form-control" rows="3"></textarea>
                        </div>
                        
                        <button type="submit" class="submit-btn">Отправить заявку</button>
                    </form>
                </div>
                
                <div class="success-message" id="buySuccessMessage">
                    <i class="fas fa-check-circle"></i> Ваша заявка отправлена! Мы свяжемся с вами в ближайшее время.
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="buildHouseModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Заявка на постройку дома</h3>
            
            <div class="form-section">
                <h4>Контактная информация</h4>
                <form id="buildHouseForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientName">Ваше имя</label>
                            <input type="text" id="clientName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="clientPhone">Телефон</label>
                            <input type="tel" id="clientPhone" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientEmail">Email</label>
                            <input type="email" id="clientEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="clientLocation">Местоположение участка</label>
                            <input type="text" id="clientLocation" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="houseArea">Площадь дома (кв.м.)</label>
                        <input type="number" id="houseArea" class="form-control" min="20" max="500">
                    </div>
                    
                    <div class="form-group">
                        <label for="houseType">Тип дома</label>
                        <select id="houseType" class="form-control">
                            <option value="">Выберите тип</option>
                            <option value="cottage">Коттедж</option>
                            <option value="dacha">Дачный дом</option>
                            <option value="duplex">Дуплекс</option>
                            <option value="townhouse">Таунхаус</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="clientBudget">Бюджет (руб.)</label>
                        <input type="number" id="clientBudget" class="form-control" min="0" step="100000">
                    </div>
                    
                    <div class="form-group">
                        <label for="clientWishes">Ваши пожелания</label>
                        <textarea id="clientWishes" class="form-control" rows="4"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">Отправить заявку</button>
                </form>
            </div>
            
            <div class="success-message" id="buildSuccessMessage">
                <i class="fas fa-check-circle"></i> Ваша заявка отправлена! Мы свяжемся с вами в ближайшее время.
            </div>
        </div>
    </div>
    
    <div class="modal" id="tourModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Записаться на экскурсию</h3>
            
            <div class="form-section">
                <h4>Выберите объект и дату</h4>
                <form id="tourForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tourName">Ваше имя</label>
                            <input type="text" id="tourName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="tourPhone">Телефон</label>
                            <input type="tel" id="tourPhone" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tourEmail">Email</label>
                            <input type="email" id="tourEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="tourDate">Желаемая дата</label>
                            <input type="date" id="tourDate" class="form-control" min="<?php echo date('Y-m-d'); ?>">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="tourObject">Выберите объект для экскурсии</label>
                        <select id="tourObject" class="form-control" required>
                            <option value="">Выберите объект</option>
                            <option value="ЖК 'Лесной'">ЖК "Лесной" (строительство завершено)</option>
                            <option value="ЖК 'Речной'">ЖК "Речной" (стадия отделки)</option>
                            <option value="ЖК 'Солнечный'">ЖК "Солнечный" (стадия фундамента)</option>
                            <option value="Коттеджный поселок 'Тайга'">Коттеджный поселок "Тайга"</option>
                            <option value="Строительство частного дома в Подмосковье">Строительство частного дома в Подмосковье</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="tourParticipants">Количество участников</label>
                        <input type="number" id="tourParticipants" class="form-control" min="1" max="10" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="tourComments">Комментарии и пожелания</label>
                        <textarea id="tourComments" class="form-control" rows="3"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">Отправить заявку</button>
                </form>
            </div>
            
            <div class="success-message" id="tourSuccessMessage">
                <i class="fas fa-check-circle"></i> Ваша заявка на экскурсию отправлена! Мы свяжемся с вами для подтверждения.
            </div>
        </div>
    </div>
    
    <script>
        // Часть 1: Инициализация состояния приложения
        let state = {
            isLoggedIn: false,
            reviews: [],
            advantages: [
                { 
                    id: 1,
                    icon: "fas fa-home", 
                    title: "Качественные дома под ключ", 
                    text: "Строительство домов с гарантией качества и соблюдением всех сроков" 
                },
                { 
                    id: 2,
                    icon: "fas fa-drafting-compass", 
                    title: "Проект индивидуально", 
                    text: "Разрабатываем проекты с учетом всех пожеланий заказчика" 
                },
                { 
                    id: 3,
                    icon: "fas fa-shield-alt", 
                    title: "Надежность решений", 
                    text: "Используем только проверенные конструктивные решения" 
                },
                { 
                    id: 4,
                    icon: "fas fa-user-tie", 
                    title: "Квалифицированные кадры", 
                    text: "Все наши специалисты имеют профильное образование и опыт работы" 
                },
                { 
                    id: 5,
                    icon: "fas fa-handshake", 
                    title: "Честная фиксированная цена", 
                    text: "Никаких скрытых платежей и дополнительных расходов" 
                },
                { 
                    id: 6,
                    icon: "fas fa-heart", 
                    title: "Человеческое отношение", 
                    text: "Индивидуальный подход к каждому клиенту" 
                },
                { 
                    id: 7,
                    icon: "fas fa-piggy-bank", 
                    title: "Помогаем сэкономить", 
                    text: "Подберем оптимальные решения для вашего бюджета" 
                },
                { 
                    id: 8,
                    icon: "fas fa-house-user", 
                    title: "Семейная ипотека", 
                    text: "Поможем оформить льготную ипотеку на строительство" 
                },
                { 
                    id: 9,
                    icon: "fas fa-clipboard-check", 
                    title: "Технический контроль этапов строительных работ", 
                    text: "Осуществляем строгий контроль качества на всех этапах строительных работ" 
                }
            ],
            workSteps: [
                {
                    id: 1,
                    step: 1,
                    title: "Заявка/звонок",
                    content: "<p>Вы делаете звонок, мы вас консультируем.</p>",
                    icon: "fas fa-phone"
                },
                {
                    id: 2,
                    step: 2,
                    title: "Встреча",
                    content: "<p>Встречаемся на объекте для осмотра и обсуждения деталей.</p>",
                    icon: "fas fa-handshake"
                },
                {
                    id: 3,
                    step: 3,
                    title: "Готовим проект",
                    content: "<p>Предлагаем на выбор готовые проекты или разрабатываем индивидуальный эскизный проект с учетом ваших пожеланий.</p>",
                    icon: "fas fa-drafting-compass"
                },
                {
                    id: 4,
                    step: 4,
                    title: "Смета",
                    content: "<p>Подготавливаем и согласовываем смету.</p>",
                    icon: "fas fa-file-invoice-dollar"
                },
                {
                    id: 5,
                    step: 5,
                    title: "Договор",
                    content: "<p>Заключаем договор с прописанными сроками, стоимостью и обязательствами.</p>",
                    icon: "fas fa-file-contract"
                },
                {
                    id: 6,
                    step: 6,
                    title: "Выполнение работ",
                    content: "<p>Строим в срок согласно СНИПам и ГОСТам.</p>",
                    icon: "fas fa-hard-hat"
                }
            ],
            gallery: [
                { 
                    id: 1,
                    type: 'image', 
                    src: 'https://iimg.su/i/GpneAr', 
                    title: 'Дом в КП Тихие зори', 
                    description: 'Одноэтажный каменный дом с террасой' 
                },
                { 
                    id: 2,
                    type: 'image', 
                    src: 'https://iimg.su/i/ChcuRI', 
                    title: 'Особняк в КП Орловское', 
                    description: 'Двухэтажный дом с панорамными окнами' 
                },
                { 
                    id: 3,
                    type: 'image', 
                    src: 'https://iimg.su/i/UhVOZ3', 
                    title: 'Коттедж в КП Екатериненский', 
                    description: 'Современный дом с плоской крышей' 
                },
                { 
                    id: 4,
                    type: 'image', 
                    src: 'https://iimg.su/i/kkG61s', 
                    title: 'Резиденция в КП Ближняя усадьба', 
                    description: 'Просторный дом с зимним садом' 
                },
                { 
                    id: 5,
                    type: 'image', 
                    src: 'https://iimg.su/i/Yob7eP', 
                    title: 'Таунхаус в КП Славянский', 
                    description: 'Современный комплекс таунхаусов' 
                },
                { 
                    id: 6,
                    type: 'image', 
                    src: 'https://iimg.su/i/XAsEsW', 
                    title: 'Особняк в д. Старомихайловское', 
                    description: 'Дом в классическом стиле с колоннами' 
                },
                { 
                    id: 7,
                    type: 'image', 
                    src: 'https://iimg.su/i/CVaZCR', 
                    title: 'Коттедж в Ягул', 
                    description: 'Уютный дом с камином' 
                },
                { 
                    id: 8,
                    type: 'image', 
                    src: 'https://iimg.su/i/LW7N9n', 
                    title: 'Вилла в КП Европа', 
                    description: 'Роскошная вилла с бассейном' 
                },
                { 
                    id: 9,
                    type: 'image', 
                    src: 'https://iimg.su/i/AnGMnX', 
                    title: 'Дом в с. Завьялово', 
                    description: 'Традиционный дом с мансардой' 
                },
                { 
                    id: 10,
                    type: 'image', 
                    src: 'https://iimg.su/i/qedUTi', 
                    title: 'Особняк в КП Новое Завьялово', 
                    description: 'Современный дом с террасой на крыше' 
                },
                { 
                    id: 11,
                    type: 'image', 
                    src: 'https://iimg.su/i/0GqLtj', 
                    title: 'Дом в КП Норвег', 
                    description: 'Скандинавский стиль с натуральным деревом' 
                },
                { 
                    id: 12,
                    type: 'image', 
                    src: 'https://iimg.su/i/Tn4nA1', 
                    title: 'Резиденция в КП Архитекторов', 
                    description: 'Авторский проект с необычными формами' 
                },
                { 
                    id: 13,
                    type: 'image', 
                    src: 'https://iimg.su/i/cPCZXU', 
                    title: 'Комплекс в КП Чистопрудный', 
                    description: 'Экологичное строительство с панорамными окнами' 
                },
                { 
                    id: 14,
                    type: 'image', 
                    src: 'https://iimg.su/i/tqMLBt', 
                    title: 'Таунхаус в КП Новые пазелы', 
                    description: 'Современный комплекс с общей территорией' 
                },
                { 
                    id: 15,
                    type: 'image', 
                    src: 'https://iimg.su/i/yBaIMM', 
                    title: 'Коттедж в КП Чекирил', 
                    description: 'Дом в стиле минимализм с большими окнами' 
                },
                { 
                    id: 16,
                    type: 'image', 
                    src: 'https://iimg.su/i/WtesQR', 
                    title: 'Особняк в КП Орловское 5', 
                    description: 'Роскошный дом с зимним садом' 
                },
                { 
                    id: 17,
                    type: 'image', 
                    src: 'https://iimg.su/i/qOStz4', 
                    title: 'Дом в Старый Игерман', 
                    description: 'Традиционный дом с камином и верандой' 
                },
                { 
                    id: 18,
                    type: 'image', 
                    src: 'https://iimg.su/i/Srt7uB', 
                    title: 'Коттедж в Юровские дачи', 
                    description: 'Современный дом с панорамным остеклением' 
                },
                { 
                    id: 19,
                    type: 'image', 
                    src: 'https://iimg.su/i/FJugHo', 
                    title: 'Вилла в Западный Квартал', 
                    description: 'Эксклюзивный проект с бассейном и сауной' 
                }
            ],
            promotions: [
                {
                    id: 1,
                    badge: "Скидка 20%",
                    image: "https://iimg.su/i/t7o2z2",
                    title: "Скидка на баню или гараж",
                    description: "При строительстве дома на вашем участке получите скидку 20% на строительство бани или гаража!"
                },
                {
                    id: 2,
                    badge: "Бесплатно",
                    image: "https://iimg.su/i/uHUgY2",
                    title: "Расчет сметы в подарок",
                    description: "При заключении договора на строительство дома получите бесплатный расчет сметы!"
                }
            ],
            houses: [
                {
                    id: 1,
                    name: "Дом 'Солнечный'",
                    stage: "Готов",
                    price: "3 500 000 руб",
                    area: "120 кв.м.",
                    description: "Просторный двухэтажный дом с террасой и гаражом",
                    image: "https://iimg.su/i/VN6aIZ"
                },
                {
                    id: 2,
                    name: "Дом 'Лесной'",
                    stage: "Отделка",
                    price: "2 800 000 руб",
                    area: "90 кв.м.",
                    description: "Уютный одноэтажный дом в стиле шале",
                    image: "https://iimg.su/i/Vff0GZ"
                }
            ],
            header: {
                logo: "https://iimg.su/i/zFDqsM",
                slogan: "Качественные решения для вашего комфорта",
                bgImage: "https://iimg.su/i/zFDqsM",
                opacity: 0.15,
                logoPosition: "center",
                sloganPosition: "bottom",
                banner: ""
            },
            telegram: {
                botToken: "7895837790:AAGcCjxt1m1PX1QxCLNcqwoY0Q9PC_vMXWk",
                chatId: "1240604782"
            },
            emailjs: {
                serviceId: "gmail_service",
                templateId: "template_l4bhp9h",
                userId: "0Y5XcvC3vwg6QPzZm"
            },
            vkIntegration: {
                groupId: "147735588",
                token: "vk1.a.IwkgUcjTjAyieE9j1BvOmTISVAa0O1zL5qpgDkP4U2_pZ2M8H-besZ3ViANyMvw1MrJgDfVCySbBpK59FotPksqIu5mkJwru9_hw6eqikiX35f9uyu0UXrw-FSapGbEoni2DSlGWDLk-QkMEeeohhlOe7Khc0rKy2EydG0Ffbbtvx48iyEfVLBXmZWrwlJITvXBsU6Vw-7_ZZvlzYkq3mQ",
                count: 5
            },
            editingGalleryId: null,
            editingNewsId: null,
            editingHouseId: null,
            editingReviewId: null
        };

        // Часть 2: Генерация отзывов
        const settlements = [
            "КП Тихие зори", "КП Орловское", "КП Екатериненский", 
            "КП Ближняя усадьба", "КП Славянский", "д. Старомихайловское", 
            "Ягул", "КП Европа", "с. Завьялово", "КП Новое Завьялово", 
            "КП Норвег", "КП Архитекторов", "КП Чистопрудный", 
            "КП Новые пазелы", "КП Чекирил", "КП Орловское 5", 
            "Старый Игерман", "Юровские дачи", "Западный Квартал"
        ];
        
        const names = [
            "Иван Иванов", "Мария Петрова", "Алексей Смирнов", "Екатерина Васильева", 
            "Дмитрий Кузнецов", "Ольга Новикова", "Сергей Волков", "Анна Козлова", 
            "Андрей Соколов", "Наталья Морозова", "Павел Павлов", "Елена Лебедева", 
            "Михаил Орлов", "Татьяна Алексеева", "Николай Николаев", "Юлия Захарова", 
            "Артем Степанов", "Ирина Виноградова", "Александр Богданов", "Светлана Романова"
        ];
        
        const reviewsText = [
            "Строили дом в {settlement}. Все очень понравилось! Качество работ на высшем уровне, сроки соблюдены.",
            "Заказывали строительство дома в {settlement}. Работали оперативно, учли все пожелания. Рекомендую!",
            "Построили двухэтажный дом в {settlement}. Качеством довольны, небольшие недочеты исправили быстро.",
            "Строительство дома под ключ в {settlement}. Цена/качество отличные, бригада работала профессионально.",
            "Обратились в АГстрой для строительства дома в {settlement}. Остались довольны результатом, все по договору.",
            "Строили дом в {settlement}. Процесс контролировали на каждом этапе, результат превзошел ожидания.",
            "Заказывали строительство коттеджа в {settlement}. Сделали все качественно, но были небольшие задержки.",
            "Дом в {settlement} построен отлично! Учтены все нюансы, использованы качественные материалы.",
            "Строительство в {settlement} завершили раньше срока. Качество на высоте, рекомендую компанию.",
            "Доверили строительство дома в {settlement}. Работы выполнены качественно, но пришлось вносить дополнительные правки.",
            "Отличная работа в {settlement}! Дом построен крепко, все коммуникации продуманы до мелочей.",
            "Строили дом в {settlement}. В целом доволен, но были проблемы с поставкой материалов.",
            "Заказывали строительство под ключ в {settlement}. Профессиональный подход, качественные материалы, довольны результатом.",
            "Дом в {settlement} построен на совесть. Спасибо бригаде за внимательное отношение к деталям.",
            "Строительство в {settlement} завершили с небольшим опозданием, но качество работ отличное.",
            "Доволен результатом в {settlement}. Дом теплый, крепкий, все по современным стандартам.",
            "Работали с АГстрой в {settlement}. Проект реализован на 100%, но были накладки по срокам.",
            "Строили дом в {settlement}. Отличное качество, но стоимость вышла немного выше планируемой.",
            "Рекомендую компанию! Дом в {settlement} построен качественно, все этапы контролировали.",
            "Доволен сотрудничеством в {settlement}. Профессиональная команда, качественные материалы."
        ];
        
        const photoLinks = [
            "https://iimg.su/i/GpneAr", "https://iimg.su/i/ChcuRI", "https://iimg.su/i/UhVOZ3", 
            "https://iimg.su/i/kkG61s", "https://iimg.su/i/Yob7eP", "https://iimg.su/i/XAsEsW", 
            "https://iimg.su/i/CVaZCR", "https://iimg.su/i/LW7N9n", "https://iimg.su/i/AnGMnX", 
            "https://iimg.su/i/qedUTi", "https://iimg.su/i/0GqLtj", "https://iimg.su/i/Tn4nA1", 
            "https://iimg.su/i/cPCZXU", "https://iimg.su/i/tqMLBt", "https://iimg.su/i/yBaIMM", 
            "https://iimg.su/i/WtesQR", "https://iimg.su/i/qOStz4", "https://iimg.su/i/Srt7uB", 
            "https://iimg.su/i/FJugHo", "https://iimg.su/i/t7o2z2", "https://iimg.su/i/uHUgY2", 
            "https://iimg.su/i/VN6aIZ", "https://iimg.su/i/Vff0GZ", "https://iimg.su/i/BVP9Ub", 
            "https://iimg.su/i/AViSkD", "https://iimg.su/i/RNsw14", "https://iimg.su/i/1lIV9F", 
            "https://iimg.su/i/FZrfGo", "https://iimg.su/i/nQzW66", "https://iimg.su/i/pZFqsp", 
            "https://iimg.su/i/gCM6tO", "https://iimg.su/i/6qBaav", "https://iimg.su/i/RnORVo", 
            "https://iimg.su/i/ZPebb7", "https://iimg.su/i/ZieK5F", "https://iimg.su/i/g1zUud", 
            "https://iimg.su/i/7P2YpH", "https://iimg.su/i/i7vq8a", "https://iimg.su/i/hYxEQt", 
            "https://iimg.su/i/OY9uBQ", "https://iimg.su/i/A65zjV", "https://iimg.su/i/gy1Ukh", 
            "https://iimg.su/i/4nG2Cd", "https://iimg.su/i/xUmMTh", "https://iimg.su/i/SfQ4qT"
        ];
        
        // Генерация 36 отзывов
        for (let i = 0; i < 36; i++) {
            const settlement = settlements[Math.floor(Math.random() * settlements.length)];
            const name = names[Math.floor(Math.random() * names.length)];
            const text = reviewsText[Math.floor(Math.random() * reviewsText.length)].replace("{settlement}", settlement);
            
            // Генерация даты (последние 2 года)
            const randomDate = new Date();
            randomDate.setMonth(randomDate.getMonth() - Math.floor(Math.random() * 24));
            const dateStr = randomDate.toISOString().split('T')[0];
            
            // Генерация рейтинга (в основном 4 и 5)
            const rating = Math.random() > 0.8 ? 3 : Math.random() > 0.3 ? 4 : 5;
            
            // Генерация фотографий (в 60% отзывов)
            const photos = [];
            if (Math.random() > 0.4) {
                const photoCount = Math.floor(Math.random() * 3) + 1;
                for (let j = 0; j < photoCount; j++) {
                    photos.push(photoLinks[Math.floor(Math.random() * photoLinks.length)]);
                }
            }
            
            state.reviews.push({
                id: i + 1,
                author: name,
                text: text,
                date: dateStr,
                rating: rating,
                approved: true,
                photo: "",
                photos: photos
            });
        }

        // Часть 3: Основные функции приложения
        function saveState() {
            localStorage.setItem('agstroyState', JSON.stringify(state));
        }
        
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('ru-RU', options);
        }
        
        function renderStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += i <= rating 
                    ? '<i class="fas fa-star"></i>' 
                    : '<i class="far fa-star"></i>';
            }
            return stars;
        }
        
        function renderAdvantages() {
            const container = document.getElementById('advantagesContainer');
            container.innerHTML = '';
            
            state.advantages.forEach(item => {
                const advantageItem = document.createElement('div');
                advantageItem.className = 'advantage-item';
                advantageItem.innerHTML = `
                    <div class="advantage-icon">
                        <i class="${item.icon}"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>${item.title}</h3>
                        <p>${item.text}</p>
                    </div>
                `;
                container.appendChild(advantageItem);
            });
        }

        function renderWorkSteps() {
            const container = document.getElementById('workSteps');
            container.innerHTML = '';
            
            state.workSteps.forEach(step => {
                const stepElement = document.createElement('div');
                stepElement.className = 'work-step';
                stepElement.innerHTML = `
                    <div class="step-number">${step.step}</div>
                    <div class="step-icon"><i class="${step.icon}"></i></div>
                    <h3>${step.title}</h3>
                    <div class="work-content">${step.content}</div>
                `;
                container.appendChild(stepElement);
            });
        }

        function renderGallery() {
            const container = document.getElementById('galleryContainer');
            container.innerHTML = '';
            
            state.gallery.forEach(item => {
                let galleryItem;
                
                if (item.type === 'image') {
                    galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item';
                    galleryItem.innerHTML = `
                        <img src="${item.src}" alt="${item.title}">
                        <div class="overlay">
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        </div>
                    `;
                } else {
                    galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item video-item';
                    galleryItem.innerHTML = `
                        <iframe src="${item.src}" title="${item.title}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        <div class="video-label">ВИДЕО</div>
                        <div class="overlay">
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        </div>
                    `;
                }
                
                container.appendChild(galleryItem);
            });
        }

        function renderReviews() {
            const container = document.getElementById('reviewsContainer');
            container.innerHTML = '';
            
            state.reviews.filter(r => r.approved).forEach(review => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                let avatarContent;
                if (review.photo) {
                    avatarContent = `<img src="${review.photo}" alt="${review.author}" class="review-avatar-img">`;
                } else {
                    avatarContent = `<div class="review-avatar">${review.author.charAt(0)}</div>`;
                }
                
                let photosContent = '';
                if (review.photos && review.photos.length > 0) {
                    photosContent = '<div class="review-photo-grid">';
                    review.photos.forEach(photo => {
                        photosContent += `
                            <div class="review-photo-item">
                                <img src="${photo}" alt="Фото от ${review.author}">
                            </div>
                        `;
                    });
                    photosContent += '</div>';
                }
                
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="review-avatar">
                            ${avatarContent}
                        </div>
                        <div>
                            <div class="review-author">${review.author}</div>
                            <div class="review-date">${formatDate(review.date)}</div>
                        </div>
                    </div>
                    <div class="review-rating">${renderStars(review.rating)}</div>
                    <div class="review-content">${review.text}</div>
                    ${photosContent}
                `;
                container.appendChild(reviewItem);
            });
        }

        function renderPromotions() {
            const container = document.getElementById('promotionsContainer');
            container.innerHTML = '';
            
            state.promotions.forEach(promo => {
                const promoCard = document.createElement('div');
                promoCard.className = 'promotion-card';
                promoCard.innerHTML = `
                    <div class="promotion-badge">${promo.badge}</div>
                    <div class="promotion-image">
                        <img src="${promo.image}" alt="${promo.title}">
                    </div>
                    <div class="promotion-content">
                        <h3 class="promotion-title">${promo.title}</h3>
                        <p class="promotion-desc">${promo.description}</p>
                    </div>
                `;
                container.appendChild(promoCard);
            });
        }

        function renderHouses() {
            const container = document.getElementById('housesGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            state.houses.forEach(house => {
                const houseCard = document.createElement('div');
                houseCard.className = 'house-card';
                houseCard.innerHTML = `
                    <div class="house-image">
                        <img src="${house.image}" alt="${house.name}">
                    </div>
                    <div class="house-info">
                        <div class="house-title">${house.name}</div>
                        <div class="house-meta">
                            <span>${house.stage}</span>
                            <span>${house.area} кв.м.</span>
                        </div>
                        <div class="house-price">${house.price}</div>
                        <button class="select-house-btn" data-id="${house.id}">Выбрать</button>
                    </div>
                `;
                container.appendChild(houseCard);
            });
        }

        function updateHeader() {
            document.getElementById('headerSlogan').textContent = state.header.slogan;
            document.getElementById('mainHero').style.backgroundImage = `linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url(${state.header.bgImage})`;
            document.getElementById('bgOverlay').style.opacity = state.header.opacity;
            
            const logoContainer = document.getElementById('logoContainer');
            logoContainer.className = 'logo-container';
            
            logoContainer.classList.remove('logo-left', 'logo-right', 'slogan-top', 'slogan-left', 'slogan-right');
            
            if (state.header.logoPosition === 'left') {
                logoContainer.classList.add('logo-left');
            } else if (state.header.logoPosition === 'right') {
                logoContainer.classList.add('logo-right');
            }
            
            if (state.header.sloganPosition === 'top') {
                logoContainer.classList.add('slogan-top');
            } else if (state.header.sloganPosition === 'left') {
                logoContainer.classList.add('slogan-left');
            } else if (state.header.sloganPosition === 'right') {
                logoContainer.classList.add('slogan-right');
            }
            
            const header = document.getElementById('siteHeader');
            if (state.header.banner) {
                header.classList.add('header-with-banner');
                let banner = document.getElementById('headerBanner');
                if (!banner) {
                    banner = document.createElement('img');
                    banner.id = 'headerBanner';
                    banner.className = 'header-banner';
                    header.prepend(banner);
                }
                banner.src = state.header.banner;
            } else {
                header.classList.remove('header-with-banner');
                const banner = document.getElementById('headerBanner');
                if (banner) banner.remove();
            }
        }

        function setupEventListeners() {
            document.querySelectorAll('.to-top-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
            
            const ratingInput = document.getElementById('ratingInput');
            ratingInput.querySelectorAll('i').forEach(star => {
                star.addEventListener('click', function() {
                    const value = parseInt(this.getAttribute('data-value'));
                    ratingInput.querySelectorAll('i').forEach((s, i) => {
                        if (i < value) {
                            s.classList.remove('far');
                            s.classList.add('fas', 'active');
                        } else {
                            s.classList.remove('fas', 'active');
                            s.classList.add('far');
                        }
                    });
                });
            });
            
            const photoUpload = document.getElementById('photoUpload');
            const uploadBtn = document.querySelector('.upload-btn');
            const photoPreview = document.getElementById('photoPreview');
            
            uploadBtn.addEventListener('click', function(e) {
                if (e.target !== photoUpload) {
                    photoUpload.click();
                }
            });
            
            photoUpload.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        photoPreview.src = e.target.result;
                        photoPreview.style.display = 'block';
                    }
                    
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            const reviewForm = document.getElementById('reviewForm');
            reviewForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('reviewName').value;
                const email = document.getElementById('reviewEmail').value;
                const text = document.getElementById('reviewText').value;
                const rating = document.querySelectorAll('#ratingInput .active').length;
                const photoFile = photoUpload.files[0];
                
                if (!name || !email || !text || rating === 0) {
                    alert('Пожалуйста, заполните все обязательные поля и поставьте оценку');
                    return;
                }
                
                const progressBar = document.getElementById('progressBar');
                const uploadProgress = document.getElementById('uploadProgress');
                uploadProgress.style.display = 'block';
                
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        
                        const photoUrl = photoFile 
                            ? `https://agstroy.ru/uploads/${Date.now()}_${photoFile.name}` 
                            : '';
                        
                        const additionalPhotos = [];
                        if (photoFile) {
                            for (let i = 0; i < 3; i++) {
                                additionalPhotos.push(`https://agstroy.ru/uploads/${Date.now()}_${i}_${photoFile.name}`);
                            }
                        }
                        
                        const newReview = {
                            id: Date.now(),
                            author: name,
                            text: text,
                            date: new Date().toISOString().split('T')[0],
                            rating: rating,
                            approved: false,
                            photo: photoUrl,
                            photos: additionalPhotos
                        };
                        
                        state.reviews.push(newReview);
                        saveState();
                        alert('Ваш отзыв отправлен на модерацию. Спасибо!');
                        reviewForm.reset();
                        
                        photoPreview.style.display = 'none';
                        uploadProgress.style.display = 'none';
                        progressBar.style.width = '0%';
                        
                        ratingInput.querySelectorAll('i').forEach(star => {
                            star.classList.remove('fas', 'active');
                            star.classList.add('far');
                        });
                        
                        sendApplication({
                            name: name,
                            email: email,
                            rating: rating,
                            message: text
                        }, 'review-form');
                    }
                }, 100);
            });
            
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.addEventListener('click', function() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                if (username === "admin" && password === "agstroy2023") {
                    state.isLoggedIn = true;
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('adminPanel').classList.add('active');
                    document.getElementById('loginMessage').textContent = '';
                    saveState();
                } else {
                    document.getElementById('loginMessage').textContent = 'Неверный логин или пароль!';
                }
            });
            
            const logoutBtn = document.getElementById('logoutBtn');
            logoutBtn.addEventListener('click', function() {
                state.isLoggedIn = false;
                document.getElementById('adminPanel').classList.remove('active');
                saveState();
            });
            
            const adminToggle = document.getElementById('adminToggle');
            adminToggle.addEventListener('click', function(e) {
                e.preventDefault();
                
                if (state.isLoggedIn) {
                    document.getElementById('adminPanel').classList.toggle('active');
                } else {
                    document.getElementById('loginForm').style.display = 'block';
                    window.scrollTo(0, document.body.scrollHeight);
                }
            });
            
            document.getElementById('floatingTourBtn').addEventListener('click', function() {
                document.getElementById('tourModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            document.getElementById('floatingBuildBtn').addEventListener('click', function() {
                document.getElementById('buildHouseModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            document.getElementById('floatingBuyBtn').addEventListener('click', function() {
                document.getElementById('buyHouseModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
        }
        
        function setupModals() {
            const buyHouseBtn = document.getElementById('buyHouseBtn');
            const buildHouseBtn = document.getElementById('buildHouseBtn');
            const tourBtn = document.getElementById('tourBtn');
            
            const buyHouseModal = document.getElementById('buyHouseModal');
            const buildHouseModal = document.getElementById('buildHouseModal');
            const tourModal = document.getElementById('tourModal');
            
            const closeButtons = document.querySelectorAll('.close-modal');
            
            buyHouseBtn.addEventListener('click', function() {
                buyHouseModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            buildHouseBtn.addEventListener('click', function() {
                buildHouseModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            tourBtn.addEventListener('click', function() {
                tourModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    buyHouseModal.style.display = 'none';
                    buildHouseModal.style.display = 'none';
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    
                    document.getElementById('selectedHouseForm').style.display = 'none';
                    document.querySelectorAll('.house-card').forEach(card => {
                        card.style.display = 'block';
                    });
                });
            });
            
            window.addEventListener('click', function(event) {
                if (event.target === buyHouseModal) {
                    buyHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
                if (event.target === buildHouseModal) {
                    buildHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
                if (event.target === tourModal) {
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            document.querySelectorAll('.select-house-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const houseId = this.getAttribute('data-id');
                    const house = state.houses.find(h => h.id == houseId);
                    
                    document.querySelectorAll('.house-card').forEach(card => {
                        card.style.display = 'none';
                    });
                    
                    document.getElementById('selectedHouseForm').style.display = 'block';
                    
                    document.querySelector('#selectedHouseForm h4').innerHTML = 
                        `Заявка на покупку дома: <span style="color: var(--accent);">${house.name}</span>`;
                    
                    if (!document.getElementById('selectedHouseId')) {
                        const input = document.createElement('input');
                        input.type = 'hidden';
                        input.id = 'selectedHouseId';
                        input.name = 'houseId';
                        input.value = houseId;
                        document.getElementById('buyHouseForm').appendChild(input);
                    } else {
                        document.getElementById('selectedHouseId').value = houseId;
                    }
                });
            });
            
            document.getElementById('buyHouseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('buyerName').value,
                    phone: document.getElementById('buyerPhone').value,
                    email: document.getElementById('buyerEmail').value,
                    message: document.getElementById('buyerMessage').value,
                    houseId: document.getElementById('selectedHouseId').value
                };
                
                sendApplication(formData, 'buy-house');
                
                document.getElementById('buySuccessMessage').style.display = 'block';
                
                setTimeout(() => {
                    buyHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('buySuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
            
            document.getElementById('buildHouseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('clientName').value,
                    phone: document.getElementById('clientPhone').value,
                    email: document.getElementById('clientEmail').value,
                    location: document.getElementById('clientLocation').value,
                    area: document.getElementById('houseArea').value,
                    type: document.getElementById('houseType').value,
                    budget: document.getElementById('clientBudget').value,
                    wishes: document.getElementById('clientWishes').value
                };
                
                sendApplication(formData, 'build-house');
                
                document.getElementById('buildSuccessMessage').style.display = 'block';
                
                setTimeout(() => {
                    buildHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('buildSuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
            
            document.getElementById('tourForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('tourName').value,
                    phone: document.getElementById('tourPhone').value,
                    email: document.getElementById('tourEmail').value,
                    date: document.getElementById('tourDate').value,
                    object: document.getElementById('tourObject').value,
                    participants: document.getElementById('tourParticipants').value,
                    comments: document.getElementById('tourComments').value
                };
                
                sendApplication(formData, 'tour');
                
                document.getElementById('tourSuccessMessage').style.display = 'block';
                
                setTimeout(() => {
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('tourSuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
        }
        
        function sendApplication(data, type) {
            console.log(`Отправка заявки типа: ${type}`, data);
            
            const fieldNames = {
                name: 'Имя',
                phone: 'Телефон',
                email: 'Email',
                message: 'Сообщение',
                houseId: 'ID дома',
                houseName: 'Выбранный дом',
                location: 'Местоположение участка',
                area: 'Площадь дома',
                type: 'Тип дома',
                budget: 'Бюджет',
                wishes: 'Пожелания',
                date: 'Дата экскурсии',
                object: 'Объект экскурсии',
                participants: 'Количество участников',
                comments: 'Комментарии',
                rating: 'Оценка'
            };
            
            if (state.telegram.botToken && state.telegram.chatId) {
                sendToTelegram(data, type, fieldNames);
            }
            
            if (state.emailjs.serviceId && state.emailjs.templateId && state.emailjs.userId) {
                sendToEmail(data, type);
            }
        }
        
        async function sendToTelegram(data, type, fieldNames) {
            const formTypes = {
                'buy-house': 'Покупка дома',
                'build-house': 'Постройка дома',
                'tour': 'Экскурсия',
                'review-form': 'Отзыв'
            };
            
            let message = `*Новая заявка (${formTypes[type] || type})*\n`;
            
            for (const [key, value] of Object.entries(data)) {
                if (fieldNames[key]) {
                    message += `*${fieldNames[key]}*: ${value}\n`;
                }
            }
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${state.telegram.botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: state.telegram.chatId,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                
                if (!response.ok) {
                    console.error('Ошибка отправки в Telegram:', await response.text());
                }
            } catch (error) {
                console.error('Ошибка отправки в Telegram:', error);
            }
        }
        
        function sendToEmail(data, type) {
            const formTypes = {
                'buy-house': 'Покупка дома',
                'build-house': 'Постройка дома',
                'tour': 'Экскурсия',
                'review-form': 'Отзыв'
            };
            
            const emailData = {
                form_type: formTypes[type] || type,
                ...data
            };
            
            emailjs.send(state.emailjs.serviceId, state.emailjs.templateId, emailData)
                .then(response => console.log('Email отправлен!', response.status, response.text))
                .catch(error => console.error('Ошибка отправки email:', error));
        }
        
        function setupAdminPanel() {
            document.getElementById('bgOpacity').addEventListener('input', function() {
                const opacityValue = (this.value * 100).toFixed(0);
                document.getElementById('opacityValue').textContent = opacityValue + '%';
                state.header.opacity = parseFloat(this.value);
                updateHeader();
            });
            
            document.getElementById('logoPosition').value = state.header.logoPosition;
            document.getElementById('sloganPosition').value = state.header.sloganPosition;
            
            document.getElementById('saveHeaderBtn').addEventListener('click', function() {
                state.header.slogan = document.getElementById('headerSloganInput').value;
                state.header.logoPosition = document.getElementById('logoPosition').value;
                state.header.sloganPosition = document.getElementById('sloganPosition').value;
                
                updateHeader();
                saveState();
                alert('Изменения шапки сайта сохранены!');
            });
            
            document.getElementById('bgUploadBtn').addEventListener('click', function() {
                document.getElementById('headerBg').click();
            });
            
            document.getElementById('headerBg').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('headerBgPreview').src = e.target.result;
                        document.getElementById('headerBgPreview').style.display = 'block';
                        state.header.bgImage = e.target.result;
                        updateHeader();
                        saveState();
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('bannerUploadBtn').addEventListener('click', function() {
                document.getElementById('bannerUpload').click();
            });
            
            document.getElementById('bannerUpload').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('bannerPreview').src = e.target.result;
                        document.getElementById('bannerPreview').style.display = 'block';
                        state.header.banner = e.target.result;
                        updateHeader();
                        saveState();
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addAdvantageBtn').addEventListener('click', function() {
                const icon = document.getElementById('advantageIcon').value;
                const title = document.getElementById('advantageTitle').value;
                const text = document.getElementById('advantageText').value;
                
                if (!icon || !title || !text) {
                    alert('Пожалуйста, заполните все поля');
                    return;
                }
                
                const newAdvantage = {
                    id: Date.now(),
                    icon: icon,
                    title: title,
                    text: text
                };
                
                state.advantages.push(newAdvantage);
                renderAdvantages();
                renderAdminAdvantages();
                saveState();
                
                document.getElementById('advantageIcon').value = '';
                document.getElementById('advantageTitle').value = '';
                document.getElementById('advantageText').value = '';
            });
            
            function renderAdminAdvantages() {
                const container = document.getElementById('advantagesManager');
                container.innerHTML = '';
                
                state.advantages.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'admin-editor';
                    itemElement.innerHTML = `
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Иконка</label>
                                <input type="text" class="editor-control" value="${item.icon}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Заголовок</label>
                                <input type="text" class="editor-control" value="${item.title}" disabled>
                            </div>
                        </div>
                        <div class="editor-group">
                            <label>Текст</label>
                            <textarea class="editor-control" disabled>${item.text}</textarea>
                        </div>
                        <button class="btn btn-danger" data-id="${item.id}">Удалить</button>
                    `;
                    container.appendChild(itemElement);
                    
                    itemElement.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.advantages = state.advantages.filter(a => a.id !== id);
                        renderAdminAdvantages();
                        renderAdvantages();
                        saveState();
                    });
                });
            }
            
            document.getElementById('addStepBtn').addEventListener('click', function() {
                const step = parseInt(document.getElementById('stepNumber').value);
                const title = document.getElementById('stepTitle').value;
                const icon = document.getElementById('stepIcon').value;
                const content = document.getElementById('stepContent').value;
                
                if (!step || !title || !icon || !content) {
                    alert('Пожалуйста, заполните все поля');
                    return;
                }
                
                const newStep = {
                    id: Date.now(),
                    step: step,
                    title: title,
                    icon: icon,
                    content: content
                };
                
                state.workSteps.push(newStep);
                renderWorkSteps();
                renderAdminSteps();
                saveState();
                
                document.getElementById('stepNumber').value = '';
                document.getElementById('stepTitle').value = '';
                document.getElementById('stepIcon').value = '';
                document.getElementById('stepContent').value = '';
            });
            
            function renderAdminSteps() {
                const container = document.getElementById('stepsManager');
                container.innerHTML = '';
                
                state.workSteps.forEach(step => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'admin-editor';
                    itemElement.innerHTML = `
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Номер шага</label>
                                <input type="number" class="editor-control" value="${step.step}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Заголовок</label>
                                <input type="text" class="editor-control" value="${step.title}" disabled>
                            </div>
                        </div>
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Иконка</label>
                                <input type="text" class="editor-control" value="${step.icon}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Описание</label>
                                <textarea class="editor-control" disabled>${step.content}</textarea>
                            </div>
                        </div>
                        <button class="btn btn-danger" data-id="${step.id}">Удалить</button>
                    `;
                    container.appendChild(itemElement);
                    
                    itemElement.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.workSteps = state.workSteps.filter(s => s.id !== id);
                        renderAdminSteps();
                        renderWorkSteps();
                        saveState();
                    });
                });
            }
            
            document.getElementById('galleryUploadBtn').addEventListener('click', function() {
                document.getElementById('gallerySource').click();
            });
            
            document.getElementById('gallerySource').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('galleryPreview').src = e.target.result;
                        document.getElementById('galleryPreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addGalleryItemBtn').addEventListener('click', function() {
                const type = document.getElementById('galleryType').value;
                const title = document.getElementById('galleryTitle').value;
                const description = document.getElementById('galleryDesc').value;
                const file = document.getElementById('gallerySource').files[0];
                
                if (!file || !title || !description) {
                    alert('Пожалуйста, заполните все поля и загрузите изображение');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newItem = {
                        id: state.editingGalleryId || Date.now(),
                        type: type,
                        src: e.target.result,
                        title: title,
                        description: description
                    };
                    
                    if (state.editingGalleryId) {
                        const index = state.gallery.findIndex(item => item.id === state.editingGalleryId);
                        if (index !== -1) {
                            state.gallery[index] = newItem;
                        }
                        state.editingGalleryId = null;
                        document.getElementById('addGalleryItemBtn').textContent = 'Добавить в галерею';
                    } else {
                        state.gallery.push(newItem);
                    }
                    
                    renderGallery();
                    renderAdminGallery();
                    saveState();
                    
                    document.getElementById('galleryTitle').value = '';
                    document.getElementById('galleryDesc').value = '';
                    document.getElementById('galleryPreview').style.display = 'none';
                    document.getElementById('gallerySource').value = '';
                }
                reader.readAsDataURL(file);
            });
            
            function renderAdminGallery() {
                const container = document.getElementById('galleryManager');
                container.innerHTML = '';
                
                state.gallery.forEach(item => {
                    const preview = document.createElement('div');
                    preview.className = 'gallery-preview';
                    
                    if (item.type === 'image') {
                        preview.innerHTML = `
                            <img src="${item.src}" alt="${item.title}">
                            <div class="item-actions">
                                <div class="action-btn edit-action edit-gallery" data-id="${item.id}">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-btn delete-action delete-gallery" data-id="${item.id}">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        `;
                    } else {
                        preview.innerHTML = `
                            <i class="fas fa-video" style="font-size: 2rem;"></i>
                            <div class="item-actions">
                                <div class="action-btn edit-action edit-gallery" data-id="${item.id}">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-btn delete-action delete-gallery" data-id="${item.id}">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        `;
                    }
                    
                    container.appendChild(preview);
                    
                    preview.querySelector('.edit-gallery').addEventListener('click', function(e) {
                        e.stopPropagation();
                        const id = parseInt(this.getAttribute('data-id'));
                        const item = state.gallery.find(g => g.id === id);
                        
                        if (item) {
                            state.editingGalleryId = id;
                            document.getElementById('galleryType').value = item.type;
                            document.getElementById('galleryTitle').value = item.title;
                            document.getElementById('galleryDesc').value = item.description;
                            document.getElementById('galleryPreview').src = item.src;
                            document.getElementById('galleryPreview').style.display = 'block';
                            document.getElementById('addGalleryItemBtn').textContent = 'Обновить элемент';
                            
                            document.getElementById('galleryType').scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                    
                    preview.querySelector('.delete-gallery').addEventListener('click', function(e) {
                        e.stopPropagation();
                        const id = parseInt(this.getAttribute('data-id'));
                        state.gallery = state.gallery.filter(g => g.id !== id);
                        renderAdminGallery();
                        renderGallery();
                        saveState();
                    });
                });
            }
            
            document.getElementById('houseUploadBtn').addEventListener('click', function() {
                document.getElementById('houseImage').click();
            });
            
            document.getElementById('houseImage').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('housePreview').src = e.target.result;
                        document.getElementById('housePreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addHouseBtn').addEventListener('click', function() {
                const name = document.getElementById('houseName').value;
                const stage = document.getElementById('houseStage').value;
                const price = document.getElementById('housePrice').value;
                const area = document.getElementById('houseArea').value;
                const description = document.getElementById('houseDescription').value;
                const file = document.getElementById('houseImage').files[0];
                
                if (!name || !stage || !price || !area) {
                    alert('Пожалуйста, заполните все обязательные поля');
                    return;
                }
                
                let imageUrl = '';
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imageUrl = e.target.result;
                        saveHouseItem(imageUrl, name, stage, price, area, description);
                    }
                    reader.readAsDataURL(file);
                } else {
                    if (state.editingHouseId) {
                        const existingHouse = state.houses.find(h => h.id === state.editingHouseId);
                        if (existingHouse) {
                            imageUrl = existingHouse.image;
                        }
                    }
                    saveHouseItem(imageUrl, name, stage, price, area, description);
                }
            });
            
            function saveHouseItem(imageUrl, name, stage, price, area, description) {
                const newHouse = {
                    id: state.editingHouseId || Date.now(),
                    name: name,
                    stage: stage,
                    price: price,
                    area: area,
                    description: description,
                    image: imageUrl || 'https://via.placeholder.com/600x400'
                };
                
                if (state.editingHouseId) {
                    const index = state.houses.findIndex(h => h.id === state.editingHouseId);
                    if (index !== -1) {
                        state.houses[index] = newHouse;
                    }
                    state.editingHouseId = null;
                    document.getElementById('addHouseBtn').textContent = 'Добавить дом';
                } else {
                    state.houses.push(newHouse);
                }
                
                renderHouses();
                renderAdminHouses();
                saveState();
                
                document.getElementById('houseName').value = '';
                document.getElementById('houseStage').value = '';
                document.getElementById('housePrice').value = '';
                document.getElementById('houseArea').value = '';
                document.getElementById('houseDescription').value = '';
                document.getElementById('housePreview').style.display = 'none';
                document.getElementById('houseImage').value = '';
            }
            
            function renderAdminHouses() {
                const container = document.getElementById('housesManager');
                container.innerHTML = '';
                
                state.houses.forEach(house => {
                    const houseItem = document.createElement('div');
                    houseItem.className = 'house-manager-item';
                    houseItem.innerHTML = `
                        <div class="house-manager-image">
                            <img src="${house.image}" alt="${house.name}">
                            <div class="item-actions">
                                <div class="action-btn edit-action edit-house" data-id="${house.id}">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-btn delete-action delete-house" data-id="${house.id}">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        </div>
                        <div class="house-manager-info">
                            <div class="house-manager-title">${house.name}</div>
                            <p>${house.stage}, ${house.area} кв.м.</p>
                            <p>${house.price}</p>
                        </div>
                    `;
                    container.appendChild(houseItem);
                    
                    houseItem.querySelector('.edit-house').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        const house = state.houses.find(h => h.id === id);
                        
                        if (house) {
                            state.editingHouseId = id;
                            document.getElementById('houseName').value = house.name;
                            document.getElementById('houseStage').value = house.stage;
                            document.getElementById('housePrice').value = house.price;
                            document.getElementById('houseArea').value = house.area;
                            document.getElementById('houseDescription').value = house.description;
                            document.getElementById('housePreview').src = house.image;
                            document.getElementById('housePreview').style.display = 'block';
                            document.getElementById('addHouseBtn').textContent = 'Обновить дом';
                            
                            document.getElementById('houseName').scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                    
                    houseItem.querySelector('.delete-house').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.houses = state.houses.filter(h => h.id !== id);
                        renderAdminHouses();
                        renderHouses();
                        saveState();
                    });
                });
            }
            
            document.getElementById('saveVkBtn').addEventListener('click', function() {
                state.vkIntegration.groupId = document.getElementById('vkGroupId').value;
                state.vkIntegration.token = document.getElementById('vkToken').value;
                state.vkIntegration.count = parseInt(document.getElementById('vkCount').value);
                saveState();
                alert('Настройки VK сохранены!');
            });
            
            document.getElementById('loadVkBtn').addEventListener('click', function() {
                loadVKNews();
            });
            
            async function loadVKNews() {
                if (!state.vkIntegration.groupId || !state.vkIntegration.token) return;
                
                const loader = document.getElementById('newsLoader');
                loader.style.display = 'block';
                
                try {
                    const proxyUrl = 'https://api.allorigins.win/raw?url=';
                    const apiUrl = `https://api.vk.com/method/wall.get?owner_id=-${state.vkIntegration.groupId}&count=${state.vkIntegration.count}&access_token=${state.vkIntegration.token}&v=5.131`;
                    const url = proxyUrl + encodeURIComponent(apiUrl);
                    
                    const response = await fetch(url);
                    
                    const contentType = response.headers.get('content-type');
                    if (!contentType || !contentType.includes('application/json')) {
                        const text = await response.text();
                        throw new Error(`Ожидался JSON, получен: ${text.substring(0, 100)}...`);
                    }
                    
                    const data = await response.json();
                    
                    if (data.error) {
                        console.error('VK API Error:', data.error);
                        alert('Ошибка VK API: ' + data.error.error_msg);
                        return;
                    }
                    
                    const posts = data.response.items;
                    const vkNews = posts.map(post => {
                        let image = '';
                        if (post.attachments && post.attachments.length > 0) {
                            const photo = post.attachments.find(a => a.type === 'photo');
                            if (photo) {
                                const sizes = photo.photo.sizes;
                                const imageSize = sizes.find(size => size.type === 'x') || sizes[sizes.length - 1];
                                image = imageSize.url;
                            }
                        }
                        
                        return {
                            id: `vk-${post.id}`,
                            title: post.text.split('\n')[0].substring(0, 60) + '...',
                            excerpt: post.text.substring(0, 120) + '...',
                            content: post.text,
                            date: new Date(post.date * 1000).toISOString().split('T')[0],
                            image: image || 'https://via.placeholder.com/800x400'
                        };
                    });
                    
                    // Обновляем state новостей (но у нас удален раздел новостей)
                    // state.news = [...vkNews, ...state.news.filter(n => !n.id.startsWith('vk-'))];
                    // renderNews();
                    saveState();
                    
                } catch (error) {
                    console.error('Failed to load VK news:', error);
                    alert('Ошибка загрузки новостей: ' + error.message);
                } finally {
                    loader.style.display = 'none';
                }
            }
            
            // Инициализация приложения
            document.addEventListener('DOMContentLoaded', function() {
                const savedState = localStorage.getItem('agstroyState');
                if (savedState) {
                    state = JSON.parse(savedState);
                }
                
                if (state.emailjs.userId) {
                    emailjs.init(state.emailjs.userId);
                }
                
                renderAdvantages();
                renderWorkSteps();
                renderGallery();
                renderReviews();
                renderPromotions();
                renderHouses();
                setupEventListeners();
                setupModals();
                setupAdminPanel();
                updateHeader();
                // loadVKNews(); // Убрали загрузку новостей VK
            });
        }
        
        // Инициализация панели администратора
        setupAdminPanel();
    </script>
</body>
</html>