<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АГстрой - Строительная компания</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <style>
        :root {
            --primary: #4fc3f7; /* Голубой */
            --secondary: #29b6f6; /* Более светлый голубой */
            --accent: #e91e63; /* Акцентный цвет (розовый) */
            --light: #1a1a1a; /* Осветленный фон (было #121212) */
            --dark: #e0e0e0; /* Светлый текст */
            --success: #66bb6a;
            --promo: #ffb74d;
            --header-bg: rgba(35, 35, 35, 0.9); /* Осветленный полупрозрачный */
            --card-bg: #222222; /* Осветленный (было #1e1e1e) */
            --border: #3a3a3a; /* Осветленный (было #333) */
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            position: relative;
        }
        
        /* Фоновое изображение */
        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1582407947304-fd86f028f716?auto=format&fit=crop&w=1920') no-repeat center center;
            background-size: cover;
            opacity: 0.15; /* Немного осветлили */
            z-index: -1;
        }
        
        /* Шапка */
        header {
            background: var(--header-bg);
            color: white;
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(5px); /* Эффект матового стекла */
        }
        
        .header-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1rem;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .logo-text {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            text-align: center;
            margin-bottom: 10px;
        }
        
        .slogan {
            font-size: 1.2rem;
            font-weight: 500;
            margin-top: 0.5rem;
            color: rgba(255,255,255,0.9);
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-top: 20px; /* Опустили навигацию ниже */
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        nav a:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            border-color: var(--secondary);
        }
        
        /* Кнопка админ-панели */
        .admin-link {
            position: absolute;
            top: 12px;
            right: 15px;
            color: rgba(255, 255, 255, 0.5);
            transition: all 0.4s ease;
            z-index: 101;
            font-size: 1.2rem;
            text-decoration: none;
        }
        
        .admin-link:hover {
            color: var(--secondary);
            opacity: 1;
            transform: rotate(30deg);
        }
        
        /* Основной контент */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            position: relative;
            z-index: 2;
        }
        
        section {
            margin-bottom: 4rem;
            padding: 3rem 0;
            border-radius: 15px;
            background: var(--card-bg);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            border: 1px solid var(--border);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 1rem;
        }
        
        .section-header h2 {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .section-header p {
            max-width: 800px;
            margin: 0 auto;
            color: #aaa;
            font-size: 1.1rem;
        }
        
        .to-top-btn {
            display: block;
            margin: 3rem auto 0;
            padding: 0.8rem 2rem;
            background: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            max-width: 200px;
        }
        
        .to-top-btn:hover {
            background: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(79, 195, 247, 0.3);
        }
        
        /* Герой-секция */
        .hero {
            text-align: center;
            padding: 4rem 1rem;
            border-radius: 15px;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            position: relative;
            margin-bottom: 2rem;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://images.unsplash.com/photo-1513694203232-719a280e022f?auto=format&fit=crop&w=1200') no-repeat center center;
            background-size: cover;
            border: 1px solid var(--border);
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 2.5rem;
            flex-wrap: wrap;
        }
        
        .hero-btn {
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            text-decoration: none;
        }
        
        .hero-btn-primary {
            background: var(--accent);
            color: white;
            border: 2px solid var(--accent);
        }
        
        .hero-btn-primary:hover {
            background: #c41d58;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(229, 46, 113, 0.3);
        }
        
        .hero-btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }
        
        .hero-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2);
        }
        
        .hero-btn-tour {
            background: var(--promo);
            color: white;
            border: 2px solid var(--promo);
        }
        
        .hero-btn-tour:hover {
            background: #e68a00;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 159, 0, 0.3);
        }
        
        /* Плавающие кнопки */
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 99;
            transition: all 0.3s ease;
        }
        
        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .floating-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.5);
        }
        
        .floating-btn.tour {
            background: var(--promo);
            color: white;
        }
        
        .floating-btn.build {
            background: var(--accent);
            color: white;
        }
        
        .floating-btn.buy {
            background: var(--secondary);
            color: white;
        }
        
        .floating-btn .tooltip {
            position: absolute;
            right: 70px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .floating-btn:hover .tooltip {
            opacity: 1;
        }
        
        /* Преимущества */
        .advantages {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 1.5rem;
        }
        
        .advantage-item {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            padding: 1.5rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: var(--card-bg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid var(--border);
        }
        
        .advantage-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border-color: var(--secondary);
        }
        
        .advantage-icon {
            background: var(--primary);
            color: var(--light);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .advantage-text {
            flex: 1;
        }
        
        .advantage-text h3 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }
        
        /* Галерея работ */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .gallery-item {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            height: 250px;
            cursor: pointer;
            border: 1px solid var(--border);
        }
        
        .gallery-item:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            border-color: var(--secondary);
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }
        
        .gallery-item:hover img {
            transform: scale(1.1);
        }
        
        .gallery-item .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white;
            padding: 1.5rem 1rem 1rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .gallery-item:hover .overlay {
            opacity: 1;
        }
        
        .video-item {
            grid-column: span 2;
            height: 300px;
        }
        
        .video-item iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 12px;
        }
        
        .video-label {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* Секция "Как мы работаем" */
        .work-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .work-step {
            background: var(--light);
            border-radius: 10px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: 1px solid var(--border);
        }
        
        .work-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
            border-color: var(--secondary);
        }
        
        .step-icon {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 1rem;
            background: rgba(79, 195, 247, 0.1);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .work-step:hover .step-icon {
            background: var(--secondary);
            color: white;
            transform: scale(1.1);
        }
        
        .step-number {
            position: absolute;
            top: -20px;
            left: 20px;
            background: var(--secondary);
            color: var(--light);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .work-step h3 {
            color: var(--primary);
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .work-content {
            margin-top: 0.5rem;
            color: #aaa;
        }
        
        /* Новостной раздел */
        .news-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }
        
        .news-item {
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }
        
        .news-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-color: var(--secondary);
        }
        
        .news-image {
            height: 200px;
            overflow: hidden;
        }
        
        .news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .news-item:hover .news-image img {
            transform: scale(1.1);
        }
        
        .news-content {
            padding: 1.5rem;
        }
        
        .news-date {
            color: var(--secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .news-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .news-excerpt {
            color: #aaa;
            margin-bottom: 1.5rem;
        }
        
        .read-more {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Отзывы */
        .reviews-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .review-item {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            border: 1px solid var(--border);
        }
        
        .review-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 1rem;
        }
        
        .review-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--secondary);
            color: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .review-avatar-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }
        
        .review-author {
            font-weight: bold;
            color: var(--primary);
        }
        
        .review-date {
            color: #777;
            font-size: 0.9rem;
        }
        
        .review-rating {
            color: gold;
            margin: 0.5rem 0;
        }
        
        .review-content {
            line-height: 1.6;
            color: #aaa;
        }
        
        .review-status {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #333;
            color: #999;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        .review-status.approved {
            background: #2e7d32;
            color: #66bb6a;
        }
        
        .review-photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .review-photo-item {
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .review-photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Форма отзыва */
        .review-form {
            max-width: 600px;
            margin: 3rem auto 0;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }
        
        .review-form h3 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }
        
        .rating-input {
            display: flex;
            gap: 5px;
            margin-bottom: 1rem;
        }
        
        .rating-input i {
            cursor: pointer;
            font-size: 1.5rem;
            color: #555;
            transition: color 0.2s;
        }
        
        .rating-input i.active {
            color: gold;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: var(--light);
        }
        
        .btn-primary:hover {
            background: var(--primary);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-danger {
            background: #c62828;
            color: white;
        }
        
        .btn-danger:hover {
            background: #b71c1c;
        }
        
        /* Подвал */
        footer {
            background: #1a1a1a;
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 2rem;
            border-top: 1px solid var(--border);
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .footer-section {
            margin-bottom: 1.5rem;
        }
        
        .footer-section h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .contact-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 18px;
            background: rgba(255,255,255,0.1);
        }
        
        .contact-text {
            flex: 1;
            color: #aaa;
        }
        
        .contact-text a {
            color: var(--primary);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .contact-text a:hover {
            color: var(--secondary);
            text-decoration: underline;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 1rem;
        }
        
        .social-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.2);
        }
        
        .vk-icon:hover { background: #4a76a8; }
        .youtube-icon:hover { background: #ff0000; }
        .zen-icon:hover { background: #3d9ae8; }
        .rutube-icon:hover { background: #3f6e99; }
        .whatsapp-icon:hover { background: #25d366; }
        .telegram-icon:hover { background: #0088cc; }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #777;
        }
        
        /* Админ-панель */
        .admin-panel {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
            border: 1px solid var(--border);
        }
        
        .admin-panel.active {
            display: block;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }
        
        .admin-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        
        .admin-section h4 {
            margin-bottom: 1.5rem;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .admin-editor {
            background: #1a1a1a;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }
        
        .editor-row {
            display: flex;
            gap: 15px;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .editor-group {
            flex: 1;
            min-width: 300px;
        }
        
        .editor-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .editor-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        textarea.editor-control {
            min-height: 150px;
        }
        
        .image-preview {
            width: 100%;
            max-height: 200px;
            object-fit: contain;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-top: 1rem;
            display: none;
        }
        
        .gallery-manager {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 1rem;
        }
        
        .gallery-preview {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            height: 150px;
            background: #1a1a1a;
            border: 1px dashed #555;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .gallery-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .gallery-preview .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .upload-area {
            border: 2px dashed #555;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: var(--secondary);
            background: rgba(79, 195, 247, 0.05);
        }
        
        .upload-area i {
            font-size: 3rem;
            color: #555;
            margin-bottom: 1rem;
        }
        
        .login-form {
            max-width: 400px;
            margin: 5rem auto;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }
        
        .login-form h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        /* Секция акций */
        .promotion-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .promotion-card {
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid var(--border);
        }
        
        .promotion-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: var(--secondary);
        }
        
        .promotion-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            z-index: 2;
        }
        
        .promotion-image {
            height: 200px;
            overflow: hidden;
        }
        
        .promotion-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .promotion-card:hover .promotion-image img {
            transform: scale(1.1);
        }
        
        .promotion-content {
            padding: 1.5rem;
        }
        
        .promotion-title {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--promo);
        }
        
        .promotion-desc {
            color: #aaa;
            margin-bottom: 1.5rem;
        }
        
        .promotion-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            border-bottom: 1px dashed var(--primary);
            padding-bottom: 3px;
        }
        
        .promotion-link:hover {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }
        
        /* Модальные окна */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid var(--border);
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--accent);
        }
        
        .modal-title {
            margin-bottom: 1.5rem;
            color: var(--primary);
            text-align: center;
        }
        
        .houses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }
        
        .house-card {
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--card-bg);
        }
        
        .house-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: var(--secondary);
        }
        
        .house-image {
            height: 180px;
            overflow: hidden;
        }
        
        .house-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .house-card:hover .house-image img {
            transform: scale(1.1);
        }
        
        .house-info {
            padding: 1rem;
        }
        
        .house-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .house-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #777;
        }
        
        .house-price {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.2rem;
        }
        
        .select-house-btn {
            width: 100%;
            text-align: center;
            padding: 0.75rem;
            background: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .select-house-btn:hover {
            background: var(--primary);
        }
        
        /* Формы */
        .form-section {
            margin-bottom: 1.5rem;
        }
        
        .form-section h4 {
            margin-bottom: 1rem;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 1rem;
        }
        
        .submit-btn:hover {
            background: #c41d58;
        }
        
        .success-message {
            background: #2e7d32;
            color: #a5d6a7;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            text-align: center;
            display: none;
        }
        
        /* Адаптивность */
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                gap: 0.5rem;
                align-items: center;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                gap: 1rem;
            }
            
            .hero-btn {
                width: 100%;
                justify-content: center;
            }
            
            .video-item {
                grid-column: span 1;
                height: 250px;
            }
            
            .editor-row {
                flex-direction: column;
            }
            
            .editor-group {
                min-width: 100%;
            }
            
            .work-steps {
                grid-template-columns: 1fr;
            }
            
            .advantages {
                grid-template-columns: 1fr;
            }
            
            .news-container {
                grid-template-columns: 1fr;
            }
            
            .reviews-container {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
                gap: 1rem;
            }
            
            .houses-grid {
                grid-template-columns: 1fr;
            }
            
            .promotion-cards {
                grid-template-columns: 1fr;
            }
            
            .floating-buttons {
                bottom: 15px;
                right: 15px;
            }
            
            .floating-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }

        /* Обновленные стили для раздела "О нас" */
        #about .content {
            padding: 0 40px;
            font-size: 1.15rem;
            line-height: 1.8;
            color: #aaa;
        }
        
        #about ul {
            margin: 25px 0;
            padding-left: 20px;
            list-style: none;
        }
        
        #about ul li {
            margin-bottom: 20px;
            padding-left: 40px;
            position: relative;
            font-size: 1.1rem;
        }
        
        #about ul li i {
            position: absolute;
            left: 0;
            top: 3px;
            width: 28px;
            height: 28px;
            background: var(--secondary);
            color: var(--light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        #about .guarantee-box {
            background: rgba(79, 195, 247, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 20px 25px;
            border-radius: 0 8px 8px 0;
            margin: 30px 0;
            font-size: 1.15rem;
            color: #ddd;
        }
        
        /* Стили для загрузки фото в отзывах */
        .photo-upload-container {
            margin: 1.5rem 0;
            text-align: center;
        }
        
        .photo-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--secondary);
            margin: 0 auto 15px;
            display: none;
        }
        
        .upload-btn {
            display: inline-block;
            padding: 10px 20px;
            background: var(--secondary);
            color: var(--light);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            position: relative;
        }
        
        .upload-btn input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .upload-btn:hover {
            background: var(--primary);
        }
        
        .upload-btn i {
            margin-right: 8px;
        }
        
        .upload-progress {
            width: 100%;
            height: 5px;
            background: #333;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .progress-bar {
            height: 100%;
            width: 0%;
            background: var(--accent);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        /* Позиционирование логотипа */
        .logo-left .logo-container {
            justify-content: flex-start;
        }
        
        .logo-right .logo-container {
            justify-content: flex-end;
        }
        
        .slogan-top .slogan {
            order: -1;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }
        
        .slogan-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .slogan-left .slogan {
            margin-top: 0;
        }
        
        .slogan-right {
            display: flex;
            flex-direction: row-reverse;
            align-items: center;
            gap: 20px;
        }
        
        .slogan-right .slogan {
            margin-top: 0;
        }
        
        /* Баннер шапки */
        .header-banner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
        }
        
        .header-with-banner {
            background: rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }
        
        /* Загрузчик */
        .loader {
            border: 4px solid rgba(255,255,255,0.1);
            border-top: 4px solid var(--secondary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Фоновое изображение -->
    <div class="bg-overlay" id="bgOverlay"></div>
    
    <!-- Шапка сайта -->
    <header id="siteHeader">
        <a href="#" class="admin-link" id="adminToggle" title="Админ-панель">
            <i class="fas fa-cog"></i>
        </a>
        
        <div class="header-container">
            <div class="logo-container" id="logoContainer">
                <div class="logo-text">АГстрой</div>
                <div class="slogan" id="headerSlogan">Качественные решения для вашего комфорта</div>
            </div>
            
            <nav>
                <a href="#">Главная</a>
                <a href="#about">О нас</a>
                <a href="#promotions">Акции</a>
                <a href="#how-we-work">Как мы работаем</a>
                <a href="#portfolio">Наши работы</a>
                <a href="#news">Новости</a>
                <a href="#reviews">Отзывы</a>
            </nav>
        </div>
    </header>

    <!-- Плавающие кнопки -->
    <div class="floating-buttons" id="floatingButtons">
        <div class="floating-btn tour" id="floatingTourBtn">
            <i class="fas fa-map-marked-alt"></i>
            <span class="tooltip">Записаться на экскурсию</span>
        </div>
        <div class="floating-btn build" id="floatingBuildBtn">
            <i class="fas fa-hammer"></i>
            <span class="tooltip">Построить дом</span>
        </div>
        <div class="floating-btn buy" id="floatingBuyBtn">
            <i class="fas fa-home"></i>
            <span class="tooltip">Купить готовый дом</span>
        </div>
    </div>

    <!-- Основное содержимое -->
    <div class="container">
        <!-- Герой-секция -->
        <section class="hero" id="mainHero">
            <div class="hero-content">
                <h1>Строительство и ремонт</h1>
                <p id="heroSlogan">Качественные решения для вашего комфорта</p>
                
                <div class="hero-buttons">
                    <a class="hero-btn hero-btn-primary" id="buyHouseBtn">
                        <i class="fas fa-home"></i> Купить готовый дом
                    </a>
                    <a class="hero-btn hero-btn-secondary" id="buildHouseBtn">
                        <i class="fas fa-hammer"></i> Построить дом
                    </a>
                    <a class="hero-btn hero-btn-tour" id="tourBtn">
                        <i class="fas fa-map-marked-alt"></i> Записаться на экскурсию
                    </a>
                </div>
            </div>
        </section>

        <!-- Секция "О нас" -->
        <section id="about">
            <div class="section-header">
                <h2><i class="fas fa-info-circle"></i> О нас</h2>
                <p>Строительная компания "АГстрой" - это команда профессионалов с многолетним опытом работы в сфере строительства и ремонта.</p>
            </div>
            
            <div class="content">
                <p>Мы специализируемся на строительстве частных домов, коттеджей, бань и других сооружений под ключ. Наша компания работает на рынке более 10 лет, за это время мы реализовали сотни успешных проектов различной сложности.</p>
                
                <p>Наши принципы работы:</p>
                <ul>
                    <li><i class="fas fa-check"></i> Использование только качественных материалов</li>
                    <li><i class="fas fa-ruler-combined"></i> Соблюдение всех строительных норм и стандартов</li>
                    <li><i class="fas fa-hand-holding-usd"></i> Честная фиксированная цена без скрытых платежей</li>
                    <li><i class="fas fa-calendar-check"></i> Строгое соблюдение сроков выполнения работ</li>
                    <li><i class="fas fa-user-friends"></i> Индивидуальный подход к каждому клиенту</li>
                </ul>
                
                <div class="guarantee-box">
                    <p><i class="fas fa-shield-alt" style="color: var(--secondary); font-size: 1.5rem; vertical-align: middle; margin-right: 10px;"></i> 
                    Гарантируем высокое качество работ, соблюдение сроков, полное сопровождение на всех этапах строительства. Используем высококачественные материалы и применяем успешные современные технологии.</p>
                </div>
                
                <p>Мы гордимся тем, что большинство наших клиентов обращаются к нам по рекомендациям, что говорит о высоком качестве нашей работы и доверии клиентов.</p>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <!-- Секция "Преимущества" -->
        <section id="advantages">
            <div class="section-header">
                <h2><i class="fas fa-star"></i> Наши преимущества</h2>
                <p>Почему клиенты выбирают именно нас для строительства своего дома</p>
            </div>
            
            <div class="advantages" id="advantagesContainer">
                <!-- Преимущества будут загружены через JS -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <!-- Секция "Как мы работаем" -->
        <section id="how-we-work">
            <div class="section-header">
                <h2><i class="fas fa-cogs"></i> Как мы работаем</h2>
                <p>Наш прозрачный и понятный процесс строительства от заявки до сдачи объекта</p>
            </div>
            
            <div class="work-steps" id="workSteps">
                <!-- Шаги работы будут загружены через JS -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <!-- Секция "Наши работы" -->
        <section id="portfolio">
            <div class="section-header">
                <h2><i class="fas fa-photo-video"></i> Наши работы</h2>
                <p>Реализованные проекты, которыми мы гордимся</p>
            </div>
            
            <div class="gallery" id="galleryContainer">
                <!-- Галерея будет загружена через JS -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <!-- Секция "Акции" -->
        <section id="promotions">
            <div class="section-header">
                <h2><i class="fas fa-percentage"></i> Акции и специальные предложения</h2>
                <p>Выгодные условия для наших клиентов</p>
            </div>
            
            <div class="promotion-cards" id="promotionsContainer">
                <!-- Акции будут загружены через JS -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <!-- Секция "Новости" -->
        <section id="news">
            <div class="section-header">
                <h2><i class="fas fa-newspaper"></i> Новости компании</h2>
                <p>Свежие новости и события из жизни нашей компании</p>
            </div>
            
            <div class="loader" id="newsLoader"></div>
            <div class="news-container" id="newsContainer">
                <!-- Новости будут загружены через JS -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <!-- Секция "Отзывы" -->
        <section id="reviews">
            <div class="section-header">
                <h2><i class="fas fa-comments"></i> Отзывы клиентов</h2>
                <p>Что говорят наши клиенты о сотрудничестве с нами</p>
            </div>
            
            <div class="reviews-container" id="reviewsContainer">
                <!-- Отзывы будут загружены через JS -->
            </div>
            
            <!-- Форма добавления отзыва -->
            <div class="review-form">
                <h3>Оставить отзыв</h3>
                <form id="reviewForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="reviewName">Ваше имя</label>
                            <input type="text" id="reviewName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="reviewEmail">Email</label>
                            <input type="email" id="reviewEmail" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Оценка</label>
                        <div class="rating-input" id="ratingInput">
                            <i class="far fa-star" data-value="1"></i>
                            <i class="far fa-star" data-value="2"></i>
                            <i class="far fa-star" data-value="3"></i>
                            <i class="far fa-star" data-value="4"></i>
                            <i class="far fa-star" data-value="5"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="reviewText">Ваш отзыв</label>
                        <textarea id="reviewText" class="form-control" rows="5" required></textarea>
                    </div>
                    
                    <!-- Контейнер для загрузки фото -->
                    <div class="photo-upload-container">
                        <img id="photoPreview" class="photo-preview" alt="Предпросмотр фото">
                        <div class="upload-btn">
                            <i class="fas fa-camera"></i> Загрузить фото
                            <input type="file" id="photoUpload" accept="image/*" style="display: none;">
                        </div>
                        <div class="upload-progress" id="uploadProgress">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block">Отправить отзыв</button>
                </form>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>
        
        <!-- Административная панель -->
        <div class="admin-panel" id="adminPanel">
            <div class="admin-header">
                <h3>Административная панель</h3>
                <button class="btn btn-primary" id="logoutBtn">Выйти</button>
            </div>
            
            <!-- Редактор шапки сайта -->
            <div class="admin-section">
                <h4><i class="fas fa-header"></i> Управление шапкой сайта</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="headerSlogan">Слоган</label>
                            <input type="text" id="headerSloganInput" class="editor-control" value="Качественные решения для вашего комфорта">
                        </div>
                    </div>
                    
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="logoPosition">Позиция логотипа</label>
                            <select id="logoPosition" class="editor-control">
                                <option value="center">По центру</option>
                                <option value="left">Слева</option>
                                <option value="right">Справа</option>
                            </select>
                        </div>
                        <div class="editor-group">
                            <label for="sloganPosition">Позиция слогана</label>
                            <select id="sloganPosition" class="editor-control">
                                <option value="bottom">Под логотипом</option>
                                <option value="top">Над логотипом</option>
                                <option value="left">Слева от логотипа</option>
                                <option value="right">Справа от логотипа</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="headerBg">Фон шапки</label>
                            <input type="file" id="headerBg" class="editor-control">
                            <div class="upload-btn" id="bgUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить фон
                            </div>
                            <img src="" alt="Фон" class="image-preview" id="headerBgPreview">
                        </div>
                        <div class="editor-group">
                            <label for="bgOpacity">Прозрачность фона</label>
                            <input type="range" id="bgOpacity" class="editor-control" min="0" max="1" step="0.05" value="0.15">
                            <div id="opacityValue">15%</div>
                        </div>
                    </div>
                    
                    <div class="editor-group">
                        <label>Баннер для шапки</label>
                        <input type="file" id="bannerUpload" class="editor-control">
                        <div class="upload-btn" id="bannerUploadBtn" style="margin-top: 10px;">
                            <i class="fas fa-upload"></i> Загрузить баннер
                        </div>
                        <img id="bannerPreview" class="image-preview" alt="Предпросмотр баннера">
                    </div>
                    
                    <button class="btn btn-primary" id="saveHeaderBtn">Сохранить изменения</button>
                </div>
            </div>
            
            <!-- Редактор преимуществ -->
            <div class="admin-section">
                <h4><i class="fas fa-star"></i> Управление преимуществами</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="advantageIcon">Иконка</label>
                            <input type="text" id="advantageIcon" class="editor-control" placeholder="fas fa-icon-name">
                        </div>
                        <div class="editor-group">
                            <label for="advantageTitle">Заголовок</label>
                            <input type="text" id="advantageTitle" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="advantageText">Текст</label>
                        <textarea id="advantageText" class="editor-control"></textarea>
                    </div>
                    <button class="btn btn-primary" id="addAdvantageBtn">Добавить преимущество</button>
                </div>
                
                <div class="current-items" id="advantagesManager">
                    <!-- Преимущества для управления -->
                </div>
            </div>
            
            <!-- Редактор шагов работы -->
            <div class="admin-section">
                <h4><i class="fas fa-cogs"></i> Управление шагами работы</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="stepNumber">Номер шага</label>
                            <input type="number" id="stepNumber" class="editor-control" min="1">
                        </div>
                        <div class="editor-group">
                            <label for="stepTitle">Заголовок</label>
                            <input type="text" id="stepTitle" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="stepIcon">Иконка</label>
                            <input type="text" id="stepIcon" class="editor-control" placeholder="fas fa-icon-name">
                        </div>
                        <div class="editor-group">
                            <label for="stepContent">Описание</label>
                            <textarea id="stepContent" class="editor-control"></textarea>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="addStepBtn">Добавить шаг</button>
                </div>
                
                <div class="current-items" id="stepsManager">
                    <!-- Шаги для управления -->
                </div>
            </div>
            
            <!-- Редактор галереи -->
            <div class="admin-section">
                <h4><i class="fas fa-photo-video"></i> Управление галереей</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="galleryType">Тип</label>
                            <select id="galleryType" class="editor-control">
                                <option value="image">Изображение</option>
                                <option value="video">Видео</option>
                            </select>
                        </div>
                        <div class="editor-group">
                            <label for="gallerySource">Источник</label>
                            <input type="file" id="gallerySource" class="editor-control">
                            <div class="upload-btn" id="galleryUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить изображение
                            </div>
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="galleryTitle">Заголовок</label>
                            <input type="text" id="galleryTitle" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="galleryDesc">Описание</label>
                            <input type="text" id="galleryDesc" class="editor-control">
                        </div>
                    </div>
                    <img id="galleryPreview" class="image-preview" alt="Предпросмотр изображения">
                    <button class="btn btn-primary" id="addGalleryItemBtn">Добавить в галерею</button>
                </div>
                
                <div class="gallery-manager" id="galleryManager">
                    <!-- Галерея для управления -->
                </div>
            </div>
            
            <!-- Редактор акций -->
            <div class="admin-section">
                <h4><i class="fas fa-percentage"></i> Управление акциями</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="promoBadge">Бейдж</label>
                            <input type="text" id="promoBadge" class="editor-control" placeholder="Скидка 20%">
                        </div>
                        <div class="editor-group">
                            <label for="promoImage">Изображение</label>
                            <input type="file" id="promoImage" class="editor-control">
                            <div class="upload-btn" id="promoUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить изображение
                            </div>
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="promoTitle">Заголовок</label>
                            <input type="text" id="promoTitle" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="promoDesc">Описание</label>
                            <textarea id="promoDesc" class="editor-control"></textarea>
                        </div>
                    </div>
                    <img id="promoPreview" class="image-preview" alt="Предпросмотр изображения">
                    <button class="btn btn-primary" id="addPromoBtn">Добавить акцию</button>
                </div>
                
                <div class="promotion-cards" id="promotionsManager">
                    <!-- Акции для управления -->
                </div>
            </div>
            
            <!-- Редактор новостей -->
            <div class="admin-section">
                <h4><i class="fas fa-newspaper"></i> Управление новостями</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="newsTitle">Заголовок</label>
                            <input type="text" id="newsTitle" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="newsDate">Дата</label>
                            <input type="date" id="newsDate" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="newsExcerpt">Краткое описание</label>
                        <textarea id="newsExcerpt" class="editor-control"></textarea>
                    </div>
                    <div class="editor-group">
                        <label for="newsContent">Полный текст</label>
                        <textarea id="newsContent" class="editor-control" rows="5"></textarea>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="newsImage">Изображение</label>
                            <input type="file" id="newsImage" class="editor-control">
                            <div class="upload-btn" id="newsUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить изображение
                            </div>
                        </div>
                        <div class="editor-group">
                            <label>Предпросмотр изображения</label>
                            <img src="" alt="Предпросмотр" class="image-preview" id="newsImagePreview">
                        </div>
                    </div>
                    <button class="btn btn-primary" id="addNewsBtn">Добавить новость</button>
                </div>
                
                <div class="news-container" id="newsManager">
                    <!-- Новости для управления -->
                </div>
            </div>
            
            <!-- Редактор отзывов -->
            <div class="admin-section">
                <h4><i class="fas fa-comments"></i> Управление отзывами</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="reviewAuthor">Автор</label>
                            <input type="text" id="reviewAuthor" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="reviewDate">Дата</label>
                            <input type="date" id="reviewDate" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="reviewRating">Рейтинг</label>
                            <input type="number" id="reviewRating" class="editor-control" min="1" max="5" value="5">
                        </div>
                        <div class="editor-group">
                            <label for="reviewStatus">Статус</label>
                            <select id="reviewStatus" class="editor-control">
                                <option value="approved">Одобрен</option>
                                <option value="pending">На модерации</option>
                            </select>
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="reviewPhotoAdmin">Фото автора</label>
                        <input type="file" id="reviewPhotoAdmin" class="editor-control">
                        <div class="upload-btn" id="reviewPhotoUploadBtn" style="margin-top: 10px;">
                            <i class="fas fa-upload"></i> Загрузить фото
                        </div>
                    </div>
                    <div class="editor-group">
                        <img id="reviewPhotoPreview" class="image-preview" alt="Предпросмотр фото">
                    </div>
                    <div class="editor-group">
                        <label for="reviewContent">Текст отзыва</label>
                        <textarea id="reviewContent" class="editor-control" rows="4"></textarea>
                    </div>
                    <button class="btn btn-primary" id="addReviewBtn">Добавить отзыв</button>
                </div>
                
                <div class="reviews-container" id="reviewsManager">
                    <!-- Отзывы для управления -->
                </div>
            </div>
            
            <!-- Интеграция с VK -->
            <div class="admin-section">
                <h4><i class="fab fa-vk"></i> Интеграция с VK</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="vkGroupId">ID группы VK</label>
                        <input type="text" id="vkGroupId" class="editor-control" placeholder="Введите ID вашей группы">
                    </div>
                    <div class="editor-group">
                        <label for="vkToken">Access Token</label>
                        <input type="password" id="vkToken" class="editor-control" placeholder="Введите токен доступа">
                    </div>
                    <div class="editor-group">
                        <label for="vkCount">Количество постов</label>
                        <input type="number" id="vkCount" class="editor-control" min="1" max="20" value="5">
                    </div>
                    <button class="btn btn-primary" id="saveVkBtn">Сохранить настройки</button>
                    <button class="btn btn-secondary" id="loadVkBtn">Загрузить посты</button>
                </div>
            </div>
            
            <!-- Настройка Telegram -->
            <div class="admin-section">
                <h4><i class="fab fa-telegram"></i> Настройка Telegram</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="telegramBotToken">Токен бота Telegram</label>
                        <input type="text" id="telegramBotToken" class="editor-control" value="7895837790:AAGcCjxt1m1PX1QxCLNcqwoY0Q9PC_vMXWk">
                    </div>
                    <div class="editor-group">
                        <label for="telegramChatId">ID чата</label>
                        <input type="text" id="telegramChatId" class="editor-control" value="1240604782">
                        <button class="btn btn-secondary" id="detectChatIdBtn" style="margin-top: 10px;">Определить автоматически</button>
                        <p id="chatIdResult" style="margin-top: 10px;"></p>
                    </div>
                    <button class="btn btn-primary" id="saveTelegramBtn">Сохранить настройки</button>
                    <button class="btn btn-secondary" id="testTelegramBtn">Тест отправки</button>
                </div>
            </div>
            
            <!-- Настройка EmailJS -->
            <div class="admin-section">
                <h4><i class="fas fa-envelope"></i> Настройка EmailJS</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="emailjsServiceId">Service ID</label>
                        <input type="text" id="emailjsServiceId" class="editor-control" value="gmail_service">
                    </div>
                    <div class="editor-group">
                        <label for="emailjsTemplateId">Template ID</label>
                        <input type="text" id="emailjsTemplateId" class="editor-control" value="template_l4bhp9h">
                    </div>
                    <div class="editor-group">
                        <label for="emailjsUserId">User ID</label>
                        <input type="text" id="emailjsUserId" class="editor-control" value="0Y5XcvC3vwg6QPzZm">
                    </div>
                    <button class="btn btn-primary" id="saveEmailjsBtn">Сохранить настройки</button>
                </div>
            </div>
        </div>
        
        <!-- Форма входа -->
        <div class="login-form" id="loginForm" style="display: none;">
            <h2>Вход в админ-панель</h2>
            <div class="form-group">
                <label for="username">Логин</label>
                <input type="text" id="username" class="form-control" placeholder="Введите логин">
            </div>
            <div class="form-group">
                <label for="password">Пароль</label>
                <input type="password" id="password" class="form-control" placeholder="Введите пароль">
            </div>
            <button class="btn btn-primary" id="loginBtn" style="width: 100%;">Войти</button>
            <p id="loginMessage" style="color: #ff6e6e; margin-top: 1rem; text-align: center;"></p>
        </div>
    </div>

    <!-- Подвал -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Контакты</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">📱</div>
                        <div class="contact-text">
                            <strong>Телефон:</strong><br>
                            <a href="tel:+79588770191">8 (958) 877-01-91</a><br>
                            <a href="tel:+79090507530">7 (909) 050-75-30</a><br>
                            <a href="tel:+79199114436">7 (919) 911-44-36</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">✉️</div>
                        <div class="contact-text">
                            <strong>Email:</strong><br>
                            <a href="mailto:ooo-acme@mail.ru">ooo-acme@mail.ru</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">🏢</div>
                        <div class="contact-text">
                            <strong>Адрес:</strong><br>
                            427022, д.Пирогово, ул. Азина, 43в
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">⏰</div>
                        <div class="contact-text">
                            <strong>Часы работы:</strong><br>
                            Пн-Пт: 9:00 - 18:00<br>
                            Сб-Вс: выходной
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Социальные сети</h3>
                <p>Следите за нашими новостями и проектами в социальных сетях:</p>
                <div class="social-icons">
                    <a href="https://vk.com/agstroy" target="_blank" class="social-icon vk-icon">
                        <i class="fab fa-vk"></i>
                    </a>
                    <a href="http://www.youtube.com/c/СтроительнаякомпанияАГстройрф" target="_blank" class="social-icon youtube-icon">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://zen.yandex.ru/agstroy" target="_blank" class="social-icon zen-icon">
                        <i class="fab fa-yandex"></i>
                    </a>
                    <a href="https://rutube.ru/channel/18967331/" target="_blank" class="social-icon rutube-icon">
                        <i class="fas fa-play-circle"></i>
                    </a>
                    <a href="https://wa.me/79588770191" target="_blank" class="social-icon whatsapp-icon">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://t.me/+79090507530" target="_blank" class="social-icon telegram-icon">
                        <i class="fab fa-telegram"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Быстрые ссылки</h3>
                <div class="footer-links">
                    <a href="#">Главная</a>
                    <a href="#about">О нас</a>
                    <a href="#promotions">Акции</a>
                    <a href="#how-we-work">Как мы работаем</a>
                    <a href="#portfolio">Наши работы</a>
                    <a href="#news">Новости</a>
                    <a href="#reviews">Отзывы</a>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2023 Строительная компания "АГстрой". Все права защищены.</p>
        </div>
    </footer>
    
    <!-- Модальные окна для заявок -->
    <div class="modal" id="buyHouseModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Выберите готовый дом</h3>
            
            <div class="houses-grid" id="housesGrid">
                <!-- Дома будут загружены через JS -->
            </div>
            
            <div id="selectedHouseForm" style="display: none;">
                <div class="form-section">
                    <h4>Заявка на покупку дома</h4>
                    <form id="buyHouseForm">
                        <div class="form-group">
                            <label for="buyerName">Ваше имя</label>
                            <input type="text" id="buyerName" class="form-control" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="buyerPhone">Телефон</label>
                                <input type="tel" id="buyerPhone" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="buyerEmail">Email</label>
                                <input type="email" id="buyerEmail" class="form-control" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="buyerMessage">Дополнительная информация</label>
                            <textarea id="buyerMessage" class="form-control" rows="3"></textarea>
                        </div>
                        
                        <button type="submit" class="submit-btn">Отправить заявку</button>
                    </form>
                </div>
                
                <div class="success-message" id="buySuccessMessage">
                    <i class="fas fa-check-circle"></i> Ваша заявка отправлена! Мы свяжемся с вами в ближайшее время.
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="buildHouseModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Заявка на постройку дома</h3>
            
            <div class="form-section">
                <h4>Контактная информация</h4>
                <form id="buildHouseForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientName">Ваше имя</label>
                            <input type="text" id="clientName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="clientPhone">Телефон</label>
                            <input type="tel" id="clientPhone" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientEmail">Email</label>
                            <input type="email" id="clientEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="clientLocation">Местоположение участка</label>
                            <input type="text" id="clientLocation" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="houseArea">Площадь дома (кв.м.)</label>
                        <input type="number" id="houseArea" class="form-control" min="20" max="500">
                    </div>
                    
                    <div class="form-group">
                        <label for="houseType">Тип дома</label>
                        <select id="houseType" class="form-control">
                            <option value="">Выберите тип</option>
                            <option value="cottage">Коттедж</option>
                            <option value="dacha">Дачный дом</option>
                            <option value="duplex">Дуплекс</option>
                            <option value="townhouse">Таунхаус</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="clientBudget">Бюджет (руб.)</label>
                        <input type="number" id="clientBudget" class="form-control" min="0" step="100000">
                    </div>
                    
                    <div class="form-group">
                        <label for="clientWishes">Ваши пожелания</label>
                        <textarea id="clientWishes" class="form-control" rows="4"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">Отправить заявку</button>
                </form>
            </div>
            
            <div class="success-message" id="buildSuccessMessage">
                <i class="fas fa-check-circle"></i> Ваша заявка отправлена! Мы свяжемся с вами в ближайшее время.
            </div>
        </div>
    </div>
    
    <!-- Модальное окно для записи на экскурсию -->
    <div class="modal" id="tourModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Записаться на экскурсию</h3>
            
            <div class="form-section">
                <h4>Выберите объект и дату</h4>
                <form id="tourForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tourName">Ваше имя</label>
                            <input type="text" id="tourName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="tourPhone">Телефон</label>
                            <input type="tel" id="tourPhone" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tourEmail">Email</label>
                            <input type="email" id="tourEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="tourDate">Желаемая дата</label>
                            <input type="date" id="tourDate" class="form-control" min="<?php echo date('Y-m-d'); ?>">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="tourObject">Выберите объект для экскурсии</label>
                        <select id="tourObject" class="form-control" required>
                            <option value="">Выберите объект</option>
                            <option value="ЖК 'Лесной'">ЖК "Лесной" (строительство завершено)</option>
                            <option value="ЖК 'Речной'">ЖК "Речной" (стадия отделки)</option>
                            <option value="ЖК 'Солнечный'">ЖК "Солнечный" (стадия фундамента)</option>
                            <option value="Коттеджный поселок 'Тайга'">Коттеджный поселок "Тайга"</option>
                            <option value="Строительство частного дома в Подмосковье">Строительство частного дома в Подмосковье</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="tourParticipants">Количество участников</label>
                        <input type="number" id="tourParticipants" class="form-control" min="1" max="10" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="tourComments">Комментарии и пожелания</label>
                        <textarea id="tourComments" class="form-control" rows="3"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">Отправить заявку</button>
                </form>
            </div>
            
            <div class="success-message" id="tourSuccessMessage">
                <i class="fas fa-check-circle"></i> Ваша заявка на экскурсию отправлена! Мы свяжемся с вами для подтверждения.
            </div>
        </div>
    </div>
    
    <script>
        // Состояние приложения
        let state = {
            isLoggedIn: false,
            news: [
                {
                    id: 1,
                    title: "Открытие нового офиса в Москве",
                    excerpt: "Мы рады сообщить об открытии нашего нового представительства в столице!",
                    content: "<p>После нескольких месяцев подготовки мы наконец открыли наш новый офис в самом сердце Москвы. Современное пространство площадью 200 кв.м. позволит нам лучше обслуживать наших клиентов в столичном регионе.</p><img src='https://images.unsplash.com/photo-1497366754035-f200968a6e72?auto=format&fit=crop&w=800' alt='Новый офис'>",
                    date: "2023-09-15",
                    image: "https://images.unsplash.com/photo-1497366754035-f200968a6e72?auto=format&fit=crop&w=800"
                },
                {
                    id: 2,
                    title: "Запуск новой линии строительных материалов",
                    excerpt: "Представляем инновационные экологичные материалы для строительства",
                    content: "<p>Наша компания запустила производство новой линейки строительных материалов, отвечающих самым строгим экологическим стандартам. Эти материалы не только безопасны для окружающей среды, но и обладают улучшенными теплоизоляционными свойствами.</p><iframe width='100%' height='400' src='https://www.youtube.com/embed/7wtfhZwyrcc' title='Новые материалы' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe>",
                    date: "2023-08-22",
                    image: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?auto=format&fit=crop&w=800"
                }
            ],
            reviews: [
                {
                    id: 1,
                    author: "Иван Петров",
                    text: "Очень доволен качеством построенного дома. Все работы выполнены в срок, без задержек. Особенно хочу отметить профессионализм прораба Дмитрия.",
                    date: "2023-09-10",
                    rating: 5,
                    approved: true
                },
                {
                    id: 2,
                    author: "Мария Сидорова",
                    text: "Заказывали ремонт в квартире. Сделали всё качественно, учли все наши пожелания. Цена соответствовала результату. Рекомендую!",
                    date: "2023-08-28",
                    rating: 5,
                    approved: true
                },
                {
                    id: 3,
                    author: "Алексей Иванов",
                    text: "Построили баню на даче. Качеством доволен, но были небольшие задержки по срокам.",
                    date: "2023-09-05",
                    rating: 4,
                    approved: false
                },
                // ДОБАВЛЕННЫЕ ОТЗЫВЫ ИЗ ИЖЕВСКА
                {
                    id: 4,
                    author: "Сергей Иванов",
                    text: "Строили дом в КП 'Орловское'. Очень доволен качеством работ. Команда приезжала точно по графику, все материалы были качественные. Особенно понравилось отношение прораба - постоянно был на связи, решал все вопросы оперативно.",
                    date: "2023-09-18",
                    rating: 5,
                    approved: true
                },
                {
                    id: 5,
                    author: "Ольга Петрова",
                    text: "Купили готовый дом в 'Тихих зорях' через АГстрой. Дом построен добротно, все коммуникации работают отлично. Соседи тоже довольны - многие здесь строили с этой компанией. Цена/качество на высоте!",
                    date: "2023-08-30",
                    rating: 5,
                    approved: true
                },
                {
                    id: 6,
                    author: "Андрей Семенов",
                    text: "Строил баню в Орловском. Работы выполнены в срок, бригада аккуратная. Единственное - немного задержали доставку материалов, но это было по вине поставщика. Компания компенсировала задержку скидкой. Рекомендую!",
                    date: "2023-09-05",
                    rating: 4,
                    approved: true
                },
                {
                    id: 7,
                    author: "Екатерина Волкова",
                    text: "Живу в 'Тихих зорях' уже год. Дом построен АГстрой - никаких нареканий. Зимой тепло, летом прохладно. Соседи по поселку тоже все хвалят. Очень рада, что выбрала именно эту компанию.",
                    date: "2023-08-15",
                    rating: 5,
                    approved: true
                },
                {
                    id: 8,
                    author: "Дмитрий Козлов",
                    text: "Строил коттедж в Орловском. Работы начали в срок, закончили даже раньше. Прораб настоящий профессионал - все технические решения были грамотные. По деньгам все четко - никаких доплат. Буду рекомендовать знакомым!",
                    date: "2023-07-22",
                    rating: 5,
                    approved: true
                },
                {
                    id: 9,
                    author: "Наталья Сидорова",
                    text: "Переехали в 'Тихие зори' 3 месяца назад. Дом построен качественно, но были небольшие недочеты в отделке. Обратились в компанию - прислали мастеров, все исправили в течение недели. Сервис на высоте!",
                    date: "2023-09-12",
                    rating: 4,
                    approved: true
                },
                {
                    id: 10,
                    author: "Михаил Орлов",
                    text: "Строился в Орловском через АГстрой. Цены адекватные, качество работ хорошее. Особенно понравилось, что помогли с оформлением документов на участок. Теперь всем знакомым советую эту компанию.",
                    date: "2023-08-05",
                    rating: 5,
                    approved: true
                },
                {
                    id: 11,
                    author: "Анна Кузнецова",
                    text: "Купили дом в 'Тихих зорях' год назад. За это время никаких проблем - фундамент не просел, крыша не течет, окна не продувает. Соседи тоже довольны своими домами от АГстрой. Отличное качество за свои деньги!",
                    date: "2023-07-30",
                    rating: 5,
                    approved: true
                },
                {
                    id: 12,
                    author: "Артем Васильев",
                    text: "Строил дом в Орловском. Процесс контролировал лично. Все этапы выполнены качественно, особенно понравилась работа с электрикой и сантехникой - все разведено грамотно. Сроки соблюдены. Рекомендую компанию!",
                    date: "2023-09-08",
                    rating: 5,
                    approved: true
                },
                {
                    id: 13,
                    author: "Светлана Николаева",
                    text: "Переехали в 'Тихие зори' полгода назад. Дом теплый, все продумано до мелочей. Соседи такие же довольные - многие строили с АГстрой. Организовали нам экскурсию по поселку перед покупкой - это помогло с выбором.",
                    date: "2023-08-20",
                    rating: 5,
                    approved: true
                },
                // Отзывы с фото
                {
                    id: 14,
                    author: "Ирина Смирнова",
                    text: "Построили дом в Орловском через АГстрой. Процесс строительства контролировал прораб, все вопросы решались оперативно. Дом получился теплый и уютный. Особенно радует качество отделки - все идеально ровно, без дефектов.",
                    date: "2023-09-15",
                    rating: 5,
                    approved: true,
                    photo: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=200",
                    photos: [
                        "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=400",
                        "https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?auto=format&fit=crop&w=400",
                        "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=400"
                    ]
                },
                {
                    id: 15,
                    author: "Денис Кузнецов",
                    text: "Заказывал строительство гаража и бани. Работы выполнены качественно, материалы использовали хорошие. Особенно понравилось, что привезли все материалы вовремя и не было простоев. Бригада работала аккуратно, после себя убрали.",
                    date: "2023-09-10",
                    rating: 5,
                    approved: true,
                    photo: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=200",
                    photos: [
                        "https://images.unsplash.com/photo-1582407947304-fd86f028f716?auto=format&fit=crop&w=400"
                    ]
                }
            ],
            advantages: [
                { 
                    id: 1,
                    icon: "fas fa-home", 
                    title: "Качественные дома под ключ", 
                    text: "Строительство домов с гарантией качества и соблюдением всех сроков" 
                },
                { 
                    id: 2,
                    icon: "fas fa-drafting-compass", 
                    title: "Проект индивидуально", 
                    text: "Разрабатываем проекты с учетом всех пожеланий заказчика" 
                },
                { 
                    id: 3,
                    icon: "fas fa-shield-alt", 
                    title: "Надежность решений", 
                    text: "Используем только проверенные конструктивные решения" 
                },
                { 
                    id: 4,
                    icon: "fas fa-user-tie", 
                    title: "Квалифицированные кадры", 
                    text: "Все наши специалисты имеют профильное образование и опыт работы" 
                },
                { 
                    id: 5,
                    icon: "fas fa-handshake", 
                    title: "Честная фиксированная цена", 
                    text: "Никаких скрытых платежей и дополнительных расходов" 
                },
                { 
                    id: 6,
                    icon: "fas fa-heart", 
                    title: "Человеческое отношение", 
                    text: "Индивидуальный подход к каждому клиенту" 
                },
                { 
                    id: 7,
                    icon: "fas fa-piggy-bank", 
                    title: "Помогаем сэкономить", 
                    text: "Подберем оптимальные решения для вашего бюджета" 
                },
                { 
                    id: 8,
                    icon: "fas fa-house-user", 
                    title: "Семейная ипотека", 
                    text: "Поможем оформить льготную ипотеку на строительство" 
                },
                // Убрали "Юридическое сопровождение"
            ],
            workSteps: [
                {
                    id: 1,
                    step: 1,
                    title: "Заявка/звонок",
                    content: "<p>Вы делаете звонок, мы вас консультируем.</p>",
                    icon: "fas fa-phone"
                },
                {
                    id: 2,
                    step: 2,
                    title: "Встреча",
                    content: "<p>Встречаемся на объекте для осмотра и обсуждения деталей.</p>",
                    icon: "fas fa-handshake"
                },
                {
                    id: 3,
                    step: 3,
                    title: "Готовим эскизный проект или смотрим готовый проект",
                    content: "<p>Предлагаем на выбор готовые проекты или разрабатываем индивидуальный эскизный проект с учетом ваших пожеланий.</p>",
                    icon: "fas fa-drafting-compass"
                },
                {
                    id: 4,
                    step: 4,
                    title: "Смета",
                    content: "<p>Подготавливаем и согласовываем смету.</p>",
                    icon: "fas fa-file-invoice-dollar"
                },
                {
                    id: 5,
                    step: 5,
                    title: "Договор",
                    content: "<p>Заключаем договор с прописанными сроками, стоимостью и обязательствами.</p>",
                    icon: "fas fa-file-contract"
                },
                {
                    id: 6,
                    step: 6,
                    title: "Выполнение работ",
                    content: "<p>Строим в срок согласно СНИПам и ГОСТам.</p>",
                    icon: "fas fa-hard-hat"
                }
            ],
            gallery: [
                { 
                    id: 1,
                    type: 'image', 
                    src: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=600', 
                    title: 'Частный дом', 
                    description: 'Полная постройка под ключ' 
                },
                { 
                    id: 2,
                    type: 'image', 
                    src: 'https://images.unsplash.com/photo-1497366754035-f200968a6e72?auto=format&fit=crop&w=600', 
                    title: 'Офисное помещение', 
                    description: 'Капитальный ремонт' 
                },
                { 
                    id: 3,
                    type: 'image', 
                    src: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?auto=format&fit=crop&w=600', 
                    title: 'Коттеджный поселок', 
                    description: 'Комплексное строительство' 
                },
                { 
                    id: 4,
                    type: 'video', 
                    src: 'https://www.youtube.com/embed/dQw4w9WgXcQ', 
                    title: 'Объект "Солнечный"', 
                    description: 'Ход строительства' 
                },
                { 
                    id: 5,
                    type: 'image', 
                    src: 'https://images.unsplash.com/photo-1513694203232-719a280e022f?auto=format&fit=crop&w=600', 
                    title: 'Санузел', 
                    description: 'Комплексный ремонт' 
                },
                { 
                    id: 6,
                    type: 'video', 
                    src: 'https://www.youtube.com/embed/7wtfhZwyrcc', 
                    title: 'ЖК "Лесной"', 
                    description: 'Видеообзор готового объекта' 
                }
            ],
            promotions: [
                {
                    id: 1,
                    badge: "Скидка 20%",
                    image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=600",
                    title: "Скидка на баню или гараж",
                    description: "При строительстве дома на вашем участке получите скидку 20% на строительство бани или гаража!"
                },
                {
                    id: 2,
                    badge: "Бесплатно",
                    image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?auto=format&fit=crop&w=600",
                    title: "Расчет сметы в подарок",
                    description: "При заключении договора на строительство дома получите бесплатный расчет сметы!"
                },
                {
                    id: 3,
                    badge: "Бесплатно",
                    image: "https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?auto=format&fit=crop&w=600",
                    title: "Эскизный проект в подарок",
                    description: "При заключении договора на строительство получите бесплатный эскизный проект!"
                },
                {
                    id: 4,
                    badge: "Специально",
                    image: "https://images.unsplash.com/photo-1549482199-bc1ca6f58502?auto=format&fit=crop&w=600",
                    title: "Специальные условия для молодых семей",
                    description: "Молодые семьи получают специальные скидки и условия оплаты при строительстве дома."
                },
                {
                    id: 5,
                    badge: "Бесплатно",
                    image: "https://images.unsplash.com/photo-1560448204-603b3fc33ddc?auto=format&fit=crop&w=600",
                    title: "Бесплатный выезд специалиста",
                    description: "Закажите бесплатный выезд нашего специалиста на ваш участок для консультации."
                },
                {
                    id: 6,
                    badge: "Скидка",
                    image: "https://images.unsplash.com/photo-1513694203232-719a280e022f?auto=format&fit=crop&w=600",
                    title: "Скидки пенсионерам",
                    description: "Специальные скидки для пенсионеров на все виды строительных работ."
                }
            ],
            houses: [
                {
                    id: 1,
                    name: "Дом 'Солнечный'",
                    stage: "Готов",
                    price: "3 500 000 руб",
                    area: "120 кв.м.",
                    description: "Просторный двухэтажный дом с террасой и гаражом",
                    image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=600"
                },
                {
                    id: 2,
                    name: "Дом 'Лесной'",
                    stage: "Отделка",
                    price: "2 800 000 руб",
                    area: "90 кв.м.",
                    description: "Уютный одноэтажный дом в стиле шале",
                    image: "https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?auto=format&fit=crop&w=600"
                },
                {
                    id: 3,
                    name: "Дом 'Речной'",
                    stage: "Фундамент",
                    price: "1 200 000 руб",
                    area: "75 кв.м.",
                    description: "Компактный дом с мансардой для небольшой семьи",
                    image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=600"
                },
                {
                    id: 4,
                    name: "Дом 'Горный'",
                    stage: "Каркас",
                    price: "1 800 000 руб",
                    area: "110 кв.м.",
                    description: "Современный дом с панорамными окнами",
                    image: "https://images.unsplash.com/photo-1582407947304-fd86f028f716?auto=format&fit=crop&w=600"
                }
            ],
            header: {
                logo: "https://images.unsplash.com/photo-1600880292089-90a7e086ee0c?auto=format&fit=crop&w=200",
                slogan: "Качественные решения для вашего комфорта",
                bgImage: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=1200",
                opacity: 0.15,
                logoPosition: "center",
                sloganPosition: "bottom",
                banner: ""
            },
            telegram: {
                botToken: "7895837790:AAGcCjxt1m1PX1QxCLNcqwoY0Q9PC_vMXWk",
                chatId: "1240604782"
            },
            emailjs: {
                serviceId: "gmail_service",
                templateId: "template_l4bhp9h",
                userId: "0Y5XcvC3vwg6QPzZm"
            }
        };

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            // Загрузка состояния из localStorage
            const savedState = localStorage.getItem('agstroyState');
            if (savedState) {
                state = JSON.parse(savedState);
            }
            
            // Инициализация EmailJS
            if (state.emailjs.userId) {
                emailjs.init(state.emailjs.userId);
            }
            
            renderAdvantages();
            renderWorkSteps();
            renderGallery();
            renderNews();
            renderReviews();
            renderPromotions();
            setupEventListeners();
            setupModals();
            setupAdminPanel();
            updateHeader();
            loadVKNews();
        });

        // Сохранение состояния
        function saveState() {
            localStorage.setItem('agstroyState', JSON.stringify(state));
        }

        // Обновление шапки сайта
        function updateHeader() {
            document.getElementById('headerSlogan').textContent = state.header.slogan;
            document.getElementById('heroSlogan').textContent = state.header.slogan;
            document.getElementById('mainHero').style.backgroundImage = `linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url(${state.header.bgImage})`;
            document.getElementById('bgOverlay').style.opacity = state.header.opacity;
            
            // Применяем позиционирование логотипа и слогана
            const logoContainer = document.getElementById('logoContainer');
            logoContainer.className = 'logo-container';
            
            // Удаляем предыдущие классы позиционирования
            logoContainer.classList.remove('logo-left', 'logo-right', 'slogan-top', 'slogan-left', 'slogan-right');
            
            // Применяем позиционирование логотипа
            if (state.header.logoPosition === 'left') {
                logoContainer.classList.add('logo-left');
            } else if (state.header.logoPosition === 'right') {
                logoContainer.classList.add('logo-right');
            }
            
            // Применяем позиционирование слогана
            if (state.header.sloganPosition === 'top') {
                logoContainer.classList.add('slogan-top');
            } else if (state.header.sloganPosition === 'left') {
                logoContainer.classList.add('slogan-left');
            } else if (state.header.sloganPosition === 'right') {
                logoContainer.classList.add('slogan-right');
            }
            
            // Применяем баннер, если он есть
            const header = document.getElementById('siteHeader');
            if (state.header.banner) {
                header.classList.add('header-with-banner');
                let banner = document.getElementById('headerBanner');
                if (!banner) {
                    banner = document.createElement('img');
                    banner.id = 'headerBanner';
                    banner.className = 'header-banner';
                    header.prepend(banner);
                }
                banner.src = state.header.banner;
            } else {
                header.classList.remove('header-with-banner');
                const banner = document.getElementById('headerBanner');
                if (banner) banner.remove();
            }
        }

        // Рендер преимуществ
        function renderAdvantages() {
            const container = document.getElementById('advantagesContainer');
            container.innerHTML = '';
            
            state.advantages.forEach(item => {
                const advantageItem = document.createElement('div');
                advantageItem.className = 'advantage-item';
                advantageItem.innerHTML = `
                    <div class="advantage-icon">
                        <i class="${item.icon}"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>${item.title}</h3>
                        <p>${item.text}</p>
                    </div>
                `;
                container.appendChild(advantageItem);
            });
        }

        // Рендер шагов работы
        function renderWorkSteps() {
            const container = document.getElementById('workSteps');
            container.innerHTML = '';
            
            state.workSteps.forEach(step => {
                const stepElement = document.createElement('div');
                stepElement.className = 'work-step';
                stepElement.innerHTML = `
                    <div class="step-number">${step.step}</div>
                    <div class="step-icon"><i class="${step.icon}"></i></div>
                    <h3>${step.title}</h3>
                    <div class="work-content">${step.content}</div>
                `;
                container.appendChild(stepElement);
            });
        }

        // Рендер галереи
        function renderGallery() {
            const container = document.getElementById('galleryContainer');
            container.innerHTML = '';
            
            state.gallery.forEach(item => {
                let galleryItem;
                
                if (item.type === 'image') {
                    galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item';
                    galleryItem.innerHTML = `
                        <img src="${item.src}" alt="${item.title}">
                        <div class="overlay">
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        </div>
                    `;
                } else {
                    galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item video-item';
                    galleryItem.innerHTML = `
                        <iframe src="${item.src}" title="${item.title}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        <div class="video-label">ВИДЕО</div>
                        <div class="overlay">
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        </div>
                    `;
                }
                
                container.appendChild(galleryItem);
            });
        }

        // Рендер новостей
        function renderNews() {
            const container = document.getElementById('newsContainer');
            container.innerHTML = '';
            
            state.news.forEach(news => {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.innerHTML = `
                    <div class="news-image">
                        <img src="${news.image}" alt="${news.title}">
                    </div>
                    <div class="news-content">
                        <div class="news-date">${formatDate(news.date)}</div>
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-excerpt">${news.excerpt}</p>
                        <a href="#" class="read-more">Читать далее <i class="fas fa-arrow-right"></i></a>
                    </div>
                `;
                container.appendChild(newsItem);
            });
        }

        // Рендер отзывов
        function renderReviews() {
            const container = document.getElementById('reviewsContainer');
            container.innerHTML = '';
            
            state.reviews.filter(r => r.approved).forEach(review => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                // Аватар с фото или инициалами
                let avatarContent;
                if (review.photo) {
                    avatarContent = `<img src="${review.photo}" alt="${review.author}" class="review-avatar-img">`;
                } else {
                    avatarContent = `<div class="review-avatar">${review.author.charAt(0)}</div>`;
                }
                
                // Фотографии из отзыва
                let photosContent = '';
                if (review.photos && review.photos.length > 0) {
                    photosContent = '<div class="review-photo-grid">';
                    review.photos.forEach(photo => {
                        photosContent += `
                            <div class="review-photo-item">
                                <img src="${photo}" alt="Фото от ${review.author}">
                            </div>
                        `;
                    });
                    photosContent += '</div>';
                }
                
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="review-avatar">
                            ${avatarContent}
                        </div>
                        <div>
                            <div class="review-author">${review.author}</div>
                            <div class="review-date">${formatDate(review.date)}</div>
                        </div>
                    </div>
                    <div class="review-rating">${renderStars(review.rating)}</div>
                    <div class="review-content">${review.text}</div>
                    ${photosContent}
                `;
                container.appendChild(reviewItem);
            });
        }

        // Рендер акций
        function renderPromotions() {
            const container = document.getElementById('promotionsContainer');
            container.innerHTML = '';
            
            state.promotions.forEach(promo => {
                const promoCard = document.createElement('div');
                promoCard.className = 'promotion-card';
                promoCard.innerHTML = `
                    <div class="promotion-badge">${promo.badge}</div>
                    <div class="promotion-image">
                        <img src="${promo.image}" alt="${promo.title}">
                    </div>
                    <div class="promotion-content">
                        <h3 class="promotion-title">${promo.title}</h3>
                        <p class="promotion-desc">${promo.description}</p>
                        <a href="#" class="promotion-link">Подробнее <i class="fas fa-arrow-right"></i></a>
                    </div>
                `;
                container.appendChild(promoCard);
            });
        }

        // Форматирование даты
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('ru-RU', options);
        }

        // Рендер звезд рейтинга
        function renderStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += i <= rating 
                    ? '<i class="fas fa-star"></i>' 
                    : '<i class="far fa-star"></i>';
            }
            return stars;
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            // Кнопки "Наверх"
            document.querySelectorAll('.to-top-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
            
            // Рейтинг в форме отзыва
            const ratingInput = document.getElementById('ratingInput');
            ratingInput.querySelectorAll('i').forEach(star => {
                star.addEventListener('click', function() {
                    const value = parseInt(this.getAttribute('data-value'));
                    ratingInput.querySelectorAll('i').forEach((s, i) => {
                        if (i < value) {
                            s.classList.remove('far');
                            s.classList.add('fas', 'active');
                        } else {
                            s.classList.remove('fas', 'active');
                            s.classList.add('far');
                        }
                    });
                });
            });
            
            // Загрузка фото для отзыва
            const photoUpload = document.getElementById('photoUpload');
            const uploadBtn = document.querySelector('.upload-btn');
            const photoPreview = document.getElementById('photoPreview');
            
            uploadBtn.addEventListener('click', function(e) {
                // Открываем диалог выбора файла при клике на кнопку
                if (e.target !== photoUpload) {
                    photoUpload.click();
                }
            });
            
            photoUpload.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        photoPreview.src = e.target.result;
                        photoPreview.style.display = 'block';
                    }
                    
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            // Отправка формы отзыва
            const reviewForm = document.getElementById('reviewForm');
            reviewForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('reviewName').value;
                const email = document.getElementById('reviewEmail').value;
                const text = document.getElementById('reviewText').value;
                const rating = document.querySelectorAll('#ratingInput .active').length;
                const photoFile = photoUpload.files[0];
                
                if (!name || !email || !text || rating === 0) {
                    alert('Пожалуйста, заполните все обязательные поля и поставьте оценку');
                    return;
                }
                
                // Показываем прогресс загрузки
                const progressBar = document.getElementById('progressBar');
                const uploadProgress = document.getElementById('uploadProgress');
                uploadProgress.style.display = 'block';
                
                // Эмуляция загрузки на сервер
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        
                        // Создаем фиктивный URL для загруженного фото
                        const photoUrl = photoFile 
                            ? `https://agstroy.ru/uploads/${Date.now()}_${photoFile.name}` 
                            : '';
                        
                        // Создаем фиктивные URL для дополнительных фото
                        const additionalPhotos = [];
                        if (photoFile) {
                            for (let i = 0; i < 3; i++) {
                                additionalPhotos.push(`https://agstroy.ru/uploads/${Date.now()}_${i}_${photoFile.name}`);
                            }
                        }
                        
                        const newReview = {
                            id: Date.now(),
                            author: name,
                            text: text,
                            date: new Date().toISOString().split('T')[0],
                            rating: rating,
                            approved: false,
                            photo: photoUrl,
                            photos: additionalPhotos
                        };
                        
                        state.reviews.push(newReview);
                        saveState();
                        alert('Ваш отзыв отправлен на модерацию. Спасибо!');
                        reviewForm.reset();
                        
                        // Скрываем превью и прогресс
                        photoPreview.style.display = 'none';
                        uploadProgress.style.display = 'none';
                        progressBar.style.width = '0%';
                        
                        // Сброс рейтинга
                        ratingInput.querySelectorAll('i').forEach(star => {
                            star.classList.remove('fas', 'active');
                            star.classList.add('far');
                        });
                        
                        // Отправка на почту и в Telegram
                        sendApplication({
                            name: name,
                            email: email,
                            rating: rating,
                            message: text
                        }, 'review-form');
                    }
                }, 100);
            });
            
            // Вход в админ-панель
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.addEventListener('click', function() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                if (username === "admin" && password === "agstroy2023") {
                    state.isLoggedIn = true;
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('adminPanel').classList.add('active');
                    document.getElementById('loginMessage').textContent = '';
                    saveState();
                } else {
                    document.getElementById('loginMessage').textContent = 'Неверный логин или пароль!';
                }
            });
            
            // Выход из админ-панели
            const logoutBtn = document.getElementById('logoutBtn');
            logoutBtn.addEventListener('click', function() {
                state.isLoggedIn = false;
                document.getElementById('adminPanel').classList.remove('active');
                saveState();
            });
            
            // Переключение админ-панели
            const adminToggle = document.getElementById('adminToggle');
            adminToggle.addEventListener('click', function(e) {
                e.preventDefault();
                
                if (state.isLoggedIn) {
                    document.getElementById('adminPanel').classList.toggle('active');
                } else {
                    document.getElementById('loginForm').style.display = 'block';
                    window.scrollTo(0, document.body.scrollHeight);
                }
            });
            
            // Плавающие кнопки
            document.getElementById('floatingTourBtn').addEventListener('click', function() {
                document.getElementById('tourModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            document.getElementById('floatingBuildBtn').addEventListener('click', function() {
                document.getElementById('buildHouseModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            document.getElementById('floatingBuyBtn').addEventListener('click', function() {
                document.getElementById('buyHouseModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
        }
        
        // Настройка модальных окон
        function setupModals() {
            // Кнопки открытия модальных окон
            const buyHouseBtn = document.getElementById('buyHouseBtn');
            const buildHouseBtn = document.getElementById('buildHouseBtn');
            const tourBtn = document.getElementById('tourBtn');
            
            // Модальные окна
            const buyHouseModal = document.getElementById('buyHouseModal');
            const buildHouseModal = document.getElementById('buildHouseModal');
            const tourModal = document.getElementById('tourModal');
            
            // Кнопки закрытия
            const closeButtons = document.querySelectorAll('.close-modal');
            
            // Открытие модальных окон
            buyHouseBtn.addEventListener('click', function() {
                buyHouseModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            buildHouseBtn.addEventListener('click', function() {
                buildHouseModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            tourBtn.addEventListener('click', function() {
                tourModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            // Закрытие модальных окон
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    buyHouseModal.style.display = 'none';
                    buildHouseModal.style.display = 'none';
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    
                    // Сброс формы выбора дома
                    document.getElementById('selectedHouseForm').style.display = 'none';
                    document.querySelectorAll('.house-card').forEach(card => {
                        card.style.display = 'block';
                    });
                });
            });
            
            // Закрытие по клику вне модального окна
            window.addEventListener('click', function(event) {
                if (event.target === buyHouseModal) {
                    buyHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
                if (event.target === buildHouseModal) {
                    buildHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
                if (event.target === tourModal) {
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Обработка выбора дома
            document.querySelectorAll('.select-house-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const houseId = this.getAttribute('data-id');
                    const house = state.houses.find(h => h.id == houseId);
                    
                    // Скрываем список домов
                    document.querySelectorAll('.house-card').forEach(card => {
                        card.style.display = 'none';
                    });
                    
                    // Показываем форму заявки
                    document.getElementById('selectedHouseForm').style.display = 'block';
                    
                    // Устанавливаем название выбранного дома в форме
                    document.querySelector('#selectedHouseForm h4').innerHTML = 
                        `Заявка на покупку дома: <span style="color: var(--accent);">${house.name}</span>`;
                    
                    // Добавляем скрытое поле с ID дома
                    if (!document.getElementById('selectedHouseId')) {
                        const input = document.createElement('input');
                        input.type = 'hidden';
                        input.id = 'selectedHouseId';
                        input.name = 'houseId';
                        input.value = houseId;
                        document.getElementById('buyHouseForm').appendChild(input);
                    } else {
                        document.getElementById('selectedHouseId').value = houseId;
                    }
                });
            });
            
            // Отправка формы покупки дома
            document.getElementById('buyHouseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('buyerName').value,
                    phone: document.getElementById('buyerPhone').value,
                    email: document.getElementById('buyerEmail').value,
                    message: document.getElementById('buyerMessage').value,
                    houseId: document.getElementById('selectedHouseId').value
                };
                
                // Отправка заявки
                sendApplication(formData, 'buy-house');
                
                // Показ сообщения об успехе
                document.getElementById('buySuccessMessage').style.display = 'block';
                
                // Скрытие формы через 3 секунды
                setTimeout(() => {
                    buyHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('buySuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
            
            // Отправка формы постройки дома
            document.getElementById('buildHouseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('clientName').value,
                    phone: document.getElementById('clientPhone').value,
                    email: document.getElementById('clientEmail').value,
                    location: document.getElementById('clientLocation').value,
                    area: document.getElementById('houseArea').value,
                    type: document.getElementById('houseType').value,
                    budget: document.getElementById('clientBudget').value,
                    wishes: document.getElementById('clientWishes').value
                };
                
                // Отправка заявки
                sendApplication(formData, 'build-house');
                
                // Показ сообщения об успехе
                document.getElementById('buildSuccessMessage').style.display = 'block';
                
                // Скрытие формы через 3 секунды
                setTimeout(() => {
                    buildHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('buildSuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
            
            // Отправка формы записи на экскурсию
            document.getElementById('tourForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('tourName').value,
                    phone: document.getElementById('tourPhone').value,
                    email: document.getElementById('tourEmail').value,
                    date: document.getElementById('tourDate').value,
                    object: document.getElementById('tourObject').value,
                    participants: document.getElementById('tourParticipants').value,
                    comments: document.getElementById('tourComments').value
                };
                
                // Отправка заявки
                sendApplication(formData, 'tour');
                
                // Показ сообщения об успехе
                document.getElementById('tourSuccessMessage').style.display = 'block';
                
                // Скрытие формы через 3 секунды
                setTimeout(() => {
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('tourSuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
        }
        
        // Функция отправки заявки
        function sendApplication(data, type) {
            console.log(`Отправка заявки типа: ${type}`, data);
            
            // Отправка в Telegram
            if (state.telegram.botToken && state.telegram.chatId) {
                sendToTelegram(data, type);
            }
            
            // Отправка на почту через EmailJS
            if (state.emailjs.serviceId && state.emailjs.templateId && state.emailjs.userId) {
                sendToEmail(data, type);
            }
        }
        
        // Отправка в Telegram
        async function sendToTelegram(data, type) {
            const formTypes = {
                'buy-house': 'Покупка дома',
                'build-house': 'Постройка дома',
                'tour': 'Экскурсия',
                'review-form': 'Отзыв'
            };
            
            let message = `*Новая заявка (${formTypes[type] || type})*\n`;
            
            for (const [key, value] of Object.entries(data)) {
                if (key !== 'houseId') {
                    message += `*${key}:* ${value}\n`;
                }
            }
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${state.telegram.botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: state.telegram.chatId,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                
                if (!response.ok) {
                    console.error('Ошибка отправки в Telegram:', await response.text());
                }
            } catch (error) {
                console.error('Ошибка отправки в Telegram:', error);
            }
        }
        
        // Отправка на почту через EmailJS
        function sendToEmail(data, type) {
            const formTypes = {
                'buy-house': 'Покупка дома',
                'build-house': 'Постройка дома',
                'tour': 'Экскурсия',
                'review-form': 'Отзыв'
            };
            
            const emailData = {
                form_type: formTypes[type] || type,
                ...data
            };
            
            emailjs.send(state.emailjs.serviceId, state.emailjs.templateId, emailData)
                .then(response => console.log('Email отправлен!', response.status, response.text))
                .catch(error => console.error('Ошибка отправки email:', error));
        }
        
        // Настройка админ-панели
        function setupAdminPanel() {
            // Редактор шапки сайта
            document.getElementById('bgOpacity').addEventListener('input', function() {
                const opacityValue = (this.value * 100).toFixed(0);
                document.getElementById('opacityValue').textContent = opacityValue + '%';
                state.header.opacity = parseFloat(this.value);
                updateHeader();
            });
            
            document.getElementById('logoPosition').value = state.header.logoPosition;
            document.getElementById('sloganPosition').value = state.header.sloganPosition;
            
            document.getElementById('saveHeaderBtn').addEventListener('click', function() {
                state.header.slogan = document.getElementById('headerSloganInput').value;
                state.header.logoPosition = document.getElementById('logoPosition').value;
                state.header.sloganPosition = document.getElementById('sloganPosition').value;
                
                updateHeader();
                saveState();
                alert('Изменения шапки сайта сохранены!');
            });
            
            // Загрузка фона
            document.getElementById('bgUploadBtn').addEventListener('click', function() {
                document.getElementById('headerBg').click();
            });
            
            document.getElementById('headerBg').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('headerBgPreview').src = e.target.result;
                        document.getElementById('headerBgPreview').style.display = 'block';
                        state.header.bgImage = e.target.result;
                        updateHeader();
                        saveState();
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            // Загрузка баннера
            document.getElementById('bannerUploadBtn').addEventListener('click', function() {
                document.getElementById('bannerUpload').click();
            });
            
            document.getElementById('bannerUpload').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('bannerPreview').src = e.target.result;
                        document.getElementById('bannerPreview').style.display = 'block';
                        state.header.banner = e.target.result;
                        updateHeader();
                        saveState();
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            // Редактор преимуществ
            document.getElementById('addAdvantageBtn').addEventListener('click', function() {
                const icon = document.getElementById('advantageIcon').value;
                const title = document.getElementById('advantageTitle').value;
                const text = document.getElementById('advantageText').value;
                
                if (!icon || !title || !text) {
                    alert('Пожалуйста, заполните все поля');
                    return;
                }
                
                const newAdvantage = {
                    id: Date.now(),
                    icon: icon,
                    title: title,
                    text: text
                };
                
                state.advantages.push(newAdvantage);
                renderAdvantages();
                renderAdminAdvantages();
                saveState();
                
                // Очистка формы
                document.getElementById('advantageIcon').value = '';
                document.getElementById('advantageTitle').value = '';
                document.getElementById('advantageText').value = '';
            });
            
            // Рендер преимуществ в админке
            function renderAdminAdvantages() {
                const container = document.getElementById('advantagesManager');
                container.innerHTML = '';
                
                state.advantages.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'admin-editor';
                    itemElement.innerHTML = `
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Иконка</label>
                                <input type="text" class="editor-control" value="${item.icon}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Заголовок</label>
                                <input type="text" class="editor-control" value="${item.title}" disabled>
                            </div>
                        </div>
                        <div class="editor-group">
                            <label>Текст</label>
                            <textarea class="editor-control" disabled>${item.text}</textarea>
                        </div>
                        <button class="btn btn-danger" data-id="${item.id}">Удалить</button>
                    `;
                    container.appendChild(itemElement);
                    
                    // Обработчик удаления
                    itemElement.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.advantages = state.advantages.filter(a => a.id !== id);
                        renderAdminAdvantages();
                        renderAdvantages();
                        saveState();
                    });
                });
            }
            
            // Редактор шагов работы
            document.getElementById('addStepBtn').addEventListener('click', function() {
                const step = parseInt(document.getElementById('stepNumber').value);
                const title = document.getElementById('stepTitle').value;
                const icon = document.getElementById('stepIcon').value;
                const content = document.getElementById('stepContent').value;
                
                if (!step || !title || !icon || !content) {
                    alert('Пожалуйста, заполните все поля');
                    return;
                }
                
                const newStep = {
                    id: Date.now(),
                    step: step,
                    title: title,
                    icon: icon,
                    content: content
                };
                
                state.workSteps.push(newStep);
                renderWorkSteps();
                renderAdminSteps();
                saveState();
                
                // Очистка формы
                document.getElementById('stepNumber').value = '';
                document.getElementById('stepTitle').value = '';
                document.getElementById('stepIcon').value = '';
                document.getElementById('stepContent').value = '';
            });
            
            // Рендер шагов в админке
            function renderAdminSteps() {
                const container = document.getElementById('stepsManager');
                container.innerHTML = '';
                
                state.workSteps.forEach(step => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'admin-editor';
                    itemElement.innerHTML = `
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Номер шага</label>
                                <input type="number" class="editor-control" value="${step.step}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Заголовок</label>
                                <input type="text" class="editor-control" value="${step.title}" disabled>
                            </div>
                        </div>
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Иконка</label>
                                <input type="text" class="editor-control" value="${step.icon}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Описание</label>
                                <textarea class="editor-control" disabled>${step.content}</textarea>
                            </div>
                        </div>
                        <button class="btn btn-danger" data-id="${step.id}">Удалить</button>
                    `;
                    container.appendChild(itemElement);
                    
                    // Обработчик удаления
                    itemElement.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.workSteps = state.workSteps.filter(s => s.id !== id);
                        renderAdminSteps();
                        renderWorkSteps();
                        saveState();
                    });
                });
            }
            
            // Редактор галереи
            document.getElementById('galleryUploadBtn').addEventListener('click', function() {
                document.getElementById('gallerySource').click();
            });
            
            document.getElementById('gallerySource').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('galleryPreview').src = e.target.result;
                        document.getElementById('galleryPreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addGalleryItemBtn').addEventListener('click', function() {
                const type = document.getElementById('galleryType').value;
                const title = document.getElementById('galleryTitle').value;
                const description = document.getElementById('galleryDesc').value;
                const file = document.getElementById('gallerySource').files[0];
                
                if (!file || !title || !description) {
                    alert('Пожалуйста, заполните все поля и загрузите изображение');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newItem = {
                        id: Date.now(),
                        type: type,
                        src: e.target.result,
                        title: title,
                        description: description
                    };
                    
                    state.gallery.push(newItem);
                    renderGallery();
                    renderAdminGallery();
                    saveState();
                    
                    // Очистка формы
                    document.getElementById('galleryTitle').value = '';
                    document.getElementById('galleryDesc').value = '';
                    document.getElementById('galleryPreview').style.display = 'none';
                }
                reader.readAsDataURL(file);
            });
            
            // Рендер галереи в админке
            function renderAdminGallery() {
                const container = document.getElementById('galleryManager');
                container.innerHTML = '';
                
                state.gallery.forEach(item => {
                    const preview = document.createElement('div');
                    preview.className = 'gallery-preview';
                    
                    if (item.type === 'image') {
                        preview.innerHTML = `
                            <img src="${item.src}" alt="${item.title}">
                            <div class="remove-btn" data-id="${item.id}">×</div>
                        `;
                    } else {
                        preview.innerHTML = `
                            <i class="fas fa-video" style="font-size: 2rem;"></i>
                            <div class="remove-btn" data-id="${item.id}">×</div>
                        `;
                    }
                    
                    container.appendChild(preview);
                    
                    // Обработчик удаления
                    preview.querySelector('.remove-btn').addEventListener('click', function(e) {
                        e.stopPropagation();
                        const id = parseInt(this.getAttribute('data-id'));
                        state.gallery = state.gallery.filter(g => g.id !== id);
                        renderAdminGallery();
                        renderGallery();
                        saveState();
                    });
                });
            }
            
            // Редактор акций
            document.getElementById('promoUploadBtn').addEventListener('click', function() {
                document.getElementById('promoImage').click();
            });
            
            document.getElementById('promoImage').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('promoPreview').src = e.target.result;
                        document.getElementById('promoPreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addPromoBtn').addEventListener('click', function() {
                const badge = document.getElementById('promoBadge').value;
                const title = document.getElementById('promoTitle').value;
                const description = document.getElementById('promoDesc').value;
                const file = document.getElementById('promoImage').files[0];
                
                if (!file || !badge || !title || !description) {
                    alert('Пожалуйста, заполните все поля и загрузите изображение');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newPromo = {
                        id: Date.now(),
                        badge: badge,
                        image: e.target.result,
                        title: title,
                        description: description
                    };
                    
                    state.promotions.push(newPromo);
                    renderPromotions();
                    renderAdminPromotions();
                    saveState();
                    
                    // Очистка формы
                    document.getElementById('promoBadge').value = '';
                    document.getElementById('promoTitle').value = '';
                    document.getElementById('promoDesc').value = '';
                    document.getElementById('promoPreview').style.display = 'none';
                }
                reader.readAsDataURL(file);
            });
            
            // Рендер акций в админке
            function renderAdminPromotions() {
                const container = document.getElementById('promotionsManager');
                container.innerHTML = '';
                
                state.promotions.forEach(promo => {
                    const promoCard = document.createElement('div');
                    promoCard.className = 'promotion-card';
                    promoCard.innerHTML = `
                        <div class="promotion-badge">${promo.badge}</div>
                        <div class="promotion-image">
                            <img src="${promo.image}" alt="${promo.title}">
                        </div>
                        <div class="promotion-content">
                            <h3 class="promotion-title">${promo.title}</h3>
                            <p class="promotion-desc">${promo.description}</p>
                            <button class="btn btn-danger" data-id="${promo.id}">Удалить</button>
                        </div>
                    `;
                    container.appendChild(promoCard);
                    
                    // Обработчик удаления
                    promoCard.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.promotions = state.promotions.filter(p => p.id !== id);
                        renderAdminPromotions();
                        renderPromotions();
                        saveState();
                    });
                });
            }
            
            // Редактор новостей
            document.getElementById('newsUploadBtn').addEventListener('click', function() {
                document.getElementById('newsImage').click();
            });
            
            document.getElementById('newsImage').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('newsImagePreview').src = e.target.result;
                        document.getElementById('newsImagePreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addNewsBtn').addEventListener('click', function() {
                const title = document.getElementById('newsTitle').value;
                const date = document.getElementById('newsDate').value;
                const excerpt = document.getElementById('newsExcerpt').value;
                const content = document.getElementById('newsContent').value;
                const file = document.getElementById('newsImage').files[0];
                
                if (!file || !title || !date || !excerpt || !content) {
                    alert('Пожалуйста, заполните все поля и загрузите изображение');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newNews = {
                        id: Date.now(),
                        title: title,
                        date: date,
                        excerpt: excerpt,
                        content: content,
                        image: e.target.result
                    };
                    
                    state.news.push(newNews);
                    renderNews();
                    renderAdminNews();
                    saveState();
                    
                    // Очистка формы
                    document.getElementById('newsTitle').value = '';
                    document.getElementById('newsDate').value = '';
                    document.getElementById('newsExcerpt').value = '';
                    document.getElementById('newsContent').value = '';
                    document.getElementById('newsImagePreview').style.display = 'none';
                }
                reader.readAsDataURL(file);
            });
            
            // Рендер новостей в админке
            function renderAdminNews() {
                const container = document.getElementById('newsManager');
                container.innerHTML = '';
                
                state.news.forEach(news => {
                    const newsItem = document.createElement('div');
                    newsItem.className = 'news-item';
                    newsItem.innerHTML = `
                        <div class="news-image">
                            <img src="${news.image}" alt="${news.title}">
                        </div>
                        <div class="news-content">
                            <div class="news-date">${formatDate(news.date)}</div>
                            <h3 class="news-title">${news.title}</h3>
                            <p class="news-excerpt">${news.excerpt}</p>
                            <button class="btn btn-danger" data-id="${news.id}">Удалить</button>
                        </div>
                    `;
                    container.appendChild(newsItem);
                    
                    // Обработчик удаления
                    newsItem.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.news = state.news.filter(n => n.id !== id);
                        renderAdminNews();
                        renderNews();
                        saveState();
                    });
                });
            }
            
            // Редактор отзывов в админке
            document.getElementById('reviewPhotoUploadBtn').addEventListener('click', function() {
                document.getElementById('reviewPhotoAdmin').click();
            });
            
            document.getElementById('reviewPhotoAdmin').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('reviewPhotoPreview').src = e.target.result;
                        document.getElementById('reviewPhotoPreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addReviewBtn').addEventListener('click', function() {
                const author = document.getElementById('reviewAuthor').value;
                const date = document.getElementById('reviewDate').value;
                const rating = parseInt(document.getElementById('reviewRating').value);
                const status = document.getElementById('reviewStatus').value;
                const content = document.getElementById('reviewContent').value;
                const file = document.getElementById('reviewPhotoAdmin').files[0];
                
                if (!author || !date || !content) {
                    alert('Пожалуйста, заполните обязательные поля');
                    return;
                }
                
                let photoUrl = '';
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        photoUrl = e.target.result;
                        createReview(author, date, rating, status, content, photoUrl);
                    }
                    reader.readAsDataURL(file);
                } else {
                    createReview(author, date, rating, status, content, '');
                }
            });
            
            function createReview(author, date, rating, status, content, photoUrl) {
                // Фиктивные URL для фото
                const photos = [];
                if (photoUrl) {
                    for (let i = 0; i < 3; i++) {
                        photos.push(`https://agstroy.ru/uploads/${Date.now()}_${i}.jpg`);
                    }
                }
                
                const newReview = {
                    id: Date.now(),
                    author: author,
                    text: content,
                    date: date,
                    rating: rating,
                    approved: status === 'approved',
                    photo: photoUrl,
                    photos: photos
                };
                
                state.reviews.push(newReview);
                renderReviews();
                renderAdminReviews();
                saveState();
                
                // Очистка формы
                document.getElementById('reviewAuthor').value = '';
                document.getElementById('reviewDate').value = '';
                document.getElementById('reviewRating').value = '5';
                document.getElementById('reviewContent').value = '';
                document.getElementById('reviewPhotoPreview').style.display = 'none';
            }
            
            // Рендер отзывов в админке
            function renderAdminReviews() {
                const container = document.getElementById('reviewsManager');
                container.innerHTML = '';
                
                state.reviews.forEach(review => {
                    let photosContent = '';
                    if (review.photos && review.photos.length > 0) {
                        photosContent = '<div class="review-photo-grid">';
                        review.photos.forEach(photo => {
                            photosContent += `
                                <div class="review-photo-item">
                                    <img src="${photo}" alt="Фото отзыва">
                                </div>
                            `;
                        });
                        photosContent += '</div>';
                    }
                    
                    const reviewItem = document.createElement('div');
                    reviewItem.className = 'review-item';
                    reviewItem.innerHTML = `
                        <div class="review-header">
                            <div class="review-avatar">
                                ${review.photo 
                                    ? `<img src="${review.photo}" alt="${review.author}" class="review-avatar-img">` 
                                    : `<div class="review-avatar">${review.author.charAt(0)}</div>`}
                            </div>
                            <div>
                                <div class="review-author">${review.author}</div>
                                <div class="review-date">${formatDate(review.date)}</div>
                                <div class="review-status ${review.approved ? 'approved' : ''}">
                                    ${review.approved ? 'Одобрен' : 'На модерации'}
                                </div>
                            </div>
                        </div>
                        <div class="review-rating">${renderStars(review.rating)}</div>
                        <div class="review-content">${review.text}</div>
                        ${photosContent}
                        <button class="btn btn-danger" data-id="${review.id}">Удалить</button>
                    `;
                    container.appendChild(reviewItem);
                    
                    // Обработчик удаления
                    reviewItem.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.reviews = state.reviews.filter(r => r.id !== id);
                        renderAdminReviews();
                        renderReviews();
                        saveState();
                    });
                });
            }
            
            // Интеграция с VK
            document.getElementById('saveVkBtn').addEventListener('click', function() {
                alert('Настройки VK сохранены!');
            });
            
            document.getElementById('loadVkBtn').addEventListener('click', function() {
                alert('Загрузка постов из VK...');
                // В реальной реализации здесь будет вызов API VK
                loadVKNews();
            });
            
            // Настройка Telegram
            document.getElementById('saveTelegramBtn').addEventListener('click', function() {
                state.telegram.botToken = document.getElementById('telegramBotToken').value;
                state.telegram.chatId = document.getElementById('telegramChatId').value;
                saveState();
                alert('Настройки Telegram сохранены!');
            });
            
            document.getElementById('testTelegramBtn').addEventListener('click', function() {
                if (!state.telegram.botToken || !state.telegram.chatId) {
                    alert('Сначала настройте Telegram');
                    return;
                }
                
                sendToTelegram({test: "Тестовое сообщение от АГстрой"}, 'test');
                alert('Тестовое сообщение отправлено в Telegram!');
            });
            
            // Определение chat.id автоматически
            document.getElementById('detectChatIdBtn').addEventListener('click', async function() {
                const token = document.getElementById('telegramBotToken').value;
                if (!token) {
                    alert('Сначала введите токен бота');
                    return;
                }

                try {
                    const response = await fetch(`https://api.telegram.org/bot${token}/getUpdates`);
                    const data = await response.json();
                    
                    if (data.ok && data.result.length > 0) {
                        const chatId = data.result[0].message.chat.id;
                        document.getElementById('telegramChatId').value = chatId;
                        document.getElementById('chatIdResult').innerHTML = 
                            `Найден ID: <strong>${chatId}</strong> (${data.result[0].message.chat.title || 'личные сообщения'})`;
                    } else {
                        document.getElementById('chatIdResult').innerHTML = 
                            'Не найдено активных чатов. Отправьте боту сообщение в нужном чате и попробуйте снова.';
                    }
                } catch (error) {
                    document.getElementById('chatIdResult').innerHTML = 
                        'Ошибка: ' + error.message;
                }
            });
            
            // Настройка EmailJS
            document.getElementById('saveEmailjsBtn').addEventListener('click', function() {
                state.emailjs.serviceId = document.getElementById('emailjsServiceId').value;
                state.emailjs.templateId = document.getElementById('emailjsTemplateId').value;
                state.emailjs.userId = document.getElementById('emailjsUserId').value;
                
                // Инициализация EmailJS
                if (state.emailjs.userId) {
                    emailjs.init(state.emailjs.userId);
                }
                
                saveState();
                alert('Настройки EmailJS сохранены!');
            });
            
            // Инициализация рендеринга админских разделов
            renderAdminAdvantages();
            renderAdminSteps();
            renderAdminGallery();
            renderAdminPromotions();
            renderAdminNews();
            renderAdminReviews();
        }
        
        // Загрузка новостей из VK
        function loadVKNews() {
            const newsContainer = document.getElementById('newsContainer');
            const loader = document.getElementById('newsLoader');
            
            // Показываем индикатор загрузки
            newsContainer.innerHTML = '';
            loader.style.display = 'block';
            
            // В реальной реализации здесь будет запрос к API VK
            setTimeout(() => {
                // Эмуляция загрузки данных
                const vkNews = [
                    {
                        id: 1001,
                        title: "Новый проект в Ижевске",
                        excerpt: "Мы начинаем строительство нового жилого комплекса в центре Ижевска",
                        date: "2023-09-20",
                        image: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?auto=format&fit=crop&w=800"
                    },
                    {
                        id: 1002,
                        title: "Осенняя акция на строительство бань",
                        excerpt: "Специальное предложение на строительство бань до конца осени",
                        date: "2023-09-18",
                        image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?auto=format&fit=crop&w=800"
                    }
                ];
                
                // Добавляем новости в состояние
                state.news = [...vkNews, ...state.news];
                saveState();
                
                // Рендерим новости
                renderNews();
                
                // Скрываем индикатор загрузки
                loader.style.display = 'none';
            }, 1500);
        }
    </script>
</body>
</html>