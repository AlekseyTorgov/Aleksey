<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АГстрой - Строительная компания</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <style>
        :root {
            --primary: #4fc3f7;
            --secondary: #29b6f6;
            --accent: #e91e63;
            --light: #1a1a1a;
            --dark: #e0e0e0;
            --success: #66bb6a;
            --promo: #ffb74d;
            --header-bg: rgba(35, 35, 35, 0.9);
            --card-bg: #222222;
            --border: #3a3a3a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            position: relative;
        }
        
        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1582407947304-fd86f028f716?auto=format&fit=crop&w=1920') no-repeat center center;
            background-size: cover;
            opacity: 0.15;
            z-index: -1;
        }
        
        /* Обновленные стили для шапки */
      header {
    background: white;
    color: black; /* Изменяем цвет текста на черный */
    padding: 8.5rem 0 0; /* Увеличиваем верхний отступ в 2.5 раза, нижний = 0 */
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 100;
    /* Новые свойства для позиционирования текста */
    display: flex;
    flex-direction: column;
    justify-content: flex-end; /* Прижимаем контент к нижнему краю */
    min-height: 0; /* Сбрасываем минимальную высоту */
    height: 12.50rem; /* Новая высота = (3,5rem + 1.5rem) * 2.5 */
}
        
         .header-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 2rem;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .slogan {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #000;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .slogan {
                font-size: 1.5rem;
            }
        }
        
        nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-top: 25px;
        }
        
        nav a {
            color: #000;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        nav a:hover {
            background: rgba(79, 195, 247, 0.2);
            transform: translateY(-2px);
            border-color: var(--secondary);
            color: #000;
        }
        
        .admin-link {
            color: #333;
            position: absolute;
            top: 12px;
            right: 15px;
            transition: all 0.4s ease;
            z-index: 101;
            font-size: 1.2rem;
            text-decoration: none;
        }
        
        .admin-link:hover {
            color: var(--secondary);
            opacity: 1;
            transform: rotate(30deg);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            position: relative;
            z-index: 2;
        }
        
        section {
            margin-bottom: 4rem;
            padding: 3rem 0;
            border-radius: 15px;
            background: var(--card-bg);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            border: 1px solid var(--border);
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 1rem;
        }
        
        .section-header h2 {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .section-header p {
            max-width: 800px;
            margin: 0 auto;
            color: #aaa;
            font-size: 1.1rem;
        }
        
        .to-top-btn {
            display: block;
            margin: 3rem auto 0;
            padding: 0.8rem 2rem;
            background: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            max-width: 200px;
        }
        
        .to-top-btn:hover {
            background: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(79, 195, 247, 0.3);
        }
        
        .hero {
            text-align: center;
            padding: 4rem 1rem;
            border-radius: 15px;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            position: relative;
            margin-bottom: 2rem;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://images.unsplash.com/photo-1513694203232-719a280e022f?auto=format&fit=crop&w=1200') no-repeat center center;
            background-size: cover;
            border: 1px solid var(--border);
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }
        
        .hero-btn {
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            text-decoration: none;
        }
        
        .hero-btn-primary {
            background: var(--accent);
            color: white;
            border: 2px solid var(--accent);
        }
        
        .hero-btn-primary:hover {
            background: #c41d58;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(229, 46, 113, 0.3);
        }
        
        .hero-btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }
        
        .hero-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2);
        }
        
        .hero-btn-tour {
            background: var(--promo);
            color: white;
            border: 2px solid var(--promo);
        }
        
        .hero-btn-tour:hover {
            background: #e68a00;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 159, 0, 0.3);
        }
        
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 99;
            transition: all 0.3s ease;
        }
        
        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .floating-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.5);
        }
        
        .floating-btn.tour {
            background: var(--promo);
            color: white;
        }
        
        .floating-btn.build {
            background: var(--accent);
            color: white;
        }
        
        .floating-btn.buy {
            background: var(--secondary);
            color: white;
        }
        
        .floating-btn .tooltip {
            position: absolute;
            right: 70px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .floating-btn:hover .tooltip {
            opacity: 1;
        }
        
        .advantages {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 1.5rem;
        }
        
        .advantage-item {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            padding: 1.5rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: var(--card-bg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid var(--border);
        }
        
        .advantage-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border-color: var(--secondary);
        }
        
        .advantage-icon {
            background: var(--primary);
            color: var(--light);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .advantage-text {
            flex: 1;
        }
        
        .advantage-text h3 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .gallery-item {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            height: 250px;
            cursor: pointer;
            border: 1px solid var(--border);
        }
        
        .gallery-item:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            border-color: var(--secondary);
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }
        
        .gallery-item:hover img {
            transform: scale(1.1);
        }
        
        .gallery-item .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white;
            padding: 1.5rem 1rem 1rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .gallery-item:hover .overlay {
            opacity: 1;
        }
        
        .video-item {
            grid-column: span 2;
            height: 300px;
        }
        
        .video-item iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 12px;
        }
        
        .video-label {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .work-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .work-step {
            background: var(--light);
            border-radius: 10px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: 1px solid var(--border);
        }
        
        .work-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
            border-color: var(--secondary);
        }
        
        .step-icon {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 1rem;
            background: rgba(79, 195, 247, 0.1);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .work-step:hover .step-icon {
            background: var(--secondary);
            color: white;
            transform: scale(1.1);
        }
        
        .step-number {
            position: absolute;
            top: -20px;
            left: 20px;
            background: var(--secondary);
            color: var(--light);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .work-step h3 {
            color: var(--primary);
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .work-content {
            margin-top: 0.5rem;
            color: #aaa;
        }
        
        .news-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }
        
        .news-item {
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }
        
        .news-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-color: var(--secondary);
        }
        
        .news-image {
            height: 200px;
            overflow: hidden;
        }
        
        .news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .news-item:hover .news-image img {
            transform: scale(1.1);
        }
        
        .news-content {
            padding: 1.5rem;
        }
        
        .news-date {
            color: var(--secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .news-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .news-excerpt {
            color: #aaa;
            margin-bottom: 1.5rem;
        }
        
        .read-more {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .reviews-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .review-item {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            border: 1px solid var(--border);
        }
        
        .review-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 1rem;
        }
        
        .review-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--secondary);
            color: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .review-avatar-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
        }
        
        .review-author {
            font-weight: bold;
            color: var(--primary);
        }
        
        .review-date {
            color: #777;
            font-size: 0.9rem;
        }
        
        .review-rating {
            color: gold;
            margin: 0.5rem 0;
        }
        
        .review-content {
            line-height: 1.6;
            color: #aaa;
        }
        
        .review-status {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #333;
            color: #999;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        .review-status.approved {
            background: #2e7d32;
            color: #66bb6a;
        }
        
        .review-photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .review-photo-item {
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .review-photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .review-form {
            max-width: 600px;
            margin: 3rem auto 0;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }
        
        .review-form h3 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }
        
        .rating-input {
            display: flex;
            gap: 5px;
            margin-bottom: 1rem;
        }
        
        .rating-input i {
            cursor: pointer;
            font-size: 1.5rem;
            color: #555;
            transition: color 0.2s;
        }
        
        .rating-input i.active {
            color: gold;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: var(--light);
        }
        
        .btn-primary:hover {
            background: var(--primary);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-danger {
            background: #c62828;
            color: white;
        }
        
        .btn-danger:hover {
            background: #b71c1c;
        }
        
        footer {
            background: #1a1a1a;
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 2rem;
            border-top: 1px solid var(--border);
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .footer-section {
            margin-bottom: 1.5rem;
        }
        
        .footer-section h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }
        
        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .contact-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 18px;
            background: rgba(255,255,255,0.1);
        }
        
        .contact-text {
            flex: 1;
            color: #aaa;
        }
        
        .contact-text a {
            color: var(--primary);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .contact-text a:hover {
            color: var(--secondary);
            text-decoration: underline;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 1rem;
        }
        
        .social-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.2);
        }
        
        .vk-icon:hover { background: #4a76a8; }
        .youtube-icon:hover { background: #ff0000; }
        .zen-icon:hover { background: #3d9ae8; }
        .rutube-icon:hover { background: #3f6e99; }
        .whatsapp-icon:hover { background: #25d366; }
        .telegram-icon:hover { background: #0088cc; }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #777;
        }
        
        .admin-panel {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
            border: 1px solid var(--border);
        }
        
        .admin-panel.active {
            display: block;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }
        
        .admin-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        
        .admin-section h4 {
            margin-bottom: 1.5rem;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .admin-editor {
            background: #1a1a1a;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }
        
        .editor-row {
            display: flex;
            gap: 15px;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .editor-group {
            flex: 1;
            min-width: 300px;
        }
        
        .editor-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .editor-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        textarea.editor-control {
            min-height: 150px;
        }
        
        .image-preview {
            width: 100%;
            max-height: 200px;
            object-fit: contain;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-top: 1rem;
            display: none;
        }
        
        .gallery-manager {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 1rem;
        }
        
        .gallery-preview {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            height: 150px;
            background: #1a1a1a;
            border: 1px dashed #555;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .gallery-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .gallery-preview .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .upload-area {
            border: 2px dashed #555;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: var(--secondary);
            background: rgba(79, 195, 247, 0.05);
        }
        
        .upload-area i {
            font-size: 3rem;
            color: #555;
            margin-bottom: 1rem;
        }
        
        .login-form {
            max-width: 400px;
            margin: 5rem auto;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }
        
        .login-form h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .promotion-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .promotion-card {
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid var(--border);
        }
        
        .promotion-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: var(--secondary);
        }
        
        .promotion-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .promotion-image {
            height: 200px;
            overflow: hidden;
        }
        
        .promotion-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .promotion-card:hover .promotion-image img {
            transform: scale(1.1);
        }
        
        .promotion-content {
            padding: 1.5rem;
        }
        
        .promotion-title {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--promo);
        }
        
        .promotion-desc {
            color: #aaa;
            margin-bottom: 1.5rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid var(--border);
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--accent);
        }
        
        .modal-title {
            margin-bottom: 1.5rem;
            color: var(--primary);
            text-align: center;
        }
        
        .houses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }
        
        .house-card {
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--card-bg);
        }
        
        .house-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: var(--secondary);
        }
        
        .house-image {
            height: 180px;
            overflow: hidden;
        }
        
        .house-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .house-card:hover .house-image img {
            transform: scale(1.1);
        }
        
        .house-info {
            padding: 1rem;
        }
        
        .house-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .house-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #777;
        }
        
        .house-price {
            font-weight: bold;
            color: var(--accent);
            font-size: 1.2rem;
        }
        
        .select-house-btn {
            width: 100%;
            text-align: center;
            padding: 0.75rem;
            background: var(--secondary);
            color: var(--light);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .select-house-btn:hover {
            background: var(--primary);
        }
        
        .form-section {
            margin-bottom: 1.5rem;
        }
        
        .form-section h4 {
            margin-bottom: 1rem;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #ddd;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #fff;
        }
        
        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 1rem;
        }
        
        .submit-btn:hover {
            background: #c41d58;
        }
        
        .success-message {
            background: #2e7d32;
            color: #a5d6a7;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            text-align: center;
            display: none;
        }
        
        #about .content {
            padding: 0 40px;
            font-size: 1.15rem;
            line-height: 1.8;
            color: #aaa;
        }
        
        #about ul {
            margin: 25px 0;
            padding-left: 20px;
            list-style: none;
        }
        
        #about ul li {
            margin-bottom: 20px;
            padding-left: 40px;
            position: relative;
            font-size: 1.1rem;
        }
        
        #about ul li i {
            position: absolute;
            left: 0;
            top: 3px;
            width: 28px;
            height: 28px;
            background: var(--secondary);
            color: var(--light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        #about .guarantee-box {
            background: rgba(79, 195, 247, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 20px 25px;
            border-radius: 0 8px 8px 0;
            margin: 30px 0;
            font-size: 1.15rem;
            color: #ddd;
        }
        
        .photo-upload-container {
            margin: 1.5rem 0;
            text-align: center;
        }
        
        .photo-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--secondary);
            margin: 0 auto 15px;
            display: none;
        }
        
        .upload-btn {
            display: inline-block;
            padding: 10px 20px;
            background: var(--secondary);
            color: var(--light);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            position: relative;
        }
        
        .upload-btn input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .upload-btn:hover {
            background: var(--primary);
        }
        
        .upload-btn i {
            margin-right: 8px;
        }
        
        .upload-progress {
            width: 100%;
            height: 5px;
            background: #333;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .progress-bar {
            height: 100%;
            width: 0%;
            background: var(--accent);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .logo-left .logo-container {
            justify-content: flex-start;
        }
        
        .logo-right .logo-container {
            justify-content: flex-end;
        }
        
        .slogan-top .slogan {
            order: -1;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }
        
        .slogan-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .slogan-left .slogan {
            margin-top: 0;
        }
        
        .slogan-right {
            display: flex;
            flex-direction: row-reverse;
            align-items: center;
            gap: 20px;
        }
        
        .slogan-right .slogan {
            margin-top: 0;
        }
        
        .header-banner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
        }
        
        .header-with-banner {
            background: rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }
        
        .loader {
            border: 4px solid rgba(255,255,255,0.1);
            border-top: 4px solid var(--secondary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Новые стили для управления домами */
        .houses-manager {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .house-manager-item {
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            background: var(--card-bg);
            position: relative;
        }
        
        .house-manager-image {
            height: 150px;
            overflow: hidden;
        }
        
        .house-manager-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .house-manager-info {
            padding: 15px;
        }
        
        .house-manager-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary);
        }
        
        .remove-house-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
        }
        
        /* Стили для управления фото в отзывах */
        .photo-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .photo-preview-item {
            position: relative;
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .photo-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-preview-item .remove-photo-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.7);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            cursor: pointer;
        }
        
        /* Стили для кнопок управления */
        .admin-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .edit-btn {
            background: var(--secondary);
            color: white;
        }
        
        .delete-btn {
            background: var(--accent);
            color: white;
        }
        
        .item-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            z-index: 10;
        }
        
        .action-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
        }
        
        .edit-action {
            background: var(--secondary);
        }
        
        .delete-action {
            background: var(--accent);
        }
        
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                gap: 0.5rem;
                align-items: center;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                gap: 1rem;
            }
            
            .hero-btn {
                width: 100%;
                justify-content: center;
            }
            
            .video-item {
                grid-column: span 1;
                height: 250px;
            }
            
            .editor-row {
                flex-direction: column;
            }
            
            .editor-group {
                min-width: 100%;
            }
            
            .work-steps {
                grid-template-columns: 1fr;
            }
            
            .advantages {
                grid-template-columns: 1fr;
            }
            
            .news-container {
                grid-template-columns: 1fr;
            }
            
            .reviews-container {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
                gap: 1rem;
            }
            
            .houses-grid {
                grid-template-columns: 1fr;
            }
            
            .promotion-cards {
                grid-template-columns: 1fr;
            }
            
            .floating-buttons {
                bottom: 15px;
                right: 15px;
            }
            
            .floating-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="bg-overlay" id="bgOverlay"></div>
    
    <header id="siteHeader">
        <a href="#" class="admin-link" id="adminToggle" title="Админ-панель">
            <i class="fas fa-cog"></i>
        </a>
        
        <div class="header-container">
            <div class="logo-container" id="logoContainer">
                <div class="slogan" id="headerSlogan">Качественные решения для вашего комфорта</div>
            </div>
            
            <nav>
                <a href="#">Главная</a>
                <a href="#about">О нас</a>
                <a href="#promotions">Акции</a>
                <a href="#how-we-work">Как мы работаем</a>
                <a href="#portfolio">Наши работы</a>
                <a href="#news">Новости</a>
                <a href="#reviews">Отзывы</a>
            </nav>
        </div>
    </header>

    <div class="floating-buttons" id="floatingButtons">
        <div class="floating-btn tour" id="floatingTourBtn">
            <i class="fas fa-map-marked-alt"></i>
            <span class="tooltip">Записаться на экскурсию</span>
        </div>
        <div class="floating-btn build" id="floatingBuildBtn">
            <i class="fas fa-hammer"></i>
            <span class="tooltip">Построить дом</span>
        </div>
        <div class="floating-btn buy" id="floatingBuyBtn">
            <i class="fas fa-home"></i>
            <span class="tooltip">Купить готовый дом</span>
        </div>
    </div>

    <div class="container">
        <section class="hero" id="mainHero">
            <div class="hero-content">
                
                <p id="heroSlogan">Качественные решения для вашего комфорта</p>
                
                <div class="hero-buttons">
                    <a class="hero-btn hero-btn-primary" id="buyHouseBtn">
                        <i class="fas fa-home"></i> Купить готовый дом
                    </a>
                    <a class="hero-btn hero-btn-secondary" id="buildHouseBtn">
                        <i class="fas fa-hammer"></i> Построить дом
                    </a>
                    <a class="hero-btn hero-btn-tour" id="tourBtn">
                        <i class="fas fa-map-marked-alt"></i> Записаться на экскурсию
                    </a>
                </div>
            </div>
        </section>

        <section id="about">
            <div class="section-header">
                <h2><i class="fas fa-info-circle"></i> О нас</h2>
                <p>Строительная компания "АГстрой" - это команда профессионалов с многолетним опытом работы в сфере строительства и ремонта.</p>
            </div>
            
            <div class="content">
                <p>Мы специализируемся на строительстве частных домов, коттеджей, бань и других сооружений под ключ. Наша компания работает на рынке более 10 лет, за это время мы реализовали сотни успешных проектов различной сложности.</p>
                
                <p>Наши принципы работы:</p>
                <ul>
                    <li><i class="fas fa-check"></i> Использование только качественных материалов</li>
                    <li><i class="fas fa-ruler-combined"></i> Соблюдение всех строительных норм и стандартов</li>
                    <li><i class="fas fa-hand-holding-usd"></i> Честная фиксированная цена без скрытых платежей</li>
                    <li><i class="fas fa-calendar-check"></i> Строгое соблюдение сроков выполнения работ</li>
                    <li><i class="fas fa-user-friends"></i> Индивидуальный подход к каждому клиенту</li>
                </ul>
                
                <div class="guarantee-box">
                    <p><i class="fas fa-shield-alt" style="color: var(--secondary); font-size: 1.5rem; vertical-align: middle; margin-right: 10px;"></i> 
                    Гарантируем высокое качество работ, соблюдение сроков, полное сопровождение на всех этапах строительства. Используем высококачественные материалы и применяем успешные современные технологии.</p>
                </div>
                
                <p>Мы гордимся тем, что большинство наших клиентов обращаются к нам по рекомендациям, что говорит о высоком качестве нашей работы и доверии клиентов.</p>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="advantages">
            <div class="section-header">
                <h2><i class="fas fa-star"></i> Наши преимущества</h2>
                <p>Почему клиенты выбирают именно нас для строительства своего дома</p>
            </div>
            
            <div class="advantages" id="advantagesContainer">
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Качественные дома под ключ</h3>
                        <p>Строительство домов с гарантией качества и соблюдением всех сроков</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-drafting-compass"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Проект индивидуально</h3>
                        <p>Разрабатываем проекты с учетом всех пожеланий заказчика</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Надежность решений</h3>
                        <p>Используем только проверенные конструктивные решения</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Квалифицированные кадры</h3>
                        <p>Все наши специалисты имеют профильное образование и опыт работы</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-handshake"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Честная фиксированная цена</h3>
                        <p>Никаких скрытых платежей и дополнительных расходов</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Человеческое отношение</h3>
                        <p>Индивидуальный подход к каждому клиенту</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Помогаем сэкономить</h3>
                        <p>Подберем оптимальные решения для вашего бюджета</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-house-user"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Семейная ипотека</h3>
                        <p>Поможем оформить льготную ипотеку на строительство</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>Технический контроль на каждом этапе строительства</h3>
                        <p>Осуществляем строгий контроль качества на всех этапах строительных работ</p>
                    </div>
                </div>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="how-we-work">
            <div class="section-header">
                <h2><i class="fas fa-cogs"></i> Как мы работаем</h2>
                <p>Наш прозрачный и понятный процесс строительства от заявки до сдачи объекта</p>
            </div>
            
            <div class="work-steps" id="workSteps">
                <div class="work-step">
                    <div class="step-number">1</div>
                    <div class="step-icon"><i class="fas fa-phone"></i></div>
                    <h3>Заявка/звонок</h3>
                    <div class="work-content">
                        <p>Вы делаете звонок, мы вас консультируем.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">2</div>
                    <div class="step-icon"><i class="fas fa-handshake"></i></div>
                    <h3>Встреча</h3>
                    <div class="work-content">
                        <p>Встречаемся на объекте для осмотра и обсуждения деталей.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">3</div>
                    <div class="step-icon"><i class="fas fa-drafting-compass"></i></div>
                    <h3>Готовим проект</h3>
                    <div class="work-content">
                        <p>Предлагаем на выбор готовые проекты или разрабатываем индивидуальный эскизный проект с учетом ваших пожеланий.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">4</div>
                    <div class="step-icon"><i class="fas fa-file-invoice-dollar"></i></div>
                    <h3>Смета</h3>
                    <div class="work-content">
                        <p>Подготавливаем и согласовываем смету.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">5</div>
                    <div class="step-icon"><i class="fas fa-file-contract"></i></div>
                    <h3>Договор</h3>
                    <div class="work-content">
                        <p>Заключаем договор с прописанными сроками, стоимостью и обязательствами.</p>
                    </div>
                </div>
                <div class="work-step">
                    <div class="step-number">6</div>
                    <div class="step-icon"><i class="fas fa-hard-hat"></i></div>
                    <h3>Выполнение работ</h3>
                    <div class="work-content">
                        <p>Строим в срок согласно СНИПам и ГОСТам.</p>
                    </div>
                </div>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="portfolio">
            <div class="section-header">
                <h2><i class="fas fa-photo-video"></i> Наши работы</h2>
                <p>Реализованные проекты, которыми мы гордимся</p>
            </div>
            
            <div class="gallery" id="galleryContainer">
                <!-- Галерея будет загружена динамически -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="promotions">
            <div class="section-header">
                <h2><i class="fas fa-percentage"></i> Акции и специальные предложения</h2>
                <p>Выгодные условия для наших клиентов</p>
            </div>
            
            <div class="promotion-cards" id="promotionsContainer">
                <!-- Акции будут загружены динамически -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="news">
            <div class="section-header">
                <h2><i class="fas fa-newspaper"></i> Новости компании</h2>
                <p>Свежие новости и события из жизни нашей компании</p>
            </div>
            
            <div class="loader" id="newsLoader"></div>
            <div class="news-container" id="newsContainer">
                <!-- Новости будут загружены динамически -->
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>

        <section id="reviews">
            <div class="section-header">
                <h2><i class="fas fa-comments"></i> Отзывы клиентов</h2>
                <p>Что говорят наши клиенты о сотрудничестве с нами</p>
            </div>
            
            <div class="reviews-container" id="reviewsContainer">
                <!-- Отзывы будут загружены динамически -->
            </div>
            
            <div class="review-form">
                <h3>Оставить отзыв</h3>
                <form id="reviewForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="reviewName">Ваше имя</label>
                            <input type="text" id="reviewName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="reviewEmail">Email</label>
                            <input type="email" id="reviewEmail" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Оценка</label>
                        <div class="rating-input" id="ratingInput">
                            <i class="far fa-star" data-value="1"></i>
                            <i class="far fa-star" data-value="2"></i>
                            <i class="far fa-star" data-value="3"></i>
                            <i class="far fa-star" data-value="4"></i>
                            <i class="far fa-star" data-value="5"></i>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="reviewText">Ваш отзыв</label>
                        <textarea id="reviewText" class="form-control" rows="5" required></textarea>
                    </div>
                    
                    <div class="photo-upload-container">
                        <img id="photoPreview" class="photo-preview" alt="Предпросмотр фото">
                        <div class="upload-btn">
                            <i class="fas fa-camera"></i> Загрузить фото
                            <input type="file" id="photoUpload" accept="image/*" style="display: none;">
                        </div>
                        <div class="upload-progress" id="uploadProgress">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block">Отправить отзыв</button>
                </form>
            </div>
            
            <a href="#" class="to-top-btn">
                <i class="fas fa-home"></i> Наверх
            </a>
        </section>
        
        <div class="admin-panel" id="adminPanel">
            <div class="admin-header">
                <h3>Административная панель</h3>
                <button class="btn btn-primary" id="logoutBtn">Выйти</button>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-header"></i> Управление шапкой сайта</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="headerSlogan">Слоган</label>
                            <input type="text" id="headerSloganInput" class="editor-control" value="Качественные решения для вашего комфорта">
                        </div>
                    </div>
                    
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="logoPosition">Позиция логотипа</label>
                            <select id="logoPosition" class="editor-control">
                                <option value="center">По центру</option>
                                <option value="left">Слева</option>
                                <option value="right">Справа</option>
                            </select>
                        </div>
                        <div class="editor-group">
                            <label for="sloganPosition">Позиция слогана</label>
                            <select id="sloganPosition" class="editor-control">
                                <option value="bottom">Под логотипом</option>
                                <option value="top">Над логотипом</option>
                                <option value="left">Слева от логотипа</option>
                                <option value="right">Справа от логотипа</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="headerBg">Фон шапки</label>
                            <input type="file" id="headerBg" class="editor-control">
                            <div class="upload-btn" id="bgUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить фон
                            </div>
                            <img src="" alt="Фон" class="image-preview" id="headerBgPreview">
                        </div>
                        <div class="editor-group">
                            <label for="bgOpacity">Прозрачность фона</label>
                            <input type="range" id="bgOpacity" class="editor-control" min="0" max="1" step="0.05" value="0.15">
                            <div id="opacityValue">15%</div>
                        </div>
                    </div>
                    
                    <div class="editor-group">
                        <label>Баннер для шапки</label>
                        <input type="file" id="bannerUpload" class="editor-control">
                        <div class="upload-btn" id="bannerUploadBtn" style="margin-top: 10px;">
                            <i class="fas fa-upload"></i> Загрузить баннер
                        </div>
                        <img id="bannerPreview" class="image-preview" alt="Предпросмотр баннера">
                    </div>
                    
                    <button class="btn btn-primary" id="saveHeaderBtn">Сохранить изменения</button>
                </div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-star"></i> Управление преимуществами</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="advantageIcon">Иконка</label>
                            <input type="text" id="advantageIcon" class="editor-control" placeholder="fas fa-icon-name">
                        </div>
                        <div class="editor-group">
                            <label for="advantageTitle">Заголовок</label>
                            <input type="text" id="advantageTitle" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="advantageText">Текст</label>
                        <textarea id="advantageText" class="editor-control"></textarea>
                    </div>
                    <button class="btn btn-primary" id="addAdvantageBtn">Добавить преимущество</button>
                </div>
                
                <div class="current-items" id="advantagesManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-cogs"></i> Управление шагами работы</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="stepNumber">Номер шага</label>
                            <input type="number" id="stepNumber" class="editor-control" min="1">
                        </div>
                        <div class="editor-group">
                            <label for="stepTitle">Заголовок</label>
                            <input type="text" id="stepTitle" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="stepIcon">Иконка</label>
                            <input type="text" id="stepIcon" class="editor-control" placeholder="fas fa-icon-name">
                        </div>
                        <div class="editor-group">
                            <label for="stepContent">Описание</label>
                            <textarea id="stepContent" class="editor-control"></textarea>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="addStepBtn">Добавить шаг</button>
                </div>
                
                <div class="current-items" id="stepsManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-photo-video"></i> Управление галереей</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="galleryType">Тип</label>
                            <select id="galleryType" class="editor-control">
                                <option value="image">Изображение</option>
                                <option value="video">Видео</option>
                            </select>
                        </div>
                        <div class="editor-group">
                            <label for="gallerySource">Источник</label>
                            <input type="file" id="gallerySource" class="editor-control">
                            <div class="upload-btn" id="galleryUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить изображение
                            </div>
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="galleryTitle">Заголовок</label>
                            <input type="text" id="galleryTitle" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="galleryDesc">Описание</label>
                            <input type="text" id="galleryDesc" class="editor-control">
                        </div>
                    </div>
                    <img id="galleryPreview" class="image-preview" alt="Предпросмотр изображения">
                    <button class="btn btn-primary" id="addGalleryItemBtn">Добавить в галерею</button>
                </div>
                
                <div class="gallery-manager" id="galleryManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-home"></i> Управление готовыми домами</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="houseName">Название дома</label>
                            <input type="text" id="houseName" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="houseStage">Стадия строительства</label>
                            <input type="text" id="houseStage" class="editor-control" placeholder="Готов, Отделка и т.д.">
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="housePrice">Цена</label>
                            <input type="text" id="housePrice" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="houseArea">Площадь (кв.м.)</label>
                            <input type="number" id="houseArea" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="houseDescription">Описание</label>
                        <textarea id="houseDescription" class="editor-control"></textarea>
                    </div>
                    <div class="editor-group">
                        <label for="houseImage">Изображение</label>
                        <input type="file" id="houseImage" class="editor-control">
                        <div class="upload-btn" id="houseUploadBtn" style="margin-top: 10px;">
                            <i class="fas fa-upload"></i> Загрузить изображение
                        </div>
                    </div>
                    <img id="housePreview" class="image-preview" alt="Предпросмотр изображения" style="display:none;">
                    <button class="btn btn-primary" id="addHouseBtn">Добавить дом</button>
                </div>
                
                <div class="houses-manager" id="housesManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-percentage"></i> Управление акциями</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="promoBadge">Бейдж</label>
                            <input type="text" id="promoBadge" class="editor-control" placeholder="Скидка 20%">
                        </div>
                        <div class="editor-group">
                            <label for="promoImage">Изображение</label>
                            <input type="file" id="promoImage" class="editor-control">
                            <div class="upload-btn" id="promoUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить изображение
                            </div>
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="promoTitle">Заголовок</label>
                            <input type="text" id="promoTitle" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="promoDesc">Описание</label>
                            <textarea id="promoDesc" class="editor-control"></textarea>
                        </div>
                    </div>
                    <img id="promoPreview" class="image-preview" alt="Предпросмотр изображения">
                    <button class="btn btn-primary" id="addPromoBtn">Добавить акцию</button>
                </div>
                
                <div class="promotion-cards" id="promotionsManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-newspaper"></i> Управление новостями</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="newsTitle">Заголовок</label>
                            <input type="text" id="newsTitle" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="newsDate">Дата</label>
                            <input type="date" id="newsDate" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="newsExcerpt">Краткое описание</label>
                        <textarea id="newsExcerpt" class="editor-control"></textarea>
                    </div>
                    <div class="editor-group">
                        <label for="newsContent">Полный текст</label>
                        <textarea id="newsContent" class="editor-control" rows="5"></textarea>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="newsImage">Изображение</label>
                            <input type="file" id="newsImage" class="editor-control">
                            <div class="upload-btn" id="newsUploadBtn" style="margin-top: 10px;">
                                <i class="fas fa-upload"></i> Загрузить изображение
                            </div>
                        </div>
                        <div class="editor-group">
                            <label>Предпросмотр изображения</label>
                            <img src="" alt="Предпросмотр" class="image-preview" id="newsImagePreview">
                        </div>
                    </div>
                    <button class="btn btn-primary" id="addNewsBtn">Добавить новость</button>
                </div>
                
                <div class="news-container" id="newsManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-comments"></i> Управление отзывами</h4>
                <div class="admin-editor">
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="reviewAuthor">Автор</label>
                            <input type="text" id="reviewAuthor" class="editor-control">
                        </div>
                        <div class="editor-group">
                            <label for="reviewDate">Дата</label>
                            <input type="date" id="reviewDate" class="editor-control">
                        </div>
                    </div>
                    <div class="editor-row">
                        <div class="editor-group">
                            <label for="reviewRating">Рейтинг</label>
                            <input type="number" id="reviewRating" class="editor-control" min="1" max="5" value="5">
                        </div>
                        <div class="editor-group">
                            <label for="reviewStatus">Статус</label>
                            <select id="reviewStatus" class="editor-control">
                                <option value="approved">Одобрен</option>
                                <option value="pending">На модерации</option>
                            </select>
                        </div>
                    </div>
                    <div class="editor-group">
                        <label for="reviewPhotoAdmin">Фото автора</label>
                        <input type="file" id="reviewPhotoAdmin" class="editor-control">
                        <div class="upload-btn" id="reviewPhotoUploadBtn" style="margin-top: 10px;">
                            <i class="fas fa-upload"></i> Загрузить фото
                        </div>
                    </div>
                    <div class="editor-group">
                        <img id="reviewPhotoPreview" class="image-preview" alt="Предпросмотр фото">
                    </div>
                    <div class="editor-group">
                        <label for="reviewPhotosAdmin">Фотографии домов</label>
                        <input type="file" id="reviewPhotosAdmin" class="editor-control" multiple>
                        <div class="upload-btn" id="reviewPhotosUploadBtn" style="margin-top: 10px;">
                            <i class="fas fa-upload"></i> Загрузить фотографии
                        </div>
                    </div>
                    <div class="editor-group">
                        <div class="photo-preview-grid" id="reviewPhotosPreview"></div>
                    </div>
                    <div class="editor-group">
                        <label for="reviewContent">Текст отзыва</label>
                        <textarea id="reviewContent" class="editor-control" rows="4"></textarea>
                    </div>
                    <button class="btn btn-primary" id="addReviewBtn">Добавить отзыв</button>
                </div>
                
                <div class="reviews-container" id="reviewsManager"></div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fab fa-vk"></i> Интеграция с VK</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="vkGroupId">ID группы VK</label>
                        <input type="text" id="vkGroupId" class="editor-control" value="147735588">
                    </div>
                    <div class="editor-group">
                        <label for="vkToken">Access Token</label>
                        <textarea id="vkToken" class="editor-control" rows="4">vk1.a.IwkgUcjTjAyieE9j1BvOmTISVAa0O1zL5qpgDkP4U2_pZ2M8H-besZ3ViANyMvw1MrJgDfVCySbBpK59FotPksqIu5mkJwru9_hw6eqikiX35f9uyu0UXrw-FSapGbEoni2DSlGWDLk-QkMEeeohhlOe7Khc0rKy2EydG0Ffbbtvx48iyEfVLBXmZWrwlJITvXBsU6Vw-7_ZZvlzYkq3mQ</textarea>
                    </div>
                    <div class="editor-group">
                        <label for="vkCount">Количество постов</label>
                        <input type="number" id="vkCount" class="editor-control" min="1" max="20" value="5">
                    </div>
                    <button class="btn btn-primary" id="saveVkBtn">Сохранить настройки</button>
                    <button class="btn btn-secondary" id="loadVkBtn">Загрузить посты</button>
                </div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fab fa-telegram"></i> Настройка Telegram</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="telegramBotToken">Токен бота Telegram</label>
                        <input type="text" id="telegramBotToken" class="editor-control" value="7895837790:AAGcCjxt1m1PX1QxCLNcqwoY0Q9PC_vMXWk">
                    </div>
                    <div class="editor-group">
                        <label for="telegramChatId">ID чата</label>
                        <input type="text" id="telegramChatId" class="editor-control" value="1240604782">
                        <button class="btn btn-secondary" id="detectChatIdBtn" style="margin-top: 10px;">Определить автоматически</button>
                        <p id="chatIdResult" style="margin-top: 10px;"></p>
                    </div>
                    <button class="btn btn-primary" id="saveTelegramBtn">Сохранить настройки</button>
                    <button class="btn btn-secondary" id="testTelegramBtn">Тест отправки</button>
                </div>
            </div>
            
            <div class="admin-section">
                <h4><i class="fas fa-envelope"></i> Настройка EmailJS</h4>
                <div class="admin-editor">
                    <div class="editor-group">
                        <label for="emailjsServiceId">Service ID</label>
                        <input type="text" id="emailjsServiceId" class="editor-control" value="gmail_service">
                    </div>
                    <div class="editor-group">
                        <label for="emailjsTemplateId">Template ID</label>
                        <input type="text" id="emailjsTemplateId" class="editor-control" value="template_l4bhp9h">
                    </div>
                    <div class="editor-group">
                        <label for="emailjsUserId">User ID</label>
                        <input type="text" id="emailjsUserId" class="editor-control" value="0Y5XcvC3vwg6QPzZm">
                    </div>
                    <button class="btn btn-primary" id="saveEmailjsBtn">Сохранить настройки</button>
                </div>
            </div>
        </div>
        
        <div class="login-form" id="loginForm" style="display: none;">
            <h2>Вход в админ-панель</h2>
            <div class="form-group">
                <label for="username">Логин</label>
                <input type="text" id="username" class="form-control" placeholder="Введите логин">
            </div>
            <div class="form-group">
                <label for="password">Пароль</label>
                <input type="password" id="password" class="form-control" placeholder="Введите пароль">
            </div>
            <button class="btn btn-primary" id="loginBtn" style="width: 100%;">Войти</button>
            <p id="loginMessage" style="color: #ff6e6e; margin-top: 1rem; text-align: center;"></p>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Контакты</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">📱</div>
                        <div class="contact-text">
                            <strong>Телефон:</strong><br>
                            <a href="tel:+79588770191">8 (958) 877-01-91</a><br>
                            <a href="tel:+79090507530">7 (909) 050-75-30</a><br>
                            <a href="tel:+73412235235">7 (3412) 235-235</a><br>
                            <a href="tel:+79199114436">7 (919) 911-44-36</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">✉️</div>
                        <div class="contact-text">
                            <strong>Email:</strong><br>
                            <a href="mailto:ooo-acme@mail.ru">ooo-acme@mail.ru</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">🏢</div>
                        <div class="contact-text">
                            <strong>Адрес:</strong><br>
                            427022, д.Пирогово, ул. Азина, 43в
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">⏰</div>
                        <div class="contact-text">
                            <strong>Часы работы:</strong><br>
                            Пн-Пт: 9:00 - 18:00<br>
                            Сб-Вс: выходной
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Социальные сети</h3>
                <p>Следите за нашими новостями и проектами в социальных сетях:</p>
                <div class="social-icons">
                    <a href="https://vk.com/agstroy" target="_blank" class="social-icon vk-icon">
                        <i class="fab fa-vk"></i>
                    </a>
                    <a href="http://www.youtube.com/c/СтроительнаякомпанияАГстройрф" target="_blank" class="social-icon youtube-icon">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://zen.yandex.ru/agstroy" target="_blank" class="social-icon zen-icon">
                        <i class="fab fa-yandex"></i>
                    </a>
                    <a href="https://rutube.ru/channel/18967331/" target="_blank" class="social-icon rutube-icon">
                        <i class="fas fa-play-circle"></i>
                    </a>
                    <a href="https://wa.me/79588770191" target="_blank" class="social-icon whatsapp-icon">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://t.me/+79090507530" target="_blank" class="social-icon telegram-icon">
                        <i class="fab fa-telegram"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Быстрые ссылки</h3>
                <div class="footer-links">
                    <a href="#">Главная</a>
                    <a href="#about">О нас</a>
                    <a href="#promotions">Акции</a>
                    <a href="#how-we-work">Как мы работаем</a>
                    <a href="#portfolio">Наши работы</a>
                    <a href="#news">Новости</a>
                    <a href="#reviews">Отзывы</a>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2023 Строительная компания "АГстрой". Все права защищены.</p>
        </div>
    </footer>
    
    <div class="modal" id="buyHouseModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Выберите готовый дом</h3>
            
            <div class="houses-grid" id="housesGrid">
                <!-- Дома будут загружены динамически -->
            </div>
            
            <div id="selectedHouseForm" style="display: none;">
                <div class="form-section">
                    <h4>Заявка на покупку дома</h4>
                    <form id="buyHouseForm">
                        <div class="form-group">
                            <label for="buyerName">Ваше имя</label>
                            <input type="text" id="buyerName" class="form-control" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="buyerPhone">Телефон</label>
                                <input type="tel" id="buyerPhone" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="buyerEmail">Email</label>
                                <input type="email" id="buyerEmail" class="form-control" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="buyerMessage">Дополнительная информация</label>
                            <textarea id="buyerMessage" class="form-control" rows="3"></textarea>
                        </div>
                        
                        <button type="submit" class="submit-btn">Отправить заявку</button>
                    </form>
                </div>
                
                <div class="success-message" id="buySuccessMessage">
                    <i class="fas fa-check-circle"></i> Ваша заявка отправлена! Мы свяжемся с вами в ближайшее время.
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="buildHouseModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Заявка на постройку дома</h3>
            
            <div class="form-section">
                <h4>Контактная информация</h4>
                <form id="buildHouseForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientName">Ваше имя</label>
                            <input type="text" id="clientName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="clientPhone">Телефон</label>
                            <input type="tel" id="clientPhone" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientEmail">Email</label>
                            <input type="email" id="clientEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="clientLocation">Местоположение участка</label>
                            <input type="text" id="clientLocation" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="houseArea">Площадь дома (кв.м.)</label>
                        <input type="number" id="houseArea" class="form-control" min="20" max="500">
                    </div>
                    
                    <div class="form-group">
                        <label for="houseType">Тип дома</label>
                        <select id="houseType" class="form-control">
                            <option value="">Выберите тип</option>
                            <option value="cottage">Коттедж</option>
                            <option value="dacha">Дачный дом</option>
                            <option value="duplex">Дуплекс</option>
                            <option value="townhouse">Таунхаус</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="clientBudget">Бюджет (руб.)</label>
                        <input type="number" id="clientBudget" class="form-control" min="0" step="100000">
                    </div>
                    
                    <div class="form-group">
                        <label for="clientWishes">Ваши пожелания</label>
                        <textarea id="clientWishes" class="form-control" rows="4"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">Отправить заявку</button>
                </form>
            </div>
            
            <div class="success-message" id="buildSuccessMessage">
                <i class="fas fa-check-circle"></i> Ваша заявка отправлена! Мы свяжемся с вами в ближайшее время.
            </div>
        </div>
    </div>
    
    <div class="modal" id="tourModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Записаться на экскурсию</h3>
            
            <div class="form-section">
                <h4>Выберите объект и дату</h4>
                <form id="tourForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tourName">Ваше имя</label>
                            <input type="text" id="tourName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="tourPhone">Телефон</label>
                            <input type="tel" id="tourPhone" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tourEmail">Email</label>
                            <input type="email" id="tourEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="tourDate">Желаемая дата</label>
                            <input type="date" id="tourDate" class="form-control" min="<?php echo date('Y-m-d'); ?>">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="tourObject">Выберите объект для экскурсии</label>
                        <select id="tourObject" class="form-control" required>
                            <option value="">Выберите объект</option>
                            <option value="ЖК 'Лесной'">ЖК "Лесной" (строительство завершено)</option>
                            <option value="ЖК 'Речной'">ЖК "Речной" (стадия отделки)</option>
                            <option value="ЖК 'Солнечный'">ЖК "Солнечный" (стадия фундамента)</option>
                            <option value="Коттеджный поселок 'Тайга'">Коттеджный поселок "Тайга"</option>
                            <option value="Строительство частного дома в Подмосковье">Строительство частного дома в Подмосковье</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="tourParticipants">Количество участников</label>
                        <input type="number" id="tourParticipants" class="form-control" min="1" max="10" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="tourComments">Комментарии и пожелания</label>
                        <textarea id="tourComments" class="form-control" rows="3"></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">Отправить заявку</button>
                </form>
            </div>
            
            <div class="success-message" id="tourSuccessMessage">
                <i class="fas fa-check-circle"></i> Ваша заявка на экскурсию отправлена! Мы свяжемся с вами для подтверждения.
            </div>
        </div>
    </div>
    
    <script>
        // ================== Часть 2: Начало JavaScript ==================
        let state = {
            isLoggedIn: false,
            news: [
                {
                    id: 1,
                    title: "Открытие нового офиса в Москве",
                    excerpt: "Мы рады сообщить об открытии нашего нового представительства в столице!",
                    content: "<p>После нескольких месяцев подготовки мы наконец открыли наш новый офис в самом сердце Москвы. Современное пространство площадью 200 кв.м. позволит нам лучше обслуживать наших клиентов в столичном регионе.</p><img src='https://images.unsplash.com/photo-1497366754035-f200968a6e72?auto=format&fit=crop&w=800' alt='Новый офис'>",
                    date: "2023-09-15",
                    image: "https://images.unsplash.com/photo-1497366754035-f200968a6e72?auto=format&fit=crop&w=800"
                },
                {
                    id: 2,
                    title: "Запуск новой линии строительных материалов",
                    excerpt: "Представляем инновационные экологичные материалы для строительства",
                    content: "<p>Наша компания запустила производство новой линейки строительных материалов, отвечающих самым строгим экологическим стандартам. Эти материалы не только безопасны для окружающей среды, но и обладают улучшенными теплоизоляционными свойствами.</p><iframe width='100%' height='400' src='https://www.youtube.com/embed/7wtfhZwyrcc' title='Новые материалы' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe>",
                    date: "2023-08-22",
                    image: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?auto=format&fit=crop&w=800"
                }
            ],
            reviews: [
                {
                    id: 1,
                    author: "Анна Смирнова",
                    text: "Строили дом в КП 'Тихие зори'. Работали с компанией АГстрой от фундамента до крыши. Все сделали качественно, без задержек. Особенно понравилось отношение прораба - всегда на связи, все вопросы решались оперативно.",
                    date: "2023-07-12",
                    rating: 5,
                    approved: true,
                    photo: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&w=200",
                    photos: ["https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=600"]
                },
                {
                    id: 2,
                    author: "Дмитрий Волков",
                    text: "Заказывал строительство бани в КП 'Орловское'. Сделали за 3 недели, хотя обещали месяц. Качеством доволен, но небольшие недочеты в отделке пришлось исправлять. В целом рекомендую.",
                    date: "2023-06-28",
                    rating: 4,
                    approved: true,
                    photo: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=200",
                    photos: []
                }
            ],
            advantages: [
                { 
                    id: 1,
                    icon: "fas fa-home", 
                    title: "Качественные дома под ключ", 
                    text: "Строительство домов с гарантией качества и соблюдением всех сроков" 
                },
                { 
                    id: 2,
                    icon: "fas fa-drafting-compass", 
                    title: "Проект индивидуально", 
                    text: "Разрабатываем проекты с учетом всех пожеланий заказчика" 
                }
            ],
            workSteps: [
                {
                    id: 1,
                    step: 1,
                    title: "Заявка/звонок",
                    content: "<p>Вы делаете звонок, мы вас консультируем.</p>",
                    icon: "fas fa-phone"
                },
                {
                    id: 2,
                    step: 2,
                    title: "Встреча",
                    content: "<p>Встречаемся на объекте для осмотра и обсуждения деталей.</p>",
                    icon: "fas fa-handshake"
                }
            ],
            gallery: [
                { 
                    id: 1,
                    type: 'image', 
                    src: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=600', 
                    title: 'Частный дом', 
                    description: 'Полная постройка под ключ' 
                },
                { 
                    id: 2,
                    type: 'image', 
                    src: 'https://images.unsplash.com/photo-1497366754035-f200968a6e72?auto=format&fit=crop&w=600', 
                    title: 'Офисное помещение', 
                    description: 'Капитальный ремонт' 
                }
            ],
            promotions: [
                {
                    id: 1,
                    badge: "Скидка 20%",
                    image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=600",
                    title: "Скидка на баню или гараж",
                    description: "При строительстве дома на вашем участке получите скидку 20% на строительство бани или гаража!"
                },
                {
                    id: 2,
                    badge: "Бесплатно",
                    image: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?auto=format&fit=crop&w=600",
                    title: "Расчет сметы в подарок",
                    description: "При заключении договора на строительство дома получите бесплатный расчет сметы!"
                }
            ],
            houses: [
                {
                    id: 1,
                    name: "Дом 'Солнечный'",
                    stage: "Готов",
                    price: "3 500 000 руб",
                    area: "120 кв.м.",
                    description: "Просторный двухэтажный дом с террасой и гаражом",
                    image: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=600"
                },
                {
                    id: 2,
                    name: "Дом 'Лесной'",
                    stage: "Отделка",
                    price: "2 800 000 руб",
                    area: "90 кв.м.",
                    description: "Уютный одноэтажный дом в стиле шале",
                    image: "https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?auto=format&fit=crop&w=600"
                }
            ],
            header: {
                logo: "https://images.unsplash.com/photo-1600880292089-90a7e086ee0c?auto=format&fit=crop&w=200",
                slogan: "Качественные решения для вашего комфорта",
                bgImage: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=1200",
                opacity: 0.15,
                logoPosition: "center",
                sloganPosition: "bottom",
                banner: ""
            },
            telegram: {
                botToken: "7895837790:AAGcCjxt1m1PX1QxCLNcqwoY0Q9PC_vMXWk",
                chatId: "1240604782"
            },
            emailjs: {
                serviceId: "gmail_service",
                templateId: "template_l4bhp9h",
                userId: "0Y5XcvC3vwg6QPzZm"
            },
            vkIntegration: {
                groupId: "147735588",
                token: "vk1.a.IwkgUcjTjAyieE9j1BvOmTISVAa0O1zL5qpgDkP4U2_pZ2M8H-besZ3ViANyMvw1MrJgDfVCySbBpK59FotPksqIu5mkJwru9_hw6eqikiX35f9uyu0UXrw-FSapGbEoni2DSlGWDLk-QkMEeeohhlOe7Khc0rKy2EydG0Ffbbtvx48iyEfVLBXmZWrwlJITvXBsU6Vw-7_ZZvlzYkq3mQ",
                count: 5
            },
            editingGalleryId: null,
            editingNewsId: null,
            editingHouseId: null,
            editingReviewId: null
        };

        function saveState() {
            localStorage.setItem('agstroyState', JSON.stringify(state));
        }
        
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('ru-RU', options);
        }
        
        function renderStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += i <= rating 
                    ? '<i class="fas fa-star"></i>' 
                    : '<i class="far fa-star"></i>';
            }
            return stars;
        }
       
        // ================== Часть 3: Основная логика JavaScript ==================
        document.addEventListener('DOMContentLoaded', function() {
            const savedState = localStorage.getItem('agstroyState');
            if (savedState) {
                state = JSON.parse(savedState);
            }
            
            if (state.emailjs.userId) {
                emailjs.init(state.emailjs.userId);
            }
            
            renderAdvantages();
            renderWorkSteps();
            renderGallery();
            renderNews();
            renderReviews();
            renderPromotions();
            renderHouses();
            setupEventListeners();
            setupModals();
            setupAdminPanel();
            updateHeader();
            loadVKNews();
        });

        function renderAdvantages() {
            const container = document.getElementById('advantagesContainer');
            container.innerHTML = '';
            
            state.advantages.forEach(item => {
                const advantageItem = document.createElement('div');
                advantageItem.className = 'advantage-item';
                advantageItem.innerHTML = `
                    <div class="advantage-icon">
                        <i class="${item.icon}"></i>
                    </div>
                    <div class="advantage-text">
                        <h3>${item.title}</h3>
                        <p>${item.text}</p>
                    </div>
                `;
                container.appendChild(advantageItem);
            });
        }

        function renderWorkSteps() {
            const container = document.getElementById('workSteps');
            container.innerHTML = '';
            
            state.workSteps.forEach(step => {
                const stepElement = document.createElement('div');
                stepElement.className = 'work-step';
                stepElement.innerHTML = `
                    <div class="step-number">${step.step}</div>
                    <div class="step-icon"><i class="${step.icon}"></i></div>
                    <h3>${step.title}</h3>
                    <div class="work-content">${step.content}</div>
                `;
                container.appendChild(stepElement);
            });
        }

        function renderGallery() {
            const container = document.getElementById('galleryContainer');
            container.innerHTML = '';
            
            state.gallery.forEach(item => {
                let galleryItem;
                
                if (item.type === 'image') {
                    galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item';
                    galleryItem.innerHTML = `
                        <img src="${item.src}" alt="${item.title}">
                        <div class="overlay">
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        </div>
                    `;
                } else {
                    galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item video-item';
                    galleryItem.innerHTML = `
                        <iframe src="${item.src}" title="${item.title}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        <div class="video-label">ВИДЕО</div>
                        <div class="overlay">
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        </div>
                    `;
                }
                
                container.appendChild(galleryItem);
            });
        }

        function renderNews() {
            const container = document.getElementById('newsContainer');
            container.innerHTML = '';
            
            state.news.forEach(news => {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.innerHTML = `
                    <div class="news-image">
                        <img src="${news.image}" alt="${news.title}">
                    </div>
                    <div class="news-content">
                        <div class="news-date">${formatDate(news.date)}</div>
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-excerpt">${news.excerpt}</p>
                        
                    </div>
                `;
                container.appendChild(newsItem);
            });
        }

        function renderReviews() {
            const container = document.getElementById('reviewsContainer');
            container.innerHTML = '';
            
            state.reviews.filter(r => r.approved).forEach(review => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                let avatarContent;
                if (review.photo) {
                    avatarContent = `<img src="${review.photo}" alt="${review.author}" class="review-avatar-img">`;
                } else {
                    avatarContent = `<div class="review-avatar">${review.author.charAt(0)}</div>`;
                }
                
                let photosContent = '';
                if (review.photos && review.photos.length > 0) {
                    photosContent = '<div class="review-photo-grid">';
                    review.photos.forEach(photo => {
                        photosContent += `
                            <div class="review-photo-item">
                                <img src="${photo}" alt="Фото от ${review.author}">
                            </div>
                        `;
                    });
                    photosContent += '</div>';
                }
                
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="review-avatar">
                            ${avatarContent}
                        </div>
                        <div>
                            <div class="review-author">${review.author}</div>
                            <div class="review-date">${formatDate(review.date)}</div>
                        </div>
                    </div>
                    <div class="review-rating">${renderStars(review.rating)}</div>
                    <div class="review-content">${review.text}</div>
                    ${photosContent}
                `;
                container.appendChild(reviewItem);
            });
        }

        function renderPromotions() {
            const container = document.getElementById('promotionsContainer');
            container.innerHTML = '';
            
            state.promotions.forEach(promo => {
                const promoCard = document.createElement('div');
                promoCard.className = 'promotion-card';
                promoCard.innerHTML = `
                    <div class="promotion-badge">${promo.badge}</div>
                    <div class="promotion-image">
                        <img src="${promo.image}" alt="${promo.title}">
                    </div>
                    <div class="promotion-content">
                        <h3 class="promotion-title">${promo.title}</h3>
                        <p class="promotion-desc">${promo.description}</p>
                    </div>
                `;
                container.appendChild(promoCard);
            });
        }

        function renderHouses() {
            const container = document.getElementById('housesGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            state.houses.forEach(house => {
                const houseCard = document.createElement('div');
                houseCard.className = 'house-card';
                houseCard.innerHTML = `
                    <div class="house-image">
                        <img src="${house.image}" alt="${house.name}">
                    </div>
                    <div class="house-info">
                        <div class="house-title">${house.name}</div>
                        <div class="house-meta">
                            <span>${house.stage}</span>
                            <span>${house.area} кв.м.</span>
                        </div>
                        <div class="house-price">${house.price}</div>
                        <button class="select-house-btn" data-id="${house.id}">Выбрать</button>
                    </div>
                `;
                container.appendChild(houseCard);
            });
        }

        function updateHeader() {
            document.getElementById('headerSlogan').textContent = state.header.slogan;
            document.getElementById('heroSlogan').textContent = state.header.slogan;
            document.getElementById('mainHero').style.backgroundImage = `linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url(${state.header.bgImage})`;
            document.getElementById('bgOverlay').style.opacity = state.header.opacity;
            
            const logoContainer = document.getElementById('logoContainer');
            logoContainer.className = 'logo-container';
            
            logoContainer.classList.remove('logo-left', 'logo-right', 'slogan-top', 'slogan-left', 'slogan-right');
            
            if (state.header.logoPosition === 'left') {
                logoContainer.classList.add('logo-left');
            } else if (state.header.logoPosition === 'right') {
                logoContainer.classList.add('logo-right');
            }
            
            if (state.header.sloganPosition === 'top') {
                logoContainer.classList.add('slogan-top');
            } else if (state.header.sloganPosition === 'left') {
                logoContainer.classList.add('slogan-left');
            } else if (state.header.sloganPosition === 'right') {
                logoContainer.classList.add('slogan-right');
            }
            
            const header = document.getElementById('siteHeader');
            if (state.header.banner) {
                header.classList.add('header-with-banner');
                let banner = document.getElementById('headerBanner');
                if (!banner) {
                    banner = document.createElement('img');
                    banner.id = 'headerBanner';
                    banner.className = 'header-banner';
                    header.prepend(banner);
                }
                banner.src = state.header.banner;
            } else {
                header.classList.remove('header-with-banner');
                const banner = document.getElementById('headerBanner');
                if (banner) banner.remove();
            }
        }

        function setupEventListeners() {
            document.querySelectorAll('.to-top-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
            
            const ratingInput = document.getElementById('ratingInput');
            ratingInput.querySelectorAll('i').forEach(star => {
                star.addEventListener('click', function() {
                    const value = parseInt(this.getAttribute('data-value'));
                    ratingInput.querySelectorAll('i').forEach((s, i) => {
                        if (i < value) {
                            s.classList.remove('far');
                            s.classList.add('fas', 'active');
                        } else {
                            s.classList.remove('fas', 'active');
                            s.classList.add('far');
                        }
                    });
                });
            });
            
            const photoUpload = document.getElementById('photoUpload');
            const uploadBtn = document.querySelector('.upload-btn');
            const photoPreview = document.getElementById('photoPreview');
            
            uploadBtn.addEventListener('click', function(e) {
                if (e.target !== photoUpload) {
                    photoUpload.click();
                }
            });
            
            photoUpload.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        photoPreview.src = e.target.result;
                        photoPreview.style.display = 'block';
                    }
                    
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            const reviewForm = document.getElementById('reviewForm');
            reviewForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('reviewName').value;
                const email = document.getElementById('reviewEmail').value;
                const text = document.getElementById('reviewText').value;
                const rating = document.querySelectorAll('#ratingInput .active').length;
                const photoFile = photoUpload.files[0];
                
                if (!name || !email || !text || rating === 0) {
                    alert('Пожалуйста, заполните все обязательные поля и поставьте оценку');
                    return;
                }
                
                const progressBar = document.getElementById('progressBar');
                const uploadProgress = document.getElementById('uploadProgress');
                uploadProgress.style.display = 'block';
                
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        
                        const photoUrl = photoFile 
                            ? `https://agstroy.ru/uploads/${Date.now()}_${photoFile.name}` 
                            : '';
                        
                        const additionalPhotos = [];
                        if (photoFile) {
                            for (let i = 0; i < 3; i++) {
                                additionalPhotos.push(`https://agstroy.ru/uploads/${Date.now()}_${i}_${photoFile.name}`);
                            }
                        }
                        
                        const newReview = {
                            id: Date.now(),
                            author: name,
                            text: text,
                            date: new Date().toISOString().split('T')[0],
                            rating: rating,
                            approved: false,
                            photo: photoUrl,
                            photos: additionalPhotos
                        };
                        
                        state.reviews.push(newReview);
                        saveState();
                        alert('Ваш отзыв отправлен на модерацию. Спасибо!');
                        reviewForm.reset();
                        
                        photoPreview.style.display = 'none';
                        uploadProgress.style.display = 'none';
                        progressBar.style.width = '0%';
                        
                        ratingInput.querySelectorAll('i').forEach(star => {
                            star.classList.remove('fas', 'active');
                            star.classList.add('far');
                        });
                        
                        sendApplication({
                            name: name,
                            email: email,
                            rating: rating,
                            message: text
                        }, 'review-form');
                    }
                }, 100);
            });
            
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.addEventListener('click', function() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                if (username === "admin" && password === "agstroy2023") {
                    state.isLoggedIn = true;
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('adminPanel').classList.add('active');
                    document.getElementById('loginMessage').textContent = '';
                    saveState();
                } else {
                    document.getElementById('loginMessage').textContent = 'Неверный логин или пароль!';
                }
            });
            
            const logoutBtn = document.getElementById('logoutBtn');
            logoutBtn.addEventListener('click', function() {
                state.isLoggedIn = false;
                document.getElementById('adminPanel').classList.remove('active');
                saveState();
            });
            
            const adminToggle = document.getElementById('adminToggle');
            adminToggle.addEventListener('click', function(e) {
                e.preventDefault();
                
                if (state.isLoggedIn) {
                    document.getElementById('adminPanel').classList.toggle('active');
                } else {
                    document.getElementById('loginForm').style.display = 'block';
                    window.scrollTo(0, document.body.scrollHeight);
                }
            });
            
            document.getElementById('floatingTourBtn').addEventListener('click', function() {
                document.getElementById('tourModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            document.getElementById('floatingBuildBtn').addEventListener('click', function() {
                document.getElementById('buildHouseModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            document.getElementById('floatingBuyBtn').addEventListener('click', function() {
                document.getElementById('buyHouseModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
        }
        
        function setupModals() {
            const buyHouseBtn = document.getElementById('buyHouseBtn');
            const buildHouseBtn = document.getElementById('buildHouseBtn');
            const tourBtn = document.getElementById('tourBtn');
            
            const buyHouseModal = document.getElementById('buyHouseModal');
            const buildHouseModal = document.getElementById('buildHouseModal');
            const tourModal = document.getElementById('tourModal');
            
            const closeButtons = document.querySelectorAll('.close-modal');
            
            buyHouseBtn.addEventListener('click', function() {
                buyHouseModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            buildHouseBtn.addEventListener('click', function() {
                buildHouseModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            tourBtn.addEventListener('click', function() {
                tourModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    buyHouseModal.style.display = 'none';
                    buildHouseModal.style.display = 'none';
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    
                    document.getElementById('selectedHouseForm').style.display = 'none';
                    document.querySelectorAll('.house-card').forEach(card => {
                        card.style.display = 'block';
                    });
                });
            });
            
            window.addEventListener('click', function(event) {
                if (event.target === buyHouseModal) {
                    buyHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
                if (event.target === buildHouseModal) {
                    buildHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
                if (event.target === tourModal) {
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            document.querySelectorAll('.select-house-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const houseId = this.getAttribute('data-id');
                    const house = state.houses.find(h => h.id == houseId);
                    
                    document.querySelectorAll('.house-card').forEach(card => {
                        card.style.display = 'none';
                    });
                    
                    document.getElementById('selectedHouseForm').style.display = 'block';
                    
                    document.querySelector('#selectedHouseForm h4').innerHTML = 
                        `Заявка на покупку дома: <span style="color: var(--accent);">${house.name}</span>`;
                    
                    if (!document.getElementById('selectedHouseId')) {
                        const input = document.createElement('input');
                        input.type = 'hidden';
                        input.id = 'selectedHouseId';
                        input.name = 'houseId';
                        input.value = houseId;
                        document.getElementById('buyHouseForm').appendChild(input);
                    } else {
                        document.getElementById('selectedHouseId').value = houseId;
                    }
                });
            });
            
            document.getElementById('buyHouseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('buyerName').value,
                    phone: document.getElementById('buyerPhone').value,
                    email: document.getElementById('buyerEmail').value,
                    message: document.getElementById('buyerMessage').value,
                    houseId: document.getElementById('selectedHouseId').value
                };
                
                sendApplication(formData, 'buy-house');
                
                document.getElementById('buySuccessMessage').style.display = 'block';
                
                setTimeout(() => {
                    buyHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('buySuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
            
            document.getElementById('buildHouseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('clientName').value,
                    phone: document.getElementById('clientPhone').value,
                    email: document.getElementById('clientEmail').value,
                    location: document.getElementById('clientLocation').value,
                    area: document.getElementById('houseArea').value,
                    type: document.getElementById('houseType').value,
                    budget: document.getElementById('clientBudget').value,
                    wishes: document.getElementById('clientWishes').value
                };
                
                sendApplication(formData, 'build-house');
                
                document.getElementById('buildSuccessMessage').style.display = 'block';
                
                setTimeout(() => {
                    buildHouseModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('buildSuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
            
            document.getElementById('tourForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('tourName').value,
                    phone: document.getElementById('tourPhone').value,
                    email: document.getElementById('tourEmail').value,
                    date: document.getElementById('tourDate').value,
                    object: document.getElementById('tourObject').value,
                    participants: document.getElementById('tourParticipants').value,
                    comments: document.getElementById('tourComments').value
                };
                
                sendApplication(formData, 'tour');
                
                document.getElementById('tourSuccessMessage').style.display = 'block';
                
                setTimeout(() => {
                    tourModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.getElementById('tourSuccessMessage').style.display = 'none';
                    this.reset();
                }, 3000);
            });
        }
        
        function sendApplication(data, type) {
            console.log(`Отправка заявки типа: ${type}`, data);
            
            const fieldNames = {
                name: 'Имя',
                phone: 'Телефон',
                email: 'Email',
                message: 'Сообщение',
                houseId: 'ID дома',
                houseName: 'Выбранный дом',
                location: 'Местоположение участка',
                area: 'Площадь дома',
                type: 'Тип дома',
                budget: 'Бюджет',
                wishes: 'Пожелания',
                date: 'Дата экскурсии',
                object: 'Объект экскурсии',
                participants: 'Количество участников',
                comments: 'Комментарии',
                rating: 'Оценка'
            };
            
            if (state.telegram.botToken && state.telegram.chatId) {
                sendToTelegram(data, type, fieldNames);
            }
            
            if (state.emailjs.serviceId && state.emailjs.templateId && state.emailjs.userId) {
                sendToEmail(data, type);
            }
        }
        
        async function sendToTelegram(data, type, fieldNames) {
            const formTypes = {
                'buy-house': 'Покупка дома',
                'build-house': 'Постройка дома',
                'tour': 'Экскурсия',
                'review-form': 'Отзыв'
            };
            
            let message = `*Новая заявка (${formTypes[type] || type})*\n`;
            
            for (const [key, value] of Object.entries(data)) {
                if (fieldNames[key]) {
                    message += `*${fieldNames[key]}*: ${value}\n`;
                }
            }
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${state.telegram.botToken}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: state.telegram.chatId,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                
                if (!response.ok) {
                    console.error('Ошибка отправки в Telegram:', await response.text());
                }
            } catch (error) {
                console.error('Ошибка отправки в Telegram:', error);
            }
        }
        
        function sendToEmail(data, type) {
            const formTypes = {
                'buy-house': 'Покупка дома',
                'build-house': 'Постройка дома',
                'tour': 'Экскурсия',
                'review-form': 'Отзыв'
            };
            
            const emailData = {
                form_type: formTypes[type] || type,
                ...data
            };
            
            emailjs.send(state.emailjs.serviceId, state.emailjs.templateId, emailData)
                .then(response => console.log('Email отправлен!', response.status, response.text))
                .catch(error => console.error('Ошибка отправки email:', error));
        }
        
        function setupAdminPanel() {
            document.getElementById('bgOpacity').addEventListener('input', function() {
                const opacityValue = (this.value * 100).toFixed(0);
                document.getElementById('opacityValue').textContent = opacityValue + '%';
                state.header.opacity = parseFloat(this.value);
                updateHeader();
            });
            
            document.getElementById('logoPosition').value = state.header.logoPosition;
            document.getElementById('sloganPosition').value = state.header.sloganPosition;
            
            document.getElementById('saveHeaderBtn').addEventListener('click', function() {
                state.header.slogan = document.getElementById('headerSloganInput').value;
                state.header.logoPosition = document.getElementById('logoPosition').value;
                state.header.sloganPosition = document.getElementById('sloganPosition').value;
                
                updateHeader();
                saveState();
                alert('Изменения шапки сайта сохранены!');
            });
            
            document.getElementById('bgUploadBtn').addEventListener('click', function() {
                document.getElementById('headerBg').click();
            });
            
            document.getElementById('headerBg').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('headerBgPreview').src = e.target.result;
                        document.getElementById('headerBgPreview').style.display = 'block';
                        state.header.bgImage = e.target.result;
                        updateHeader();
                        saveState();
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('bannerUploadBtn').addEventListener('click', function() {
                document.getElementById('bannerUpload').click();
            });
            
            document.getElementById('bannerUpload').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('bannerPreview').src = e.target.result;
                        document.getElementById('bannerPreview').style.display = 'block';
                        state.header.banner = e.target.result;
                        updateHeader();
                        saveState();
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addAdvantageBtn').addEventListener('click', function() {
                const icon = document.getElementById('advantageIcon').value;
                const title = document.getElementById('advantageTitle').value;
                const text = document.getElementById('advantageText').value;
                
                if (!icon || !title || !text) {
                    alert('Пожалуйста, заполните все поля');
                    return;
                }
                
                const newAdvantage = {
                    id: Date.now(),
                    icon: icon,
                    title: title,
                    text: text
                };
                
                state.advantages.push(newAdvantage);
                renderAdvantages();
                renderAdminAdvantages();
                saveState();
                
                document.getElementById('advantageIcon').value = '';
                document.getElementById('advantageTitle').value = '';
                document.getElementById('advantageText').value = '';
            });
            
            function renderAdminAdvantages() {
                const container = document.getElementById('advantagesManager');
                container.innerHTML = '';
                
                state.advantages.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'admin-editor';
                    itemElement.innerHTML = `
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Иконка</label>
                                <input type="text" class="editor-control" value="${item.icon}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Заголовок</label>
                                <input type="text" class="editor-control" value="${item.title}" disabled>
                            </div>
                        </div>
                        <div class="editor-group">
                            <label>Текст</label>
                            <textarea class="editor-control" disabled>${item.text}</textarea>
                        </div>
                        <button class="btn btn-danger" data-id="${item.id}">Удалить</button>
                    `;
                    container.appendChild(itemElement);
                    
                    itemElement.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.advantages = state.advantages.filter(a => a.id !== id);
                        renderAdminAdvantages();
                        renderAdvantages();
                        saveState();
                    });
                });
            }
            
            document.getElementById('addStepBtn').addEventListener('click', function() {
                const step = parseInt(document.getElementById('stepNumber').value);
                const title = document.getElementById('stepTitle').value;
                const icon = document.getElementById('stepIcon').value;
                const content = document.getElementById('stepContent').value;
                
                if (!step || !title || !icon || !content) {
                    alert('Пожалуйста, заполните все поля');
                    return;
                }
                
                const newStep = {
                    id: Date.now(),
                    step: step,
                    title: title,
                    icon: icon,
                    content: content
                };
                
                state.workSteps.push(newStep);
                renderWorkSteps();
                renderAdminSteps();
                saveState();
                
                document.getElementById('stepNumber').value = '';
                document.getElementById('stepTitle').value = '';
                document.getElementById('stepIcon').value = '';
                document.getElementById('stepContent').value = '';
            });
            
            function renderAdminSteps() {
                const container = document.getElementById('stepsManager');
                container.innerHTML = '';
                
                state.workSteps.forEach(step => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'admin-editor';
                    itemElement.innerHTML = `
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Номер шага</label>
                                <input type="number" class="editor-control" value="${step.step}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Заголовок</label>
                                <input type="text" class="editor-control" value="${step.title}" disabled>
                            </div>
                        </div>
                        <div class="editor-row">
                            <div class="editor-group">
                                <label>Иконка</label>
                                <input type="text" class="editor-control" value="${step.icon}" disabled>
                            </div>
                            <div class="editor-group">
                                <label>Описание</label>
                                <textarea class="editor-control" disabled>${step.content}</textarea>
                            </div>
                        </div>
                        <button class="btn btn-danger" data-id="${step.id}">Удалить</button>
                    `;
                    container.appendChild(itemElement);
                    
                    itemElement.querySelector('.btn-danger').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.workSteps = state.workSteps.filter(s => s.id !== id);
                        renderAdminSteps();
                        renderWorkSteps();
                        saveState();
                    });
                });
            }
            
            document.getElementById('galleryUploadBtn').addEventListener('click', function() {
                document.getElementById('gallerySource').click();
            });
            
            document.getElementById('gallerySource').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('galleryPreview').src = e.target.result;
                        document.getElementById('galleryPreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addGalleryItemBtn').addEventListener('click', function() {
                const type = document.getElementById('galleryType').value;
                const title = document.getElementById('galleryTitle').value;
                const description = document.getElementById('galleryDesc').value;
                const file = document.getElementById('gallerySource').files[0];
                
                if (!file || !title || !description) {
                    alert('Пожалуйста, заполните все поля и загрузите изображение');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newItem = {
                        id: state.editingGalleryId || Date.now(),
                        type: type,
                        src: e.target.result,
                        title: title,
                        description: description
                    };
                    
                    if (state.editingGalleryId) {
                        const index = state.gallery.findIndex(item => item.id === state.editingGalleryId);
                        if (index !== -1) {
                            state.gallery[index] = newItem;
                        }
                        state.editingGalleryId = null;
                        document.getElementById('addGalleryItemBtn').textContent = 'Добавить в галерею';
                    } else {
                        state.gallery.push(newItem);
                    }
                    
                    renderGallery();
                    renderAdminGallery();
                    saveState();
                    
                    document.getElementById('galleryTitle').value = '';
                    document.getElementById('galleryDesc').value = '';
                    document.getElementById('galleryPreview').style.display = 'none';
                    document.getElementById('gallerySource').value = '';
                }
                reader.readAsDataURL(file);
            });
            
            function renderAdminGallery() {
                const container = document.getElementById('galleryManager');
                container.innerHTML = '';
                
                state.gallery.forEach(item => {
                    const preview = document.createElement('div');
                    preview.className = 'gallery-preview';
                    
                    if (item.type === 'image') {
                        preview.innerHTML = `
                            <img src="${item.src}" alt="${item.title}">
                            <div class="item-actions">
                                <div class="action-btn edit-action edit-gallery" data-id="${item.id}">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-btn delete-action delete-gallery" data-id="${item.id}">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        `;
                    } else {
                        preview.innerHTML = `
                            <i class="fas fa-video" style="font-size: 2rem;"></i>
                            <div class="item-actions">
                                <div class="action-btn edit-action edit-gallery" data-id="${item.id}">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-btn delete-action delete-gallery" data-id="${item.id}">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        `;
                    }
                    
                    container.appendChild(preview);
                    
                    preview.querySelector('.edit-gallery').addEventListener('click', function(e) {
                        e.stopPropagation();
                        const id = parseInt(this.getAttribute('data-id'));
                        const item = state.gallery.find(g => g.id === id);
                        
                        if (item) {
                            state.editingGalleryId = id;
                            document.getElementById('galleryType').value = item.type;
                            document.getElementById('galleryTitle').value = item.title;
                            document.getElementById('galleryDesc').value = item.description;
                            document.getElementById('galleryPreview').src = item.src;
                            document.getElementById('galleryPreview').style.display = 'block';
                            document.getElementById('addGalleryItemBtn').textContent = 'Обновить элемент';
                            
                            document.getElementById('galleryType').scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                    
                    preview.querySelector('.delete-gallery').addEventListener('click', function(e) {
                        e.stopPropagation();
                        const id = parseInt(this.getAttribute('data-id'));
                        state.gallery = state.gallery.filter(g => g.id !== id);
                        renderAdminGallery();
                        renderGallery();
                        saveState();
                    });
                });
            }
            
            document.getElementById('houseUploadBtn').addEventListener('click', function() {
                document.getElementById('houseImage').click();
            });
            
            document.getElementById('houseImage').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('housePreview').src = e.target.result;
                        document.getElementById('housePreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('addHouseBtn').addEventListener('click', function() {
                const name = document.getElementById('houseName').value;
                const stage = document.getElementById('houseStage').value;
                const price = document.getElementById('housePrice').value;
                const area = document.getElementById('houseArea').value;
                const description = document.getElementById('houseDescription').value;
                const file = document.getElementById('houseImage').files[0];
                
                if (!name || !stage || !price || !area) {
                    alert('Пожалуйста, заполните все обязательные поля');
                    return;
                }
                
                let imageUrl = '';
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imageUrl = e.target.result;
                        saveHouseItem(imageUrl, name, stage, price, area, description);
                    }
                    reader.readAsDataURL(file);
                } else {
                    if (state.editingHouseId) {
                        const existingHouse = state.houses.find(h => h.id === state.editingHouseId);
                        if (existingHouse) {
                            imageUrl = existingHouse.image;
                        }
                    }
                    saveHouseItem(imageUrl, name, stage, price, area, description);
                }
            });
            
            function saveHouseItem(imageUrl, name, stage, price, area, description) {
                const newHouse = {
                    id: state.editingHouseId || Date.now(),
                    name: name,
                    stage: stage,
                    price: price,
                    area: area,
                    description: description,
                    image: imageUrl || 'https://via.placeholder.com/600x400'
                };
                
                if (state.editingHouseId) {
                    const index = state.houses.findIndex(h => h.id === state.editingHouseId);
                    if (index !== -1) {
                        state.houses[index] = newHouse;
                    }
                    state.editingHouseId = null;
                    document.getElementById('addHouseBtn').textContent = 'Добавить дом';
                } else {
                    state.houses.push(newHouse);
                }
                
                renderHouses();
                renderAdminHouses();
                saveState();
                
                document.getElementById('houseName').value = '';
                document.getElementById('houseStage').value = '';
                document.getElementById('housePrice').value = '';
                document.getElementById('houseArea').value = '';
                document.getElementById('houseDescription').value = '';
                document.getElementById('housePreview').style.display = 'none';
                document.getElementById('houseImage').value = '';
            }
            
            function renderAdminHouses() {
                const container = document.getElementById('housesManager');
                container.innerHTML = '';
                
                state.houses.forEach(house => {
                    const houseItem = document.createElement('div');
                    houseItem.className = 'house-manager-item';
                    houseItem.innerHTML = `
                        <div class="house-manager-image">
                            <img src="${house.image}" alt="${house.name}">
                            <div class="item-actions">
                                <div class="action-btn edit-action edit-house" data-id="${house.id}">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="action-btn delete-action delete-house" data-id="${house.id}">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        </div>
                        <div class="house-manager-info">
                            <div class="house-manager-title">${house.name}</div>
                            <p>${house.stage}, ${house.area} кв.м.</p>
                            <p>${house.price}</p>
                        </div>
                    `;
                    container.appendChild(houseItem);
                    
                    houseItem.querySelector('.edit-house').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        const house = state.houses.find(h => h.id === id);
                        
                        if (house) {
                            state.editingHouseId = id;
                            document.getElementById('houseName').value = house.name;
                            document.getElementById('houseStage').value = house.stage;
                            document.getElementById('housePrice').value = house.price;
                            document.getElementById('houseArea').value = house.area;
                            document.getElementById('houseDescription').value = house.description;
                            document.getElementById('housePreview').src = house.image;
                            document.getElementById('housePreview').style.display = 'block';
                            document.getElementById('addHouseBtn').textContent = 'Обновить дом';
                            
                            document.getElementById('houseName').scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                    
                    houseItem.querySelector('.delete-house').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.houses = state.houses.filter(h => h.id !== id);
                        renderAdminHouses();
                        renderHouses();
                        saveState();
                    });
                });
            }
            
            document.getElementById('saveVkBtn').addEventListener('click', function() {
                state.vkIntegration.groupId = document.getElementById('vkGroupId').value;
                state.vkIntegration.token = document.getElementById('vkToken').value;
                state.vkIntegration.count = parseInt(document.getElementById('vkCount').value);
                saveState();
                alert('Настройки VK сохранены!');
            });
            
            document.getElementById('loadVkBtn').addEventListener('click', function() {
                loadVKNews();
            });
            
            async function loadVKNews() {
                if (!state.vkIntegration.groupId || !state.vkIntegration.token) return;
                
                const loader = document.getElementById('newsLoader');
                loader.style.display = 'block';
                
                try {
                    const proxyUrl = 'https://api.allorigins.win/raw?url=';
                    const apiUrl = `https://api.vk.com/method/wall.get?owner_id=-${state.vkIntegration.groupId}&count=${state.vkIntegration.count}&access_token=${state.vkIntegration.token}&v=5.131`;
                    const url = proxyUrl + encodeURIComponent(apiUrl);
                    
                    const response = await fetch(url);
                    
                    const contentType = response.headers.get('content-type');
                    if (!contentType || !contentType.includes('application/json')) {
                        const text = await response.text();
                        throw new Error(`Ожидался JSON, получен: ${text.substring(0, 100)}...`);
                    }
                    
                    const data = await response.json();
                    
                    if (data.error) {
                        console.error('VK API Error:', data.error);
                        alert('Ошибка VK API: ' + data.error.error_msg);
                        return;
                    }
                    
                    const posts = data.response.items;
                    const vkNews = posts.map(post => {
                        let image = '';
                        if (post.attachments && post.attachments.length > 0) {
                            const photo = post.attachments.find(a => a.type === 'photo');
                            if (photo) {
                                const sizes = photo.photo.sizes;
                                const imageSize = sizes.find(size => size.type === 'x') || sizes[sizes.length - 1];
                                image = imageSize.url;
                            }
                        }
                        
                        return {
                            id: `vk-${post.id}`,
                            title: post.text.split('\n')[0].substring(0, 60) + '...',
                            excerpt: post.text.substring(0, 120) + '...',
                            content: post.text,
                            date: new Date(post.date * 1000).toISOString().split('T')[0],
                            image: image || 'https://via.placeholder.com/800x400'
                        };
                    });
                    
                    state.news = [...vkNews, ...state.news.filter(n => !n.id.startsWith('vk-'))];
                    renderNews();
                    saveState();
                    
                } catch (error) {
                    console.error('Failed to load VK news:', error);
                    alert('Ошибка загрузки новостей: ' + error.message);
                } finally {
                    loader.style.display = 'none';
                }
            }
            
            document.getElementById('addNewsBtn').addEventListener('click', function() {
                const title = document.getElementById('newsTitle').value;
                const date = document.getElementById('newsDate').value;
                const excerpt = document.getElementById('newsExcerpt').value;
                const content = document.getElementById('newsContent').value;
                const file = document.getElementById('newsImage').files[0];
                
                if (!title || !date || !excerpt || !content) {
                    alert('Пожалуйста, заполните все обязательные поля');
                    return;
                }
                
                let imageUrl = '';
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        imageUrl = e.target.result;
                        saveNewsItem(imageUrl, title, date, excerpt, content);
                    }
                    reader.readAsDataURL(file);
                } else {
                    if (state.editingNewsId) {
                        const existingNews = state.news.find(n => n.id === state.editingNewsId);
                        if (existingNews) {
                            imageUrl = existingNews.image;
                        }
                    }
                    saveNewsItem(imageUrl, title, date, excerpt, content);
                }
            });
            
            function saveNewsItem(imageUrl, title, date, excerpt, content) {
                const newItem = {
                    id: state.editingNewsId || Date.now(),
                    title: title,
                    excerpt: excerpt,
                    content: content,
                    date: date,
                    image: imageUrl || 'https://via.placeholder.com/800x400'
                };
                
                if (state.editingNewsId) {
                    const index = state.news.findIndex(item => item.id === state.editingNewsId);
                    if (index !== -1) {
                        state.news[index] = newItem;
                    }
                    state.editingNewsId = null;
                    document.getElementById('addNewsBtn').textContent = 'Добавить новость';
                } else {
                    state.news.push(newItem);
                }
                
                renderNews();
                renderAdminNews();
                saveState();
                
                document.getElementById('newsTitle').value = '';
                document.getElementById('newsDate').value = '';
                document.getElementById('newsExcerpt').value = '';
                document.getElementById('newsContent').value = '';
                document.getElementById('newsImagePreview').style.display = 'none';
                document.getElementById('newsImage').value = '';
            }
            
            function renderAdminNews() {
                const container = document.getElementById('newsManager');
                container.innerHTML = '';
                
                state.news.forEach(newsItem => {
                    const newsElement = document.createElement('div');
                    newsElement.className = 'news-item';
                    newsElement.innerHTML = `
                        <div class="news-image">
                            <img src="${newsItem.image}" alt="${newsItem.title}" style="height: 150px; object-fit: cover;">
                        </div>
                        <div class="news-content">
                            <div class="news-date">${formatDate(newsItem.date)}</div>
                            <h3 class="news-title">${newsItem.title}</h3>
                            <p class="news-excerpt">${newsItem.excerpt}</p>
                            <div class="admin-controls">
                                <button class="btn edit-news" data-id="${newsItem.id}">Редактировать</button>
                                <button class="btn delete-news" data-id="${newsItem.id}">Удалить</button>
                            </div>
                        </div>
                    `;
                    container.appendChild(newsElement);
                    
                    newsElement.querySelector('.edit-news').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        const item = state.news.find(item => item.id === id);
                        
                        if (item) {
                            state.editingNewsId = id;
                            document.getElementById('newsTitle').value = item.title;
                            document.getElementById('newsDate').value = item.date;
                            document.getElementById('newsExcerpt').value = item.excerpt;
                            document.getElementById('newsContent').value = item.content;
                            document.getElementById('newsImagePreview').src = item.image;
                            document.getElementById('newsImagePreview').style.display = 'block';
                            document.getElementById('addNewsBtn').textContent = 'Обновить новость';
                            
                            document.getElementById('newsTitle').scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                    
                    newsElement.querySelector('.delete-news').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.news = state.news.filter(n => n.id !== id);
                        renderAdminNews();
                        renderNews();
                        saveState();
                    });
                });
            }
            
            document.getElementById('reviewPhotoUploadBtn').addEventListener('click', function() {
                document.getElementById('reviewPhotoAdmin').click();
            });
            
            document.getElementById('reviewPhotoAdmin').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('reviewPhotoPreview').src = e.target.result;
                        document.getElementById('reviewPhotoPreview').style.display = 'block';
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
            
            document.getElementById('reviewPhotosUploadBtn').addEventListener('click', function() {
                document.getElementById('reviewPhotosAdmin').click();
            });
            
            document.getElementById('reviewPhotosAdmin').addEventListener('change', function(e) {
                const files = this.files;
                if (!files || files.length === 0) return;
                
                const previewContainer = document.getElementById('reviewPhotosPreview');
                previewContainer.innerHTML = '';
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const previewItem = document.createElement('div');
                        previewItem.className = 'photo-preview-item';
                        previewItem.innerHTML = `
                            <img src="${e.target.result}" alt="Preview">
                            <div class="remove-photo-btn">×</div>
                        `;
                        previewContainer.appendChild(previewItem);
                        
                        previewItem.querySelector('.remove-photo-btn').addEventListener('click', function() {
                            previewItem.remove();
                        });
                    }
                    
                    reader.readAsDataURL(file);
                }
            });
            
            document.getElementById('addReviewBtn').addEventListener('click', function() {
                const author = document.getElementById('reviewAuthor').value;
                const date = document.getElementById('reviewDate').value;
                const rating = parseInt(document.getElementById('reviewRating').value);
                const status = document.getElementById('reviewStatus').value;
                const content = document.getElementById('reviewContent').value;
                
                const authorPhotoFile = document.getElementById('reviewPhotoAdmin').files[0];
                let authorPhotoUrl = '';
                if (authorPhotoFile) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        authorPhotoUrl = e.target.result;
                        saveReviewItem(authorPhotoUrl, author, date, rating, status, content);
                    }
                    reader.readAsDataURL(authorPhotoFile);
                } else {
                    if (state.editingReviewId) {
                        const existingReview = state.reviews.find(r => r.id === state.editingReviewId);
                        if (existingReview) {
                            authorPhotoUrl = existingReview.photo;
                        }
                    }
                    saveReviewItem(authorPhotoUrl, author, date, rating, status, content);
                }
            });
            
            function saveReviewItem(authorPhotoUrl, author, date, rating, status, content) {
                const newReview = {
                    id: state.editingReviewId || Date.now(),
                    author: author,
                    text: content,
                    date: date,
                    rating: rating,
                    approved: status === 'approved',
                    photo: authorPhotoUrl,
                    photos: []
                };
                
                if (state.editingReviewId) {
                    const index = state.reviews.findIndex(r => r.id === state.editingReviewId);
                    if (index !== -1) {
                        newReview.photos = state.reviews[index].photos || [];
                        state.reviews[index] = newReview;
                    }
                    state.editingReviewId = null;
                    document.getElementById('addReviewBtn').textContent = 'Добавить отзыв';
                } else {
                    state.reviews.push(newReview);
                }
                
                renderReviews();
                renderAdminReviews();
                saveState();
                
                document.getElementById('reviewAuthor').value = '';
                document.getElementById('reviewDate').value = '';
                document.getElementById('reviewRating').value = '5';
                document.getElementById('reviewContent').value = '';
                document.getElementById('reviewPhotoPreview').style.display = 'none';
                document.getElementById('reviewPhotoAdmin').value = '';
                document.getElementById('reviewPhotosPreview').innerHTML = '';
            }
            
            function renderAdminReviews() {
                const container = document.getElementById('reviewsManager');
                container.innerHTML = '';
                
                state.reviews.forEach(review => {
                    const reviewElement = document.createElement('div');
                    reviewElement.className = 'review-item';
                    reviewElement.innerHTML = `
                        <div class="review-header">
                            <div class="review-avatar">
                                ${review.photo 
                                    ? `<img src="${review.photo}" alt="${review.author}" class="review-avatar-img" style="width:60px;height:60px;">` 
                                    : `<div class="review-avatar">${review.author.charAt(0)}</div>`}
                            </div>
                            <div>
                                <div class="review-author">${review.author}</div>
                                <div class="review-date">${formatDate(review.date)}</div>
                            </div>
                            <div class="review-status ${review.approved ? 'approved' : ''}">
                                ${review.approved ? 'Одобрен' : 'На модерации'}
                            </div>
                        </div>
                        <div class="review-rating">${renderStars(review.rating)}</div>
                        <div class="review-content">${review.text}</div>
                        <div class="admin-controls">
                            <button class="btn edit-review" data-id="${review.id}">Редактировать</button>
                            <button class="btn delete-review" data-id="${review.id}">Удалить</button>
                        </div>
                    `;
                    container.appendChild(reviewElement);
                    
                    reviewElement.querySelector('.edit-review').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        const review = state.reviews.find(r => r.id === id);
                        
                        if (review) {
                            state.editingReviewId = id;
                            document.getElementById('reviewAuthor').value = review.author;
                            document.getElementById('reviewDate').value = review.date;
                            document.getElementById('reviewRating').value = review.rating;
                            document.getElementById('reviewStatus').value = review.approved ? 'approved' : 'pending';
                            document.getElementById('reviewContent').value = review.text;
                            
                            if (review.photo) {
                                document.getElementById('reviewPhotoPreview').src = review.photo;
                                document.getElementById('reviewPhotoPreview').style.display = 'block';
                            }
                            
                            const photosPreview = document.getElementById('reviewPhotosPreview');
                            photosPreview.innerHTML = '';
                            if (review.photos && review.photos.length > 0) {
                                review.photos.forEach(photo => {
                                    const previewItem = document.createElement('div');
                                    previewItem.className = 'photo-preview-item';
                                    previewItem.innerHTML = `<img src="${photo}" alt="Preview">`;
                                    photosPreview.appendChild(previewItem);
                                });
                            }
                            
                            document.getElementById('addReviewBtn').textContent = 'Обновить отзыв';
                            
                            document.getElementById('reviewAuthor').scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                    
                    reviewElement.querySelector('.delete-review').addEventListener('click', function() {
                        const id = parseInt(this.getAttribute('data-id'));
                        state.reviews = state.reviews.filter(r => r.id !== id);
                        renderAdminReviews();
                        renderReviews();
                        saveState();
                    });
                });
            }
            
            renderAdminAdvantages();
            renderAdminSteps();
            renderAdminGallery();
            renderAdminHouses();
            renderAdminNews();
            renderAdminReviews();
        }
    </script>
</body>
</html>
